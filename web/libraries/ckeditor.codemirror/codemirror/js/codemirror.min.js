(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define("codemirror.js",a):(b.CodeMirror=a())}(this,(function(){var eB=navigator.userAgent;var eM=navigator.platform;var cQ=/gecko\/\d/i.test(eB);var fv=/MSIE \d/.test(eB);var b4=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(eB);var c4=/Edge\/(\d+)/.exec(eB);var eh=fv||b4||c4;var m=eh&&(fv?document.documentMode||6:+(c4||b4)[1]);var du=!c4&&/WebKit\//.test(eB);var ek=du&&/Qt\/\d+\.\d+/.test(eB);var dK=!c4&&/Chrome\//.test(eB);var eD=/Opera\//.test(eB);var aM=/Apple Computer/.test(navigator.vendor);var dC=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(eB);var gh=/PhantomJS/.test(eB);var fP=!c4&&/AppleWebKit/.test(eB)&&/Mobile\/\w+/.test(eB);var aY=/Android/.test(eB);var eS=fP||aY||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(eB);var cu=fP||/Mac/.test(eM);var gB=/\bCrOS\b/.test(eB);var a1=/win/i.test(eM);var bc=eD&&eB.match(/Version\/(\d*\.\d*)/);if(bc){bc=Number(bc[1])}if(bc&&bc>=15){eD=false;du=true}var cc=cu&&(ek||eD&&(bc==null||bc<12.11));var he=cQ||(eh&&m>=9);function Y(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var h=function(hq,i){var hr=hq.className;var hp=Y(i).exec(hr);if(hp){var hs=hr.slice(hp.index+hp[0].length);hq.className=hr.slice(0,hp.index)+(hs?hp[1]+hs:"")}};function eC(hp){for(var i=hp.childNodes.length;i>0;--i){hp.removeChild(hp.firstChild)}return hp}function ce(i,hp){return eC(i).appendChild(hp)}function g4(hp,ht,hs,hr){var hu=document.createElement(hp);if(hs){hu.className=hs}if(hr){hu.style.cssText=hr}if(typeof ht=="string"){hu.appendChild(document.createTextNode(ht))}else{if(ht){for(var hq=0;hq<ht.length;++hq){hu.appendChild(ht[hq])}}}return hu}function hb(i,hr,hq,hp){var hs=g4(i,hr,hq,hp);hs.setAttribute("role","presentation");return hs}var cN;if(document.createRange){cN=function(hr,hs,hp,i){var hq=document.createRange();hq.setEnd(i||hr,hp);hq.setStart(hr,hs);return hq}}else{cN=function(hq,hs,i){var hp=document.body.createTextRange();try{hp.moveToElementText(hq.parentNode)}catch(hr){return hp}hp.collapse(true);hp.moveEnd("character",i);hp.moveStart("character",hs);return hp}}function hf(i,hp){if(hp.nodeType==3){hp=hp.parentNode}if(i.contains){return i.contains(hp)}do{if(hp.nodeType==11){hp=hp.host}if(hp==i){return true}}while(hp=hp.parentNode)}function el(){var i;try{i=document.activeElement}catch(hp){i=document.body||null}while(i&&i.shadowRoot&&i.shadowRoot.activeElement){i=i.shadowRoot.activeElement}return i}function gr(hp,i){var hq=hp.className;if(!Y(i).test(hq)){hp.className+=(hq?" ":"")+i}}function gR(hr,hp){var hq=hr.split(" ");for(var hs=0;hs<hq.length;hs++){if(hq[hs]&&!Y(hq[hs]).test(hp)){hp+=" "+hq[hs]}}return hp}var ei=function(i){i.select()};if(fP){ei=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(eh){ei=function(hp){try{hp.select()}catch(i){}}}}function cX(hp){var i=Array.prototype.slice.call(arguments,1);return function(){return hp.apply(null,i)}}function aZ(hq,hp,i){if(!hp){hp={}}for(var hr in hq){if(hq.hasOwnProperty(hr)&&(i!==false||!hp.hasOwnProperty(hr))){hp[hr]=hq[hr]}}return hp}function cd(hs,hq,hu,hv,hr){if(hq==null){hq=hs.search(/[^\s\u00a0]/);if(hq==-1){hq=hs.length}}for(var ht=hv||0,hw=hr||0;;){var hp=hs.indexOf("\t",ht);if(hp<0||hp>=hq){return hw+(hq-ht)}hw+=hp-ht;hw+=hu-(hw%hu);ht=hp+1}}var ho=function(){this.id=null};ho.prototype.set=function(i,hp){clearTimeout(this.id);this.id=setTimeout(hp,i)};function dQ(hr,hp){for(var hq=0;hq<hr.length;++hq){if(hr[hq]==hp){return hq}}return -1}var ef=30;var cz={toString:function(){return"CodeMirror.Pass"}};var ah={scroll:false};var R={origin:"*mouse"};var dq={origin:"+move"};function e4(hs,hr,ht){for(var hu=0,hq=0;;){var hp=hs.indexOf("\t",hu);if(hp==-1){hp=hs.length}var i=hp-hu;if(hp==hs.length||hq+i>=hr){return hu+Math.min(i,hr-hq)}hq+=hp-hu;hq+=ht-(hq%ht);hu=hp+1;if(hq>=hr){return hu}}}var bd=[""];function cR(i){while(bd.length<=i){bd.push(gx(bd)+" ")}return bd[i]}function gx(i){return i[i.length-1]}function cf(hs,hr){var hp=[];for(var hq=0;hq<hs.length;hq++){hp[hq]=hr(hs[hq],hq)}return hp}function cx(hs,hp,hq){var hr=0,i=hq(hp);while(hr<hs.length&&hq(hs[hr])<=i){hr++}hs.splice(hr,0,hp)}function gS(){}function cL(hq,i){var hp;if(Object.create){hp=Object.create(hq)}else{gS.prototype=hq;hp=new gS()}if(i){aZ(i,hp)}return hp}var bp=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function gu(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||bp.test(i))}function c2(i,hp){if(!hp){return gu(i)}if(hp.source.indexOf("\\w")>-1&&gu(i)){return true}return hp.test(i)}function fH(i){for(var hp in i){if(i.hasOwnProperty(hp)&&i[hp]){return false}}return true}var fu=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function gc(i){return i.charCodeAt(0)>=768&&fu.test(i)}function eW(hp,hq,i){while((i<0?hq>0:hq<hp.length)&&gc(hp.charAt(hq))){hq+=i}return hq}function cO(i,ht,hs){var hq=ht>hs?-1:1;for(;;){if(ht==hs){return ht}var hr=(ht+hs)/2,hp=hq<0?Math.ceil(hr):Math.floor(hr);if(hp==ht){return i(hp)?ht:hs}if(i(hp)){hs=hp}else{ht=hp+hq}}}function fs(hp,hr,hq){var hs=this;this.input=hq;hs.scrollbarFiller=g4("div",null,"CodeMirror-scrollbar-filler");hs.scrollbarFiller.setAttribute("cm-not-content","true");hs.gutterFiller=g4("div",null,"CodeMirror-gutter-filler");hs.gutterFiller.setAttribute("cm-not-content","true");hs.lineDiv=hb("div",null,"CodeMirror-code");hs.selectionDiv=g4("div",null,null,"position: relative; z-index: 1");hs.cursorDiv=g4("div",null,"CodeMirror-cursors");hs.measure=g4("div",null,"CodeMirror-measure");hs.lineMeasure=g4("div",null,"CodeMirror-measure");hs.lineSpace=hb("div",[hs.measure,hs.lineMeasure,hs.selectionDiv,hs.cursorDiv,hs.lineDiv],null,"position: relative; outline: none");var i=hb("div",[hs.lineSpace],"CodeMirror-lines");hs.mover=g4("div",[i],null,"position: relative");hs.sizer=g4("div",[hs.mover],"CodeMirror-sizer");hs.sizerWidth=null;hs.heightForcer=g4("div",null,null,"position: absolute; height: "+ef+"px; width: 1px;");hs.gutters=g4("div",null,"CodeMirror-gutters");hs.lineGutter=null;hs.scroller=g4("div",[hs.sizer,hs.heightForcer,hs.gutters],"CodeMirror-scroll");hs.scroller.setAttribute("tabIndex","-1");hs.wrapper=g4("div",[hs.scrollbarFiller,hs.gutterFiller,hs.scroller],"CodeMirror");if(eh&&m<8){hs.gutters.style.zIndex=-1;hs.scroller.style.paddingRight=0}if(!du&&!(cQ&&eS)){hs.scroller.draggable=true}if(hp){if(hp.appendChild){hp.appendChild(hs.wrapper)}else{hp(hs.wrapper)}}hs.viewFrom=hs.viewTo=hr.first;hs.reportedViewFrom=hs.reportedViewTo=hr.first;hs.view=[];hs.renderedView=null;hs.externalMeasured=null;hs.viewOffset=0;hs.lastWrapHeight=hs.lastWrapWidth=0;hs.updateLineNumbers=null;hs.nativeBarWidth=hs.barHeight=hs.barWidth=0;hs.scrollbarsClipped=false;hs.lineNumWidth=hs.lineNumInnerWidth=hs.lineNumChars=null;hs.alignWidgets=false;hs.cachedCharWidth=hs.cachedTextHeight=hs.cachedPaddingH=null;hs.maxLine=null;hs.maxLineLength=0;hs.maxLineChanged=false;hs.wheelDX=hs.wheelDY=hs.wheelStartX=hs.wheelStartY=null;hs.shift=false;hs.selForContextMenu=null;hs.activeTouch=null;hq.init(hs)}function f3(hs,hu){hu-=hs.first;if(hu<0||hu>=hs.size){throw new Error("There is no line "+(hu+hs.first)+" in the document.")}var hp=hs;while(!hp.lines){for(var hq=0;;++hq){var ht=hp.children[hq],hr=ht.chunkSize();if(hu<hr){hp=ht;break}hu-=hr}}return hp.lines[hu]}function g7(hq,hs,i){var hp=[],hr=hs.line;hq.iter(hs.line,i.line+1,function(ht){var hu=ht.text;if(hr==i.line){hu=hu.slice(0,i.ch)}if(hr==hs.line){hu=hu.slice(hs.ch)}hp.push(hu);++hr});return hp}function bf(hp,hr,hq){var i=[];hp.iter(hr,hq,function(hs){i.push(hs.text)});return i}function ha(hp,i){var hq=i-hp.height;if(hq){for(var hr=hp;hr;hr=hr.parent){hr.height+=hq}}}function b8(hp){if(hp.parent==null){return null}var ht=hp.parent,hs=dQ(ht.lines,hp);for(var hq=ht.parent;hq;ht=hq,hq=hq.parent){for(var hr=0;;++hr){if(hq.children[hr]==ht){break}hs+=hq.children[hr].chunkSize()}}return hs+ht.first}function b1(hv,hu){var hs=hv.first;outer:do{for(var hr=0;hr<hv.children.length;++hr){var hq=hv.children[hr],hp=hq.height;if(hu<hp){hv=hq;continue outer}hu-=hp;hs+=hq.chunkSize()}return hs}while(!hv.lines);var ht=0;for(;ht<hv.lines.length;++ht){var hx=hv.lines[ht],hw=hx.height;if(hu<hw){break}hu-=hw}return hs+ht}function cw(hp,i){return i>=hp.first&&i<hp.first+hp.size}function e7(hp,hq){return String(hp.lineNumberFormatter(hq+hp.firstLineNumber))}function ac(i,hp,hq){if(hq===void 0){hq=null}if(!(this instanceof ac)){return new ac(i,hp,hq)}this.line=i;this.ch=hp;this.sticky=hq}function cE(hp,i){return hp.line-i.line||hp.ch-i.ch}function ad(hp,i){return hp.sticky==i.sticky&&cE(hp,i)==0}function cH(i){return ac(i.line,i.ch)}function bR(hp,i){return cE(hp,i)<0?i:hp}function aB(hp,i){return cE(hp,i)<0?hp:i}function dz(i,hp){return Math.max(i.first,Math.min(hp,i.first+i.size-1))}function gC(hp,hq){if(hq.line<hp.first){return ac(hp.first,0)}var i=hp.first+hp.size-1;if(hq.line>i){return ac(i,f3(hp,i).text.length)}return gf(hq,f3(hp,hq.line).text.length)}function gf(hq,hp){var i=hq.ch;if(i==null||i>hp){return ac(hq.line,hp)}else{if(i<0){return ac(hq.line,0)}else{return hq}}}function eA(hr,hs){var hp=[];for(var hq=0;hq<hs.length;hq++){hp[hq]=gC(hr,hs[hq])}return hp}var hj=false;var bk=false;function gp(){hj=true}function bQ(){bk=true}function eV(i,hq,hp){this.marker=i;this.from=hq;this.to=hp}function fY(hr,hp){if(hr){for(var hq=0;hq<hr.length;++hq){var hs=hr[hq];if(hs.marker==hp){return hs}}}}function fr(hq,hr){var hs;for(var hp=0;hp<hq.length;++hp){if(hq[hp]!=hr){(hs||(hs=[])).push(hq[hp])}}return hs}function cC(i,hp){i.markedSpans=i.markedSpans?i.markedSpans.concat([hp]):[hp];hp.marker.attachLine(i)}function a3(hq,hr,hv){var hw;if(hq){for(var ht=0;ht<hq.length;++ht){var hx=hq[ht],hu=hx.marker;var hp=hx.from==null||(hu.inclusiveLeft?hx.from<=hr:hx.from<hr);if(hp||hx.from==hr&&hu.type=="bookmark"&&(!hv||!hx.marker.insertLeft)){var hs=hx.to==null||(hu.inclusiveRight?hx.to>=hr:hx.to>hr);(hw||(hw=[])).push(new eV(hu,hx.from,hs?null:hx.to))}}}return hw}function aL(hq,hs,hv){var hw;if(hq){for(var ht=0;ht<hq.length;++ht){var hx=hq[ht],hu=hx.marker;var hr=hx.to==null||(hu.inclusiveRight?hx.to>=hs:hx.to>hs);if(hr||hx.from==hs&&hu.type=="bookmark"&&(!hv||hx.marker.insertLeft)){var hp=hx.from==null||(hu.inclusiveLeft?hx.from<=hs:hx.from<hs);(hw||(hw=[])).push(new eV(hu,hp?null:hx.from-hs,hx.to==null?null:hx.to-hs))}}}return hw}function eX(hK,hA){if(hA.full){return null}var hr=cw(hK,hA.from.line)&&f3(hK,hA.from.line).markedSpans;var hy=cw(hK,hA.to.line)&&f3(hK,hA.to.line).markedSpans;if(!hr&&!hy){return null}var hx=hA.from.ch,hF=hA.to.ch,hC=cE(hA.from,hA.to)==0;var hw=a3(hr,hx,hC);var hz=aL(hy,hF,hC);var hD=hA.text.length==1,hu=gx(hA.text).length+(hD?hx:0);if(hw){for(var hI=0;hI<hw.length;++hI){var hH=hw[hI];if(hH.to==null){var hB=fY(hz,hH.marker);if(!hB){hH.to=hx}else{if(hD){hH.to=hB.to==null?null:hB.to+hu}}}}}if(hz){for(var hv=0;hv<hz.length;++hv){var hG=hz[hv];if(hG.to!=null){hG.to+=hu}if(hG.from==null){var hq=fY(hw,hG.marker);if(!hq){hG.from=hu;if(hD){(hw||(hw=[])).push(hG)}}}else{hG.from+=hu;if(hD){(hw||(hw=[])).push(hG)}}}}if(hw){hw=s(hw)}if(hz&&hz!=hw){hz=s(hz)}var hJ=[hw];if(!hD){var hE=hA.text.length-2,hp;if(hE>0&&hw){for(var ht=0;ht<hw.length;++ht){if(hw[ht].to==null){(hp||(hp=[])).push(new eV(hw[ht].marker,null,null))}}}for(var hs=0;hs<hE;++hs){hJ.push(hp)}hJ.push(hz)}return hJ}function s(hq){for(var hp=0;hp<hq.length;++hp){var hr=hq[hp];if(hr.from!=null&&hr.from==hr.to&&hr.marker.clearWhenEmpty!==false){hq.splice(hp--,1)}}if(!hq.length){return null}return hq}function db(hB,hz,hA){var ht=null;hB.iter(hz.line,hA.line+1,function(hC){if(hC.markedSpans){for(var hD=0;hD<hC.markedSpans.length;++hD){var hE=hC.markedSpans[hD].marker;if(hE.readOnly&&(!ht||dQ(ht,hE)==-1)){(ht||(ht=[])).push(hE)}}}});if(!ht){return null}var hu=[{from:hz,to:hA}];for(var hv=0;hv<ht.length;++hv){var hw=ht[hv],hr=hw.find(0);for(var hs=0;hs<hu.length;++hs){var hq=hu[hs];if(cE(hq.to,hr.from)<0||cE(hq.from,hr.to)>0){continue}var hy=[hs,1],hp=cE(hq.from,hr.from),hx=cE(hq.to,hr.to);if(hp<0||!hw.inclusiveLeft&&!hp){hy.push({from:hq.from,to:hr.from})}if(hx>0||!hw.inclusiveRight&&!hx){hy.push({from:hr.to,to:hq.to})}hu.splice.apply(hu,hy);hs+=hy.length-3}}return hu}function hd(hp){var hr=hp.markedSpans;if(!hr){return}for(var hq=0;hq<hr.length;++hq){hr[hq].marker.detachLine(hp)}hp.markedSpans=null}function dx(hp,hr){if(!hr){return}for(var hq=0;hq<hr.length;++hq){hr[hq].marker.attachLine(hp)}hp.markedSpans=hr}function w(i){return i.inclusiveLeft?-1:0}function ci(i){return i.inclusiveRight?1:0}function ep(hr,hp){var ht=hr.lines.length-hp.lines.length;if(ht!=0){return ht}var hq=hr.find(),hu=hp.find();var i=cE(hq.from,hu.from)||w(hr)-w(hp);if(i){return -i}var hs=cE(hq.to,hu.to)||ci(hr)-ci(hp);if(hs){return hs}return hp.id-hr.id}function bj(hq,hu){var hp=bk&&hq.markedSpans,ht;if(hp){for(var hs=(void 0),hr=0;hr<hp.length;++hr){hs=hp[hr];if(hs.marker.collapsed&&(hu?hs.from:hs.to)==null&&(!ht||ep(ht,hs.marker)<0)){ht=hs.marker}}}return ht}function fB(i){return bj(i,true)}function fc(i){return bj(i,false)}function A(hx,hr,hv,hw,ht){var hA=f3(hx,hr);var hp=bk&&hA.markedSpans;if(hp){for(var hs=0;hs<hp.length;++hs){var hq=hp[hs];if(!hq.marker.collapsed){continue}var hz=hq.marker.find(0);var hy=cE(hz.from,hv)||w(hq.marker)-w(ht);var hu=cE(hz.to,hw)||ci(hq.marker)-ci(ht);if(hy>=0&&hu<=0||hy<=0&&hu>=0){continue}if(hy<=0&&(hq.marker.inclusiveRight&&ht.inclusiveLeft?cE(hz.to,hv)>=0:cE(hz.to,hv)>0)||hy>=0&&(hq.marker.inclusiveRight&&ht.inclusiveLeft?cE(hz.from,hw)<=0:cE(hz.from,hw)<0)){return true}}}}function z(hp){var i;while(i=fB(hp)){hp=i.find(-1,true).line}return hp}function cK(hp){var i;while(i=fc(hp)){hp=i.find(1,true).line}return hp}function g(hq){var i,hp;while(i=fc(hq)){hq=i.find(1,true).line;(hp||(hp=[])).push(hq)}return hp}function a9(hr,hp){var i=f3(hr,hp),hq=z(i);if(i==hq){return hp}return b8(hq)}function eE(hr,hq){if(hq>hr.lastLine()){return hq}var hp=f3(hr,hq),i;if(!gk(hr,hp)){return hq}while(i=fc(hp)){hp=i.find(1,true).line}return b8(hp)+1}function gk(ht,hq){var hp=bk&&hq.markedSpans;if(hp){for(var hs=(void 0),hr=0;hr<hp.length;++hr){hs=hp[hr];if(!hs.marker.collapsed){continue}if(hs.from==null){return true}if(hs.marker.widgetNode){continue}if(hs.from==0&&hs.marker.inclusiveLeft&&Z(ht,hq,hs)){return true}}}}function Z(hu,hq,hs){if(hs.to==null){var hp=hs.marker.find(1,true);return Z(hu,hp.line,fY(hp.line.markedSpans,hs.marker))}if(hs.marker.inclusiveRight&&hs.to==hq.text.length){return true}for(var ht=(void 0),hr=0;hr<hq.markedSpans.length;++hr){ht=hq.markedSpans[hr];if(ht.marker.collapsed&&!ht.marker.widgetNode&&ht.from==hs.to&&(ht.to==null||ht.to!=hs.from)&&(ht.marker.inclusiveLeft||hs.marker.inclusiveRight)&&Z(hu,hq,ht)){return true}}}function b7(hr){hr=z(hr);var ht=0,hq=hr.parent;for(var hs=0;hs<hq.lines.length;++hs){var hp=hq.lines[hs];if(hp==hr){break}else{ht+=hp.height}}for(var hu=hq.parent;hu;hq=hu,hu=hq.parent){for(var hw=0;hw<hu.children.length;++hw){var hv=hu.children[hw];if(hv==hq){break}else{ht+=hv.height}}}return ht}function e0(hq){if(hq.height==0){return 0}var hp=hq.text.length,i,ht=hq;while(i=fB(ht)){var hr=i.find(0,true);ht=hr.from.line;hp+=hr.from.ch-hr.to.ch}ht=hq;while(i=fc(ht)){var hs=i.find(0,true);hp-=ht.text.length-hs.from.ch;ht=hs.to.line;hp+=ht.text.length-hs.to.ch}return hp}function f(i){var hq=i.display,hp=i.doc;hq.maxLine=f3(hp,hp.first);hq.maxLineLength=e0(hq.maxLine);hq.maxLineChanged=true;hp.iter(function(hs){var hr=e0(hs);if(hr>hq.maxLineLength){hq.maxLineLength=hr;hq.maxLine=hs}})}function eF(hp,hv,hu,ht){if(!hp){return ht(hv,hu,"ltr",0)}var hs=false;for(var hr=0;hr<hp.length;++hr){var hq=hp[hr];if(hq.from<hu&&hq.to>hv||hv==hu&&hq.to==hv){ht(Math.max(hq.from,hv),Math.min(hq.to,hu),hq.level==1?"rtl":"ltr",hr);hs=true}}if(!hs){ht(hv,hu,"ltr")}}var fR=null;function aS(hp,hr,ht){var hs;fR=null;for(var hq=0;hq<hp.length;++hq){var hu=hp[hq];if(hu.from<hr&&hu.to>hr){return hq}if(hu.to==hr){if(hu.from!=hu.to&&ht=="before"){hs=hq}else{fR=hq}}if(hu.from==hr){if(hu.from!=hu.to&&ht!="before"){hs=hq}else{fR=hq}}}return hs!=null?hs:fR}var bv=(function(){var hu="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var hs="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function hr(hx){if(hx<=247){return hu.charAt(hx)}else{if(1424<=hx&&hx<=1524){return"R"}else{if(1536<=hx&&hx<=1785){return hs.charAt(hx-1536)}else{if(1774<=hx&&hx<=2220){return"r"}else{if(8192<=hx&&hx<=8203){return"w"}else{if(hx==8204){return"b"}else{return"L"}}}}}}}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var hw=/[stwN]/,hq=/[LRr]/,hp=/[Lb1n]/,ht=/[1n]/;function hv(hz,hy,hx){this.level=hz;this.from=hy;this.to=hx}return function(hU,hA){var hJ=hA=="ltr"?"L":"R";if(hU.length==0||hA=="ltr"&&!i.test(hU)){return false}var hD=hU.length,h3=[];for(var h6=0;h6<hD;++h6){h3.push(hr(hU.charCodeAt(h6)))}for(var hR=0,hQ=hJ;hR<hD;++hR){var h7=h3[hR];if(h7=="m"){h3[hR]=hQ}else{hQ=h7}}for(var hP=0,hz=hJ;hP<hD;++hP){var h2=h3[hP];if(h2=="1"&&hz=="r"){h3[hP]="n"}else{if(hq.test(h2)){hz=h2;if(h2=="r"){h3[hP]="R"}}}}for(var hO=1,hy=h3[0];hO<hD-1;++hO){var h1=h3[hO];if(h1=="+"&&hy=="1"&&h3[hO+1]=="1"){h3[hO]="1"}else{if(h1==","&&hy==h3[hO+1]&&(hy=="1"||hy=="n")){h3[hO]=hy}}hy=h1}for(var hN=0;hN<hD;++hN){var h0=h3[hN];if(h0==","){h3[hN]="N"}else{if(h0=="%"){var hC=(void 0);for(hC=hN+1;hC<hD&&h3[hC]=="%";++hC){}var hH=(hN&&h3[hN-1]=="!")||(hC<hD&&h3[hC]=="1")?"1":"N";for(var h5=hN;h5<hC;++h5){h3[h5]=hH}hN=hC-1}}}for(var hM=0,hG=hJ;hM<hD;++hM){var hY=h3[hM];if(hG=="L"&&hY=="1"){h3[hM]="L"}else{if(hq.test(hY)){hG=hY}}}for(var hL=0;hL<hD;++hL){if(hw.test(h3[hL])){var hV=(void 0);for(hV=hL+1;hV<hD&&hw.test(h3[hV]);++hV){}var hX=(hL?h3[hL-1]:hJ)=="L";var hZ=(hV<hD?h3[hV]:hJ)=="L";var hT=hX==hZ?(hX?"L":"R"):hJ;for(var hF=hL;hF<hV;++hF){h3[hF]=hT}hL=hV-1}}var hW=[],h4;for(var hK=0;hK<hD;){if(hp.test(h3[hK])){var hI=hK;for(++hK;hK<hD&&hp.test(h3[hK]);++hK){}hW.push(new hv(0,hI,hK))}else{var hS=hK,hx=hW.length;for(++hK;hK<hD&&h3[hK]!="L";++hK){}for(var hE=hS;hE<hK;){if(ht.test(h3[hE])){if(hS<hE){hW.splice(hx,0,new hv(1,hS,hE))}var hB=hE;for(++hE;hE<hK&&ht.test(h3[hE]);++hE){}hW.splice(hx,0,new hv(2,hB,hE));hS=hE}else{++hE}}if(hS<hK){hW.splice(hx,0,new hv(1,hS,hK))}}}if(hA=="ltr"){if(hW[0].level==1&&(h4=hU.match(/^\s+/))){hW[0].from=h4[0].length;hW.unshift(new hv(0,0,h4[0].length))}if(gx(hW).level==1&&(h4=hU.match(/\s+$/))){gx(hW).to-=h4[0].length;hW.push(new hv(0,hD-h4[0].length,hD))}}return hA=="rtl"?hW.reverse():hW}})();function a(hp,hq){var i=hp.order;if(i==null){i=hp.order=bv(hp.text,hq)}return i}var fU=[];var cj=function(hq,i,hp){if(hq.addEventListener){hq.addEventListener(i,hp,false)}else{if(hq.attachEvent){hq.attachEvent("on"+i,hp)}else{var hr=hq._handlers||(hq._handlers={});hr[i]=(hr[i]||fU).concat(hp)}}};function eY(hp,i){return hp._handlers&&hp._handlers[i]||fU}function eR(hs,hq,hr){if(hs.removeEventListener){hs.removeEventListener(hq,hr,false)}else{if(hs.detachEvent){hs.detachEvent("on"+hq,hr)}else{var ht=hs._handlers,i=ht&&ht[hq];if(i){var hp=dQ(i,hr);if(hp>-1){ht[hq]=i.slice(0,hp).concat(i.slice(hp+1))}}}}}function aO(ht,hs){var hp=eY(ht,hs);if(!hp.length){return}var hq=Array.prototype.slice.call(arguments,2);for(var hr=0;hr<hp.length;++hr){hp[hr].apply(null,hq)}}function a4(i,hq,hp){if(typeof hq=="string"){hq={type:hq,preventDefault:function(){this.defaultPrevented=true}}}aO(i,hp||hq.type,i,hq);return b6(hq)||hq.codemirrorIgnore}function ab(hq){var hp=hq._handlers&&hq._handlers.cursorActivity;if(!hp){return}var hs=hq.curOp.cursorActivityHandlers||(hq.curOp.cursorActivityHandlers=[]);for(var hr=0;hr<hp.length;++hr){if(dQ(hs,hp[hr])==-1){hs.push(hp[hr])}}}function f8(hp,i){return eY(hp,i).length>0}function bT(i){i.prototype.on=function(hp,hq){cj(this,hp,hq)};i.prototype.off=function(hp,hq){eR(this,hp,hq)}}function c8(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function dY(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function b6(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function e5(i){c8(i);dY(i)}function Q(i){return i.target||i.srcElement}function gI(hp){var i=hp.which;if(i==null){if(hp.button&1){i=1}else{if(hp.button&2){i=3}else{if(hp.button&4){i=2}}}}if(cu&&hp.ctrlKey&&i==1){i=3}return i}var fw=function(){if(eh&&m<9){return false}var i=g4("div");return"draggable" in i||"dragDrop" in i}();var gG;function bF(i){if(gG==null){var hq=g4("span","\u200b");ce(i,g4("span",[hq,document.createTextNode("x")]));if(i.firstChild.offsetHeight!=0){gG=hq.offsetWidth<=1&&hq.offsetHeight>2&&!(eh&&m<8)}}var hp=gG?g4("span","\u200b"):g4("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");hp.setAttribute("cm-text","");return hp}var gH;function b9(hr){if(gH!=null){return gH}var i=ce(hr,document.createTextNode("A\u062eA"));var hq=cN(i,0,1).getBoundingClientRect();var hp=cN(i,1,2).getBoundingClientRect();eC(hr);if(!hq||hq.left==hq.right){return false}return gH=(hp.right-hq.right<3)}var gN="\n\nb".split(/\n/).length!=3?function(ht){var hu=0,i=[],hs=ht.length;while(hu<=hs){var hr=ht.indexOf("\n",hu);if(hr==-1){hr=ht.length}var hq=ht.slice(hu,ht.charAt(hr-1)=="\r"?hr-1:hr);var hp=hq.indexOf("\r");if(hp!=-1){i.push(hq.slice(0,hp));hu+=hp+1}else{i.push(hq);hu=hr+1}}return i}:function(i){return i.split(/\r\n?|\n/)};var bL=window.getSelection?function(hp){try{return hp.selectionStart!=hp.selectionEnd}catch(i){return false}}:function(hq){var i;try{i=hq.ownerDocument.selection.createRange()}catch(hp){}if(!i||i.parentElement()!=hq){return false}return i.compareEndPoints("StartToEnd",i)!=0};var dH=(function(){var i=g4("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var fV=null;function aW(hp){if(fV!=null){return fV}var hq=ce(hp,g4("span","x"));var hr=hq.getBoundingClientRect();var i=cN(hq,0,1).getBoundingClientRect();return fV=Math.abs(hr.left-i.left)>1}var d0={};var a5={};function e9(i,hp){if(arguments.length>2){hp.dependencies=Array.prototype.slice.call(arguments,2)}d0[i]=hp}function bE(hp,i){a5[hp]=i}function hg(i){if(typeof i=="string"&&a5.hasOwnProperty(i)){i=a5[i]}else{if(i&&typeof i.name=="string"&&a5.hasOwnProperty(i.name)){var hp=a5[i.name];if(typeof hp=="string"){hp={name:hp}}i=cL(hp,i);i.name=hp.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i)){return hg("application/xml")}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i)){return hg("application/json")}}}}if(typeof i=="string"){return{name:i}}else{return i||{name:"null"}}}function gq(hq,hp){hp=hg(hp);var hs=d0[hp.name];if(!hs){return gq(hq,"text/plain")}var ht=hs(hq,hp);if(dX.hasOwnProperty(hp.name)){var hr=dX[hp.name];for(var hu in hr){if(!hr.hasOwnProperty(hu)){continue}if(ht.hasOwnProperty(hu)){ht["_"+hu]=ht[hu]}ht[hu]=hr[hu]}}ht.name=hp.name;if(hp.helperType){ht.helperType=hp.helperType}if(hp.modeProps){for(var i in hp.modeProps){ht[i]=hp.modeProps[i]}}return ht}var dX={};function fm(hq,hp){var i=dX.hasOwnProperty(hq)?dX[hq]:(dX[hq]={});aZ(hp,i)}function cq(hr,i){if(i===true){return i}if(hr.copyState){return hr.copyState(i)}var hq={};for(var hs in i){var hp=i[hs];if(hp instanceof Array){hp=hp.concat([])}hq[hs]=hp}return hq}function hc(hq,i){var hp;while(hq.innerMode){hp=hq.innerMode(i);if(!hp||hp.mode==hq){break}i=hp.state;hq=hp.mode}return hp||{mode:hq,state:i}}function cn(hq,hp,i){return hq.startState?hq.startState(hp,i):true}var fG=function(i,hq,hp){this.pos=this.start=0;this.string=i;this.tabSize=hq||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=hp};fG.prototype.eol=function(){return this.pos>=this.string.length};fG.prototype.sol=function(){return this.pos==this.lineStart};fG.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};fG.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};fG.prototype.eat=function(i){var hq=this.string.charAt(this.pos);var hp;if(typeof i=="string"){hp=hq==i}else{hp=hq&&(i.test?i.test(hq):i(hq))}if(hp){++this.pos;return hq}};fG.prototype.eatWhile=function(i){var hp=this.pos;while(this.eat(i)){}return this.pos>hp};fG.prototype.eatSpace=function(){var hp=this;var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++hp.pos}return this.pos>i};fG.prototype.skipToEnd=function(){this.pos=this.string.length};fG.prototype.skipTo=function(i){var hp=this.string.indexOf(i,this.pos);if(hp>-1){this.pos=hp;return true}};fG.prototype.backUp=function(i){this.pos-=i};fG.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=cd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?cd(this.string,this.lineStart,this.tabSize):0)};fG.prototype.indentation=function(){return cd(this.string,null,this.tabSize)-(this.lineStart?cd(this.string,this.lineStart,this.tabSize):0)};fG.prototype.match=function(hs,hp,i){if(typeof hs=="string"){var ht=function(hu){return i?hu.toLowerCase():hu};var hr=this.string.substr(this.pos,hs.length);if(ht(hr)==ht(hs)){if(hp!==false){this.pos+=hs.length}return true}}else{var hq=this.string.slice(this.pos).match(hs);if(hq&&hq.index>0){return null}if(hq&&hp!==false){this.pos+=hq[0].length}return hq}};fG.prototype.current=function(){return this.string.slice(this.start,this.pos)};fG.prototype.hideFirstChars=function(hp,i){this.lineStart+=hp;try{return i()}finally{this.lineStart-=hp}};fG.prototype.lookAhead=function(hp){var i=this.lineOracle;return i&&i.lookAhead(hp)};fG.prototype.baseToken=function(){var i=this.lineOracle;return i&&i.baseToken(this.pos)};var aQ=function(hp,i){this.state=hp;this.lookAhead=i};var ag=function(hr,hq,i,hp){this.state=hq;this.doc=hr;this.line=i;this.maxLookAhead=hp||0;this.baseTokens=null;this.baseTokenPos=1};ag.prototype.lookAhead=function(hp){var i=this.doc.getLine(this.line+hp);if(i!=null&&hp>this.maxLookAhead){this.maxLookAhead=hp}return i};ag.prototype.baseToken=function(hq){var hp=this;if(!this.baseTokens){return null}while(this.baseTokens[this.baseTokenPos]<=hq){hp.baseTokenPos+=2}var i=this.baseTokens[this.baseTokenPos+1];return{type:i&&i.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-hq}};ag.prototype.nextLine=function(){this.line++;if(this.maxLookAhead>0){this.maxLookAhead--}};ag.fromSaved=function(hq,hp,i){if(hp instanceof aQ){return new ag(hq,cq(hq.mode,hp.state),i,hp.lookAhead)}else{return new ag(hq,cq(hq.mode,hp),i)}};ag.prototype.save=function(hp){var i=hp!==false?cq(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new aQ(i,this.maxLookAhead):i};function go(hu,hw,hp,hs){var hv=[hu.state.modeGen],hr={};x(hu,hw.text,hu.doc.mode,hp,function(hx,hy){return hv.push(hx,hy)},hr,hs);var i=hp.state;var ht=function(hA){hp.baseTokens=hv;var hy=hu.state.overlays[hA],hz=1,hx=0;hp.state=true;x(hu,hw.text,hy.mode,hp,function(hB,hD){var hF=hz;while(hx<hB){var hC=hv[hz];if(hC>hB){hv.splice(hz,1,hB,hv[hz+1],hC)}hz+=2;hx=Math.min(hB,hC)}if(!hD){return}if(hy.opaque){hv.splice(hF,hz-hF,hB,"overlay "+hD);hz=hF+2}else{for(;hF<hz;hF+=2){var hE=hv[hF+1];hv[hF+1]=(hE?hE+" ":"")+"overlay "+hD}}},hr);hp.state=i;hp.baseTokens=null;hp.baseTokenPos=1};for(var hq=0;hq<hu.state.overlays.length;++hq){ht(hq)}return{styles:hv,classes:hr.bgClass||hr.textClass?hr:null}}function dD(hp,hr,ht){if(!hr.styles||hr.styles[0]!=hp.state.modeGen){var hs=fK(hp,b8(hr));var hq=hr.text.length>hp.options.maxHighlightLength&&cq(hp.doc.mode,hs.state);var i=go(hp,hr,hs);if(hq){hs.state=hq}hr.stateAfter=hs.save(!hq);hr.styles=i.styles;if(i.classes){hr.styleClasses=i.classes}else{if(hr.styleClasses){hr.styleClasses=null}}if(ht===hp.doc.highlightFrontier){hp.doc.modeFrontier=Math.max(hp.doc.modeFrontier,++hp.doc.highlightFrontier)}}return hr.styles}function fK(i,hv,hp){var ht=i.doc,hs=i.display;if(!ht.mode.startState){return new ag(ht,true,hv)}var hu=c0(i,hv,hp);var hr=hu>ht.first&&f3(ht,hu-1).stateAfter;var hq=hr?ag.fromSaved(ht,hr,hu):new ag(ht,cn(ht.mode),hu);ht.iter(hu,hv,function(hw){d5(i,hw.text,hq);var hx=hq.line;hw.stateAfter=hx==hv-1||hx%5==0||hx>=hs.viewFrom&&hx<hs.viewTo?hq.save():null;hq.nextLine()});if(hp){ht.modeFrontier=hq.line}return hq}function d5(i,ht,hq,hp){var hs=i.doc.mode;var hr=new fG(ht,i.options.tabSize,hq);hr.start=hr.pos=hp||0;if(ht==""){gd(hs,hq.state)}while(!hr.eol()){fk(hs,hr,hq.state);hr.start=hr.pos}}function gd(hq,hp){if(hq.blankLine){return hq.blankLine(hp)}if(!hq.innerMode){return}var i=hc(hq,hp);if(i.mode.blankLine){return i.mode.blankLine(i.state)}}function fk(hu,ht,hs,hp){for(var hq=0;hq<10;hq++){if(hp){hp[0]=hc(hu,hs).mode}var hr=hu.token(ht,hs);if(ht.pos>ht.start){return hr}}throw new Error("Mode "+hu.name+" failed to advance stream.")}var dG=function(hq,i,hp){this.start=hq.start;this.end=hq.pos;this.string=hq.current();this.type=i||null;this.state=hp};function cS(hw,hu,hr,hq){var hv=hw.doc,hs=hv.mode,i;hu=gC(hv,hu);var hy=f3(hv,hu.line),hp=fK(hw,hu.line,hr);var hx=new fG(hy.text,hw.options.tabSize,hp),ht;if(hq){ht=[]}while((hq||hx.pos<hu.ch)&&!hx.eol()){hx.start=hx.pos;i=fk(hs,hx,hp.state);if(hq){ht.push(new dG(hx,i,cq(hv.mode,hp.state)))}}return hq?ht:new dG(hx,i,hp.state)}function dR(hq,hp){if(hq){for(;;){var i=hq.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break}hq=hq.slice(0,i.index)+hq.slice(i.index+i[0].length);var hr=i[1]?"bgClass":"textClass";if(hp[hr]==null){hp[hr]=i[2]}else{if(!(new RegExp("(?:^|s)"+i[2]+"(?:$|s)")).test(hp[hr])){hp[hr]+=" "+i[2]}}}}return hq}function x(hy,hA,ht,hq,hu,hr,hs){var hp=ht.flattenSpans;if(hp==null){hp=hy.options.flattenSpans}var hw=0,hv=null;var hz=new fG(hA,hy.options.tabSize,hq),i;var hC=hy.options.addModeClass&&[null];if(hA==""){dR(gd(ht,hq.state),hr)}while(!hz.eol()){if(hz.pos>hy.options.maxHighlightLength){hp=false;if(hs){d5(hy,hA,hq,hz.pos)}hz.pos=hA.length;i=null}else{i=dR(fk(ht,hz,hq.state,hC),hr)}if(hC){var hB=hC[0].name;if(hB){i="m-"+(i?hB+" "+i:hB)}}if(!hp||hv!=i){while(hw<hz.start){hw=Math.min(hz.start,hw+5000);hu(hw,hv)}hv=i}hz.start=hz.pos}while(hw<hz.pos){var hx=Math.min(hz.pos,hw+5000);hu(hx,hv);hw=hx}}function c0(hv,hp,hs){var hq,ht,hu=hv.doc;var hr=hs?-1:hp-(hv.doc.mode.innerMode?1000:100);for(var hy=hp;hy>hr;--hy){if(hy<=hu.first){return hu.first}var hx=f3(hu,hy-1),i=hx.stateAfter;if(i&&(!hs||hy+(i instanceof aQ?i.lookAhead:0)<=hu.modeFrontier)){return hy}var hw=cd(hx.text,null,hv.options.tabSize);if(ht==null||hq>hw){ht=hy-1;hq=hw}}return ht}function hi(hq,hs){hq.modeFrontier=Math.min(hq.modeFrontier,hs);if(hq.highlightFrontier<hs-10){return}var hr=hq.first;for(var i=hs-1;i>hr;i--){var hp=f3(hq,i).stateAfter;if(hp&&(!(hp instanceof aQ)||i+hp.lookAhead<hs)){hr=i+1;break}}hq.highlightFrontier=Math.min(hq.highlightFrontier,hr)}var g9=function(hq,hp,i){this.text=hq;dx(this,hp);this.height=i?i(this):1};g9.prototype.lineNo=function(){return b8(this)};bT(g9);function e1(hp,hs,hq,i){hp.text=hs;if(hp.stateAfter){hp.stateAfter=null}if(hp.styles){hp.styles=null}if(hp.order!=null){hp.order=null}hd(hp);dx(hp,hq);var hr=i?i(hp):1;if(hr!=hp.height){ha(hp,hr)}}function bV(i){i.parent=null;hd(i)}var ev={};var cp={};function fJ(hq,hp){if(!hq||/^\s*$/.test(hq)){return null}var i=hp.addModeClass?cp:ev;return i[hq]||(i[hq]=hq.replace(/\S+/g,"cm-$&"))}function fE(hv,hu){var ht=hb("span",null,null,du?"padding-right: .1px":null);var hs={pre:hb("pre",[ht],"CodeMirror-line"),content:ht,col:0,pos:0,cm:hv,trailingSpace:false,splitSpaces:(eh||du)&&hv.getOption("lineWrapping")};hu.measure={};for(var hr=0;hr<=(hu.rest?hu.rest.length:0);hr++){var hx=hr?hu.rest[hr-1]:hu.line,hq=(void 0);hs.pos=0;hs.addToken=u;if(b9(hv.display.measure)&&(hq=a(hx,hv.doc.direction))){hs.addToken=aa(hs.addToken,hq)}hs.map=[];var hp=hu!=hv.display.externalMeasured&&b8(hx);bG(hx,hs,dD(hv,hx,hp));if(hx.styleClasses){if(hx.styleClasses.bgClass){hs.bgClass=gR(hx.styleClasses.bgClass,hs.bgClass||"")}if(hx.styleClasses.textClass){hs.textClass=gR(hx.styleClasses.textClass,hs.textClass||"")}}if(hs.map.length==0){hs.map.push(0,0,hs.content.appendChild(bF(hv.display.measure)))}if(hr==0){hu.measure.map=hs.map;hu.measure.cache={}}else{(hu.measure.maps||(hu.measure.maps=[])).push(hs.map);(hu.measure.caches||(hu.measure.caches=[])).push({})}}if(du){var hw=hs.content.lastChild;if(/\bcm-tab\b/.test(hw.className)||(hw.querySelector&&hw.querySelector(".cm-tab"))){hs.content.className="cm-tab-wrap-hack"}}aO(hv,"renderLine",hv,hu.line,hs.pre);if(hs.pre.className){hs.textClass=gR(hs.pre.className,hs.textClass||"")}return hs}function f2(hp){var i=g4("span","\u2022","cm-invalidchar");i.title="\\u"+hp.charCodeAt(0).toString(16);i.setAttribute("aria-label",i.title);return i}function u(hz,hu,hE,hB,hx,hH,ht){if(!hu){return}var hD=hz.splitSpaces?c7(hu,hz.trailingSpace):hu;var i=hz.cm.state.specialChars,hp=false;var hC;if(!i.test(hu)){hz.col+=hu.length;hC=document.createTextNode(hD);hz.map.push(hz.pos,hz.pos+hu.length,hC);if(eh&&m<9){hp=true}hz.pos+=hu.length}else{hC=document.createDocumentFragment();var hr=0;while(true){i.lastIndex=hr;var hA=i.exec(hu);var hG=hA?hA.index-hr:hu.length-hr;if(hG){var hw=document.createTextNode(hD.slice(hr,hr+hG));if(eh&&m<9){hC.appendChild(g4("span",[hw]))}else{hC.appendChild(hw)}hz.map.push(hz.pos,hz.pos+hG,hw);hz.col+=hG;hz.pos+=hG}if(!hA){break}hr+=hG+1;var hF=(void 0);if(hA[0]=="\t"){var hy=hz.cm.options.tabSize,hv=hy-hz.col%hy;hF=hC.appendChild(g4("span",cR(hv),"cm-tab"));hF.setAttribute("role","presentation");hF.setAttribute("cm-text","\t");hz.col+=hv}else{if(hA[0]=="\r"||hA[0]=="\n"){hF=hC.appendChild(g4("span",hA[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));hF.setAttribute("cm-text",hA[0]);hz.col+=1}else{hF=hz.cm.options.specialCharPlaceholder(hA[0]);hF.setAttribute("cm-text",hA[0]);if(eh&&m<9){hC.appendChild(g4("span",[hF]))}else{hC.appendChild(hF)}hz.col+=1}}hz.map.push(hz.pos,hz.pos+1,hF);hz.pos++}}hz.trailingSpace=hD.charCodeAt(hu.length-1)==32;if(hE||hB||hx||hp||ht){var hq=hE||"";if(hB){hq+=hB}if(hx){hq+=hx}var hs=g4("span",[hC],hq,ht);if(hH){hs.title=hH}return hz.content.appendChild(hs)}hz.content.appendChild(hC)}function c7(hu,ht){if(hu.length>1&&!/  /.test(hu)){return hu}var hq=ht,hp="";for(var hr=0;hr<hu.length;hr++){var hs=hu.charAt(hr);if(hs==" "&&hq&&(hr==hu.length-1||hu.charCodeAt(hr+1)==32)){hs="\u00a0"}hp+=hs;hq=hs==" "}return hp}function aa(hp,i){return function(hx,hz,hq,hu,hA,hy,hw){hq=hq?hq+" cm-force-border":"cm-force-border";var hr=hx.pos,ht=hr+hz.length;for(;;){var hs=(void 0);for(var hv=0;hv<i.length;hv++){hs=i[hv];if(hs.to>hr&&hs.from<=hr){break}}if(hs.to>=ht){return hp(hx,hz,hq,hu,hA,hy,hw)}hp(hx,hz.slice(0,hs.to-hr),hq,hu,null,hy,hw);hu=null;hz=hz.slice(hs.to-hr);hr=hs.to}}}function al(hp,hr,i,hq){var hs=!hq&&i.widgetNode;if(hs){hp.map.push(hp.pos,hp.pos+hr,hs)}if(!hq&&hp.cm.display.input.needsContentAttribute){if(!hs){hs=hp.content.appendChild(document.createElement("span"))}hs.setAttribute("cm-marker",i.id)}if(hs){hp.cm.display.input.setUneditable(hs);hp.content.appendChild(hs)}hp.pos+=hr;hp.trailingSpace=false}function bG(hA,hH,hz){var hu=hA.markedSpans,hx=hA.text,hF=0;if(!hu){for(var hv=1;hv<hz.length;hv+=2){hH.addToken(hH,hx.slice(hF,hF=hz[hv]),fJ(hz[hv+1],hH.cm.options))}return}var hL=hx.length,ht=0,hK=1,hD="",hM,hB;var hQ=0,hp,hP,hE,hR,hr;for(;;){if(hQ==ht){hp=hP=hE=hR=hB="";hr=null;hQ=Infinity;var hw=[],hy=(void 0);for(var hI=0;hI<hu.length;++hI){var hJ=hu[hI],hG=hJ.marker;if(hG.type=="bookmark"&&hJ.from==ht&&hG.widgetNode){hw.push(hG)}else{if(hJ.from<=ht&&(hJ.to==null||hJ.to>ht||hG.collapsed&&hJ.to==ht&&hJ.from==ht)){if(hJ.to!=null&&hJ.to!=ht&&hQ>hJ.to){hQ=hJ.to;hP=""}if(hG.className){hp+=" "+hG.className}if(hG.css){hB=(hB?hB+";":"")+hG.css}if(hG.startStyle&&hJ.from==ht){hE+=" "+hG.startStyle}if(hG.endStyle&&hJ.to==hQ){(hy||(hy=[])).push(hG.endStyle,hJ.to)}if(hG.title&&!hR){hR=hG.title}if(hG.collapsed&&(!hr||ep(hr.marker,hG)<0)){hr=hJ}}else{if(hJ.from>ht&&hQ>hJ.from){hQ=hJ.from}}}}if(hy){for(var hO=0;hO<hy.length;hO+=2){if(hy[hO+1]==hQ){hP+=" "+hy[hO]}}}if(!hr||hr.from==ht){for(var hN=0;hN<hw.length;++hN){al(hH,0,hw[hN])}}if(hr&&(hr.from||0)==ht){al(hH,(hr.to==null?hL+1:hr.to)-ht,hr.marker,hr.from==null);if(hr.to==null){return}if(hr.to==ht){hr=false}}}if(ht>=hL){break}var hC=Math.min(hL,hQ);while(true){if(hD){var hq=ht+hD.length;if(!hr){var hs=hq>hC?hD.slice(0,hC-ht):hD;hH.addToken(hH,hs,hM?hM+hp:hp,hE,ht+hs.length==hQ?hP:"",hR,hB)}if(hq>=hC){hD=hD.slice(hC-ht);ht=hC;break}ht=hq;hE=""}hD=hx.slice(hF,hF=hz[hK++]);hM=fJ(hz[hK++],hH.cm.options)}}}function bO(hq,i,hp){this.line=i;this.rest=g(i);this.size=this.rest?b8(gx(this.rest))-hp+1:1;this.node=this.text=null;this.hidden=gk(hq,i)}function fI(i,hu,ht){var hs=[],hq;for(var hr=hu;hr<ht;hr=hq){var hp=new bO(i.doc,f3(i.doc,hr),hr);hq=hr+hp.size;hs.push(hp)}return hs}var bI=null;function ff(i){if(bI){bI.ops.push(i)}else{i.ownsGroup=bI={ops:[i],delayedCallbacks:[]}}}function dn(hs){var hr=hs.delayedCallbacks,hq=0;do{for(;hq<hr.length;hq++){hr[hq].call(null)}for(var hp=0;hp<hs.ops.length;hp++){var ht=hs.ops[hp];if(ht.cursorActivityHandlers){while(ht.cursorActivityCalled<ht.cursorActivityHandlers.length){ht.cursorActivityHandlers[ht.cursorActivityCalled++].call(null,ht.cm)}}}}while(hq<hr.length)}function ck(hq,hp){var i=hq.ownsGroup;if(!i){return}try{dn(i)}finally{bI=null;hp(i)}}var bS=null;function am(hv,ht){var hp=eY(hv,ht);if(!hp.length){return}var hr=Array.prototype.slice.call(arguments,2),hu;if(bI){hu=bI.delayedCallbacks}else{if(bS){hu=bS}else{hu=bS=[];setTimeout(aX,0)}}var hq=function(hw){hu.push(function(){return hp[hw].apply(null,hr)})};for(var hs=0;hs<hp.length;++hs){hq(hs)}}function aX(){var hp=bS;bS=null;for(var hq=0;hq<hp.length;++hq){hp[hq]()}}function aj(i,hq,hs,ht){for(var hp=0;hp<hq.changes.length;hp++){var hr=hq.changes[hp];if(hr=="text"){f9(i,hq)}else{if(hr=="gutter"){dN(i,hq,hs,ht)}else{if(hr=="class"){ec(i,hq)}else{if(hr=="widget"){ax(i,hq,ht)}}}}}hq.changes=null}function gz(i){if(i.node==i.text){i.node=g4("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(eh&&m<8){i.node.style.zIndex=2}}return i.node}function fb(i,hq){var hp=hq.bgClass?hq.bgClass+" "+(hq.line.bgClass||""):hq.line.bgClass;if(hp){hp+=" CodeMirror-linebackground"}if(hq.background){if(hp){hq.background.className=hp}else{hq.background.parentNode.removeChild(hq.background);hq.background=null}}else{if(hp){var hr=gz(hq);hq.background=hr.insertBefore(g4("div",null,hp),hr.firstChild);i.display.input.setUneditable(hq.background)}}}function eu(i,hp){var hq=i.display.externalMeasured;if(hq&&hq.line==hp.line){i.display.externalMeasured=null;hp.measure=hq.measure;return hq.built}return fE(i,hp)}function f9(i,hr){var hp=hr.text.className;var hq=eu(i,hr);if(hr.text==hr.node){hr.node=hq.pre}hr.text.parentNode.replaceChild(hq.pre,hr.text);hr.text=hq.pre;if(hq.bgClass!=hr.bgClass||hq.textClass!=hr.textClass){hr.bgClass=hq.bgClass;hr.textClass=hq.textClass;ec(i,hr)}else{if(hp){hr.text.className=hp}}}function ec(hp,hq){fb(hp,hq);if(hq.line.wrapClass){gz(hq).className=hq.line.wrapClass}else{if(hq.node!=hq.text){hq.node.className=""}}var i=hq.textClass?hq.textClass+" "+(hq.line.textClass||""):hq.line.textClass;hq.text.className=i||""}function dN(hw,hu,ht,hv){if(hu.gutter){hu.node.removeChild(hu.gutter);hu.gutter=null}if(hu.gutterBackground){hu.node.removeChild(hu.gutterBackground);hu.gutterBackground=null}if(hu.line.gutterClass){var hp=gz(hu);hu.gutterBackground=g4("div",null,"CodeMirror-gutter-background "+hu.line.gutterClass,("left: "+(hw.options.fixedGutter?hv.fixedPos:-hv.gutterTotalWidth)+"px; width: "+(hv.gutterTotalWidth)+"px"));hw.display.input.setUneditable(hu.gutterBackground);hp.insertBefore(hu.gutterBackground,hu.text)}var hr=hu.line.gutterMarkers;if(hw.options.lineNumbers||hr){var hx=gz(hu);var hs=hu.gutter=g4("div",null,"CodeMirror-gutter-wrapper",("left: "+(hw.options.fixedGutter?hv.fixedPos:-hv.gutterTotalWidth)+"px"));hw.display.input.setUneditable(hs);hx.insertBefore(hs,hu.text);if(hu.line.gutterClass){hs.className+=" "+hu.line.gutterClass}if(hw.options.lineNumbers&&(!hr||!hr["CodeMirror-linenumbers"])){hu.lineNumber=hs.appendChild(g4("div",e7(hw.options,ht),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(hv.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(hw.display.lineNumInnerWidth)+"px")))}if(hr){for(var hq=0;hq<hw.options.gutters.length;++hq){var i=hw.options.gutters[hq],hy=hr.hasOwnProperty(i)&&hr[i];if(hy){hs.appendChild(g4("div",[hy],"CodeMirror-gutter-elt",("left: "+(hv.gutterLeft[i])+"px; width: "+(hv.gutterWidth[i])+"px")))}}}}}function ax(i,hp,hs){if(hp.alignable){hp.alignable=null}for(var hr=hp.node.firstChild,hq=(void 0);hr;hr=hq){hq=hr.nextSibling;if(hr.className=="CodeMirror-linewidget"){hp.node.removeChild(hr)}}gg(i,hp,hs)}function aP(i,hq,hr,hs){var hp=eu(i,hq);hq.text=hq.node=hp.pre;if(hp.bgClass){hq.bgClass=hp.bgClass}if(hp.textClass){hq.textClass=hp.textClass}ec(i,hq);dN(i,hq,hr,hs);gg(i,hq,hs);return hq.node}function gg(hp,hr,hs){g8(hp,hr.line,hr,hs,true);if(hr.rest){for(var hq=0;hq<hr.rest.length;hq++){g8(hp,hr.rest[hq],hr,hs,false)}}}function g8(hx,hy,hu,hw,hs){if(!hy.widgets){return}var hp=gz(hu);for(var hr=0,hv=hy.widgets;hr<hv.length;++hr){var ht=hv[hr],hq=g4("div",[ht.node],"CodeMirror-linewidget");if(!ht.handleMouseEvents){hq.setAttribute("cm-ignore-events","true")}bZ(ht,hq,hu,hw);hx.display.input.setUneditable(hq);if(hs&&ht.above){hp.insertBefore(hq,hu.gutter||hu.text)}else{hp.appendChild(hq)}am(ht,"redraw")}}function bZ(hr,hq,i,hs){if(hr.noHScroll){(i.alignable||(i.alignable=[])).push(hq);var hp=hs.wrapperWidth;hq.style.left=hs.fixedPos+"px";if(!hr.coverGutter){hp-=hs.gutterTotalWidth;hq.style.paddingLeft=hs.gutterTotalWidth+"px"}hq.style.width=hp+"px"}if(hr.coverGutter){hq.style.zIndex=5;hq.style.position="relative";if(!hr.noHScroll){hq.style.marginLeft=-hs.gutterTotalWidth+"px"}}}function ds(hq){if(hq.height!=null){return hq.height}var i=hq.doc.cm;if(!i){return 0}if(!hf(document.body,hq.node)){var hp="position: relative;";if(hq.coverGutter){hp+="margin-left: -"+i.display.gutters.offsetWidth+"px;"}if(hq.noHScroll){hp+="width: "+i.display.wrapper.clientWidth+"px;"}ce(i.display.measure,g4("div",[hq.node],null,hp))}return hq.height=hq.node.parentNode.offsetHeight}function bo(hp,i){for(var hq=Q(i);hq!=hp.wrapper;hq=hq.parentNode){if(!hq||(hq.nodeType==1&&hq.getAttribute("cm-ignore-events")=="true")||(hq.parentNode==hp.sizer&&hq!=hp.mover)){return true}}}function fX(i){return i.lineSpace.offsetTop}function b2(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function fT(hr){if(hr.cachedPaddingH){return hr.cachedPaddingH}var hq=ce(hr.measure,g4("pre","x"));var i=window.getComputedStyle?window.getComputedStyle(hq):hq.currentStyle;var hp={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};if(!isNaN(hp.left)&&!isNaN(hp.right)){hr.cachedPaddingH=hp}return hp}function dm(i){return ef-i.display.nativeBarWidth}function dT(i){return i.display.scroller.clientWidth-dm(i)-i.display.barWidth}function dp(i){return i.display.scroller.clientHeight-dm(i)-i.display.barHeight}function cG(hw,hs,hv){var hr=hw.options.lineWrapping;var ht=hr&&dT(hw);if(!hs.measure.heights||hr&&hs.measure.width!=ht){var hu=hs.measure.heights=[];if(hr){hs.measure.width=ht;var hy=hs.text.firstChild.getClientRects();for(var hp=0;hp<hy.length-1;hp++){var hx=hy[hp],hq=hy[hp+1];if(Math.abs(hx.bottom-hq.bottom)>2){hu.push((hx.bottom+hq.top)/2-hv.top)}}}hu.push(hv.bottom-hv.top)}}function cV(hr,hp,hs){if(hr.line==hp){return{map:hr.measure.map,cache:hr.measure.cache}}for(var hq=0;hq<hr.rest.length;hq++){if(hr.rest[hq]==hp){return{map:hr.measure.maps[hq],cache:hr.measure.caches[hq]}}}for(var ht=0;ht<hr.rest.length;ht++){if(b8(hr.rest[ht])>hs){return{map:hr.measure.maps[ht],cache:hr.measure.caches[ht],before:true}}}}function dw(i,hq){hq=z(hq);var hs=b8(hq);var hp=i.display.externalMeasured=new bO(i.doc,hq,hs);hp.lineN=hs;var hr=hp.built=fE(i,hp);hp.text=hr.pre;ce(i.display.lineMeasure,hr.pre);return hp}function eT(i,hp,hr,hq){return F(i,bi(i,hp),hr,hq)}function f0(i,hq){if(hq>=i.display.viewFrom&&hq<i.display.viewTo){return i.display.view[dZ(i,hq)]}var hp=i.display.externalMeasured;if(hp&&hq>=hp.lineN&&hq<hp.lineN+hp.size){return hp}}function bi(i,hq){var hr=b8(hq);var hp=f0(i,hr);if(hp&&!hp.text){hp=null}else{if(hp&&hp.changes){aj(i,hp,hr,f1(i));i.curOp.forceUpdate=true}}if(!hp){hp=dw(i,hq)}var hs=cV(hp,hq,hr);return{line:hq,view:hp,rect:null,map:hs.map,cache:hs.cache,before:hs.before,hasHeights:false}}function F(i,hu,hs,hp,hr){if(hu.before){hs=-1}var hq=hs+(hp||""),ht;if(hu.cache.hasOwnProperty(hq)){ht=hu.cache[hq]}else{if(!hu.rect){hu.rect=hu.view.text.getBoundingClientRect()}if(!hu.hasHeights){cG(i,hu.view,hu.rect);hu.hasHeights=true}ht=l(i,hu,hs,hp);if(!ht.bogus){hu.cache[hq]=ht}}return{left:ht.left,right:ht.right,top:hr?ht.rtop:ht.top,bottom:hr?ht.rbottom:ht.bottom}}var fj={left:0,right:0,top:0,bottom:0};function aV(hq,hp,hw){var hs,hr,hu,hx,ht,hy;for(var hv=0;hv<hq.length;hv+=3){ht=hq[hv];hy=hq[hv+1];if(hp<ht){hr=0;hu=1;hx="left"}else{if(hp<hy){hr=hp-ht;hu=hr+1}else{if(hv==hq.length-3||hp==hy&&hq[hv+3]>hp){hu=hy-ht;hr=hu-1;if(hp>=hy){hx="right"}}}}if(hr!=null){hs=hq[hv+2];if(ht==hy&&hw==(hs.insertLeft?"left":"right")){hx=hw}if(hw=="left"&&hr==0){while(hv&&hq[hv-2]==hq[hv-3]&&hq[hv-1].insertLeft){hs=hq[(hv-=3)+2];hx="left"}}if(hw=="right"&&hr==hy-ht){while(hv<hq.length-3&&hq[hv+3]==hq[hv+4]&&!hq[hv+5].insertLeft){hs=hq[(hv+=3)+2];hx="right"}}break}}return{node:hs,start:hr,end:hu,collapse:hx,coverStart:ht,coverEnd:hy}}function fF(hq,hp){var hs=fj;if(hp=="left"){for(var hr=0;hr<hq.length;hr++){if((hs=hq[hr]).left!=hs.right){break}}}else{for(var ht=hq.length-1;ht>=0;ht--){if((hs=hq[ht]).left!=hs.right){break}}}return hs}function l(hx,hH,hA,hu){var hy=aV(hH.map,hA,hu);var hF=hy.node,ht=hy.start,hs=hy.end,hp=hy.collapse;var hq;if(hF.nodeType==3){for(var hv=0;hv<4;hv++){while(ht&&gc(hH.line.text.charAt(hy.coverStart+ht))){--ht}while(hy.coverStart+hs<hy.coverEnd&&gc(hH.line.text.charAt(hy.coverStart+hs))){++hs}if(eh&&m<9&&ht==0&&hs==hy.coverEnd-hy.coverStart){hq=hF.parentNode.getBoundingClientRect()}else{hq=fF(cN(hF,ht,hs).getClientRects(),hu)}if(hq.left||hq.right||ht==0){break}hs=ht;ht=ht-1;hp="right"}if(eh&&m<11){hq=fz(hx.display.measure,hq)}}else{if(ht>0){hp=hu="right"}var hr;if(hx.options.lineWrapping&&(hr=hF.getClientRects()).length>1){hq=hr[hu=="right"?hr.length-1:0]}else{hq=hF.getBoundingClientRect()}}if(eh&&m<9&&!ht&&(!hq||!hq.left&&!hq.right)){var hw=hF.parentNode.getClientRects()[0];if(hw){hq={left:hw.left,right:hw.left+d9(hx.display),top:hw.top,bottom:hw.bottom}}else{hq=fj}}var hD=hq.top-hH.rect.top,hB=hq.bottom-hH.rect.top;var hJ=(hD+hB)/2;var hI=hH.view.measure.heights;var hG=0;for(;hG<hI.length-1;hG++){if(hJ<hI[hG]){break}}var hE=hG?hI[hG-1]:0,hC=hI[hG];var hz={left:(hp=="right"?hq.right:hq.left)-hH.rect.left,right:(hp=="left"?hq.left:hq.right)-hH.rect.left,top:hE,bottom:hC};if(!hq.left&&!hq.right){hz.bogus=true}if(!hx.options.singleCursorHeightPerLine){hz.rtop=hD;hz.rbottom=hB}return hz}function fz(hq,hr){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aW(hq)){return hr}var hp=screen.logicalXDPI/screen.deviceXDPI;var i=screen.logicalYDPI/screen.deviceYDPI;return{left:hr.left*hp,right:hr.right*hp,top:hr.top*i,bottom:hr.bottom*i}}function aE(hq){if(hq.measure){hq.measure.cache={};hq.measure.heights=null;if(hq.rest){for(var hp=0;hp<hq.rest.length;hp++){hq.measure.caches[hp]={}}}}}function a0(hp){hp.display.externalMeasure=null;eC(hp.display.lineMeasure);for(var hq=0;hq<hp.display.view.length;hq++){aE(hp.display.view[hq])}}function ar(i){a0(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function cW(){if(dK&&aY){return -(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))}return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cU(){if(dK&&aY){return -(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))}return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eg(hq){var hp=0;if(hq.widgets){for(var hr=0;hr<hq.widgets.length;++hr){if(hq.widgets[hr].above){hp+=ds(hq.widgets[hr])}}}return hp}function fC(hu,hr,ht,hp,hq){if(!hq){var hv=eg(hr);ht.top+=hv;ht.bottom+=hv}if(hp=="line"){return ht}if(!hp){hp="local"}var hs=b7(hr);if(hp=="local"){hs+=fX(hu.display)}else{hs-=hu.display.viewOffset}if(hp=="page"||hp=="window"){var i=hu.display.lineSpace.getBoundingClientRect();hs+=i.top+(hp=="window"?0:cU());var hw=i.left+(hp=="window"?0:cW());ht.left+=hw;ht.right+=hw}ht.top+=hs;ht.bottom+=hs;return ht}function hk(hp,hs,hq){if(hq=="div"){return hs}var hu=hs.left,ht=hs.top;if(hq=="page"){hu-=cW();ht-=cU()}else{if(hq=="local"||!hq){var hr=hp.display.sizer.getBoundingClientRect();hu+=hr.left;ht+=hr.top}}var i=hp.display.lineSpace.getBoundingClientRect();return{left:hu-i.left,top:ht-i.top}}function dd(i,hs,hr,hq,hp){if(!hq){hq=f3(i.doc,hs.line)}return fC(i,hq,eT(i,hq,hs.ch,hp),hr)}function et(hz,hx,hq,hu,hB,hv){hu=hu||f3(hz.doc,hx.line);if(!hB){hB=bi(hz,hu)}function hs(hE,hD){var hC=F(hz,hB,hE,hD?"right":"left",hv);if(hD){hC.left=hC.right}else{hC.right=hC.left}return fC(hz,hu,hC,hq)}var ht=a(hu,hz.doc.direction),i=hx.ch,hy=hx.sticky;if(i>=hu.text.length){i=hu.text.length;hy="before"}else{if(i<=0){i=0;hy="after"}}if(!ht){return hs(hy=="before"?i-1:i,hy=="before")}function hA(hF,hC,hG){var hD=ht[hC],hE=hD.level==1;return hs(hG?hF-1:hF,hE!=hG)}var hp=aS(ht,i,hy);var hw=fR;var hr=hA(i,hp,hy=="before");if(hw!=null){hr.other=hA(i,hw,hy!="before")}return hr}function ed(i,hs){var hr=0;hs=gC(i.doc,hs);if(!i.options.lineWrapping){hr=d9(i.display)*hs.ch}var hp=f3(i.doc,hs.line);var hq=b7(hp)+fX(i.display);return{left:hr,right:hr,top:hq,bottom:hq+hp.height}}function g2(i,hp,hr,hq,ht){var hs=ac(i,hp,hr);hs.xRel=ht;if(hq){hs.outside=true}return hs}function gK(hv,hs,hr){var hu=hv.doc;hr+=hv.display.viewOffset;if(hr<0){return g2(hu.first,0,null,true,-1)}var hq=b1(hu,hr),hw=hu.first+hu.size-1;if(hq>hw){return g2(hu.first+hu.size-1,f3(hu,hw).text.length,null,true,1)}if(hs<0){hs=0}var hp=f3(hu,hq);for(;;){var hx=dt(hv,hp,hq,hs,hr);var ht=fc(hp);var i=ht&&ht.find(0,true);if(ht&&(hx.ch>i.from.ch||hx.ch==i.from.ch&&hx.xRel>0)){hq=b8(hp=i.to.line)}else{return hx}}}function bD(i,hq,hs,ht){ht-=eg(hq);var hp=hq.text.length;var hr=cO(function(hu){return F(i,hs,hu-1).bottom<=ht},hp,0);hp=cO(function(hu){return F(i,hs,hu).top>ht},hr,hp);return{begin:hr,end:hp}}function bB(i,hp,hr,hs){if(!hr){hr=bi(i,hp)}var hq=fC(i,hp,F(i,hr,hs),"line").top;return bD(i,hp,hr,hq)}function aA(hp,i,hr,hq){return hp.bottom<=hr?false:hp.top>hr?true:(hq?hp.left:hp.right)>i}function dt(hr,hp,hv,hu,ht){ht-=b7(hp);var hz=bi(hr,hp);var hI=eg(hp);var hG=0,hq=hp.text.length,hD=true;var hB=a(hp,hr.doc.direction);if(hB){var hA=(hr.options.lineWrapping?gZ:gE)(hr,hp,hv,hz,hB,hu,ht);hD=hA.level!=1;hG=hD?hA.from:hA.to-1;hq=hD?hA.to:hA.from-1}var hs=null,hx=null;var hy=cO(function(hJ){var hK=F(hr,hz,hJ);hK.top+=hI;hK.bottom+=hI;if(!aA(hK,hu,ht,false)){return false}if(hK.top<=ht&&hK.left<=hu){hs=hJ;hx=hK}return true},hG,hq);var i,hH,hF=false;if(hx){var hE=hu-hx.left<hx.right-hu,hw=hE==hD;hy=hs+(hw?0:1);hH=hw?"after":"before";i=hE?hx.left:hx.right}else{if(!hD&&(hy==hq||hy==hG)){hy++}hH=hy==0?"after":hy==hp.text.length?"before":(F(hr,hz,hy-(hD?1:0)).bottom+hI<=ht)==hD?"after":"before";var hC=et(hr,ac(hv,hy,hH),"line",hp,hz);i=hC.left;hF=ht<hC.top||ht>=hC.bottom}hy=eW(hp.text,hy,1);return g2(hv,hy,hH,hF,hu-i)}function gE(hx,ht,hs,hy,hr,hw,hv){var hu=cO(function(hB){var hz=hr[hB],hA=hz.level!=1;return aA(et(hx,ac(hs,hA?hz.to:hz.from,hA?"before":"after"),"line",ht,hy),hw,hv,true)},0,hr.length-1);var hq=hr[hu];if(hu>0){var hp=hq.level!=1;var i=et(hx,ac(hs,hp?hq.from:hq.to,hp?"after":"before"),"line",ht,hy);if(aA(i,hw,hv,true)&&i.top>hv){hq=hr[hu-1]}}return hq}function gZ(hC,hx,hA,hF,hu,hB,hz){var ht=bD(hC,hx,hF,hz);var hs=ht.begin;var hv=ht.end;if(/\s/.test(hx.text.charAt(hv-1))){hv--}var hr=null,hD=null;for(var hw=0;hw<hu.length;hw++){var hp=hu[hw];if(hp.from>=hv||hp.to<=hs){continue}var hq=hp.level!=1;var hE=F(hC,hF,hq?Math.min(hv,hp.to)-1:Math.max(hs,hp.from)).right;var hy=hE<hB?hB-hE+1000000000:hE-hB;if(!hr||hD>hy){hr=hp;hD=hy}}if(!hr){hr=hu[hu.length-1]}if(hr.from<hs){hr={from:hs,to:hr.to,level:hr.level}}if(hr.to>hv){hr={from:hr.from,to:hv,level:hr.level}}return hr}var aR;function bb(hr){if(hr.cachedTextHeight!=null){return hr.cachedTextHeight}if(aR==null){aR=g4("pre");for(var hq=0;hq<49;++hq){aR.appendChild(document.createTextNode("x"));aR.appendChild(g4("br"))}aR.appendChild(document.createTextNode("x"))}ce(hr.measure,aR);var hp=aR.offsetHeight/50;if(hp>3){hr.cachedTextHeight=hp}eC(hr.measure);return hp||1}function d9(hs){if(hs.cachedCharWidth!=null){return hs.cachedCharWidth}var i=g4("span","xxxxxxxxxx");var hr=g4("pre",[i]);ce(hs.measure,hr);var hq=i.getBoundingClientRect(),hp=(hq.right-hq.left)/10;if(hp>2){hs.cachedCharWidth=hp}return hp||10}function f1(hp){var hu=hp.display,hs={},hr={};var ht=hu.gutters.clientLeft;for(var hv=hu.gutters.firstChild,hq=0;hv;hv=hv.nextSibling,++hq){hs[hp.options.gutters[hq]]=hv.offsetLeft+hv.clientLeft+ht;hr[hp.options.gutters[hq]]=hv.clientWidth}return{fixedPos:ex(hu),gutterTotalWidth:hu.gutters.offsetWidth,gutterLeft:hs,gutterWidth:hr,wrapperWidth:hu.wrapper.clientWidth}}function ex(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function br(i){var hq=bb(i.display),hp=i.options.lineWrapping;var hr=hp&&Math.max(5,i.display.scroller.clientWidth/d9(i.display)-3);return function(ht){if(gk(i.doc,ht)){return 0}var hs=0;if(ht.widgets){for(var hu=0;hu<ht.widgets.length;hu++){if(ht.widgets[hu].height){hs+=ht.widgets[hu].height}}}if(hp){return hs+(Math.ceil(ht.text.length/hr)||1)*hq}else{return hs+hq}}}function af(i){var hq=i.doc,hp=br(i);hq.iter(function(hr){var hs=hp(hr);if(hs!=hr.height){ha(hr,hs)}})}function cP(hx,hs,hp,hq){var ht=hx.display;if(!hp&&Q(hs).getAttribute("cm-not-content")=="true"){return null}var hw,hu,i=ht.lineSpace.getBoundingClientRect();try{hw=hs.clientX-i.left;hu=hs.clientY-i.top}catch(hs){return null}var hv=gK(hx,hw,hu),hy;if(hq&&hv.xRel==1&&(hy=f3(hx.doc,hv.line).text).length==hv.ch){var hr=cd(hy,hy.length,hx.options.tabSize)-hy.length;hv=ac(hv.line,Math.max(0,Math.round((hw-fT(hx.display).left)/d9(hx.display))-hr))}return hv}function dZ(hp,hs){if(hs>=hp.display.viewTo){return null}hs-=hp.display.viewFrom;if(hs<0){return null}var hq=hp.display.view;for(var hr=0;hr<hq.length;hr++){hs-=hq[hr].size;if(hs<0){return hr}}}function bW(i){i.display.input.showSelection(i.display.input.prepareSelection())}function gA(hw,hp){if(hp===void 0){hp=true}var hv=hw.doc,hx={};var hu=hx.cursors=document.createDocumentFragment();var hq=hx.selection=document.createDocumentFragment();for(var hs=0;hs<hv.sel.ranges.length;hs++){if(!hp&&hs==hv.sel.primIndex){continue}var ht=hv.sel.ranges[hs];if(ht.from().line>=hw.display.viewTo||ht.to().line<hw.display.viewFrom){continue}var hr=ht.empty();if(hr||hw.options.showCursorWhenSelecting){C(hw,ht.head,hu)}if(!hr){bX(hw,ht,hq)}}return hx}function C(i,hr,hq){var ht=et(i,hr,"div",null,null,!i.options.singleCursorHeightPerLine);var hs=hq.appendChild(g4("div","\u00a0","CodeMirror-cursor"));hs.style.left=ht.left+"px";hs.style.top=ht.top+"px";hs.style.height=Math.max(0,ht.bottom-ht.top)*i.options.cursorHeight+"px";if(ht.other){var hp=hq.appendChild(g4("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));hp.style.display="";hp.style.left=ht.other.left+"px";hp.style.top=ht.other.top+"px";hp.style.height=(ht.other.bottom-ht.other.top)*0.85+"px"}}function gU(hp,i){return hp.top-i.top||hp.left-i.left}function bX(ht,hz,hu){var hC=ht.display,hG=ht.doc;var i=document.createDocumentFragment();var hy=fT(ht.display),hr=hy.left;var hD=Math.max(hC.sizerWidth,dT(ht)-hC.sizer.offsetLeft)-hy.right;var hs=hG.direction=="ltr";function hA(hK,hJ,hI,hH){if(hJ<0){hJ=0}hJ=Math.round(hJ);hH=Math.round(hH);i.appendChild(g4("div",null,"CodeMirror-selected",("position: absolute; left: "+hK+"px;\n                             top: "+hJ+"px; width: "+(hI==null?hD-hK:hI)+"px;\n                             height: "+(hH-hJ)+"px")))}function hp(hQ,hI,hP){var hM=f3(hG,hQ);var hN=hM.text.length;var hH,hL;function hO(hS,hR){return dd(ht,ac(hQ,hS),"div",hM,hR)}function hJ(hW,hR,hS){var hU=bB(ht,hM,null,hW);var hV=(hR=="ltr")==(hS=="after")?"left":"right";var hT=hS=="after"?hU.begin:hU.end-(/\s/.test(hM.text.charAt(hU.end-1))?2:1);return hO(hT,hV)[hV]}var hK=a(hM,hG.direction);eF(hK,hI||0,hP==null?hN:hP,function(h2,hR,hX,h5){var h8=hX=="ltr";var h3=hO(h2,h8?"left":"right");var h1=hO(hR-1,h8?"right":"left");var h7=hI==null&&h2==0,h4=hP==null&&hR==hN;var hT=h5==0,hV=!hK||h5==hK.length-1;if(h1.top-h3.top<=3){var hU=(hs?h7:h4)&&hT;var hW=(hs?h4:h7)&&hV;var hS=hU?hr:(h8?h3:h1).left;var h9=hW?hD:(h8?h1:h3).right;hA(hS,h3.top,h9-hS,h3.bottom)}else{var hZ,hY,h6,h0;if(h8){hZ=hs&&h7&&hT?hr:h3.left;hY=hs?hD:hJ(h2,hX,"before");h6=hs?hr:hJ(hR,hX,"after");h0=hs&&h4&&hV?hD:h1.right}else{hZ=!hs?hr:hJ(h2,hX,"before");hY=!hs&&h7&&hT?hD:h3.right;h6=!hs&&h4&&hV?hr:h1.left;h0=!hs?hD:hJ(hR,hX,"after")}hA(hZ,h3.top,hY-hZ,h3.bottom);if(h3.bottom<h1.top){hA(hr,h3.bottom,null,h1.top)}hA(h6,h1.top,h0-h6,h1.bottom)}if(!hH||gU(h3,hH)<0){hH=h3}if(gU(h1,hH)<0){hH=h1}if(!hL||gU(h3,hL)<0){hL=h3}if(gU(h1,hL)<0){hL=h1}});return{start:hH,end:hL}}var hF=hz.from(),hE=hz.to();if(hF.line==hE.line){hp(hF.line,hF.ch,hE.ch)}else{var hq=f3(hG,hF.line),hw=f3(hG,hE.line);var hv=z(hq)==z(hw);var hx=hp(hF.line,hF.ch,hv?hq.text.length+1:null).end;var hB=hp(hE.line,hv?0:null,hE.ch).start;if(hv){if(hx.top<hB.top-2){hA(hx.right,hx.top,null,hx.bottom);hA(hr,hB.top,hB.left,hB.bottom)}else{hA(hx.right,hx.top,hB.left-hx.right,hx.bottom)}}if(hx.bottom<hB.top){hA(hr,hx.bottom,null,hB.top)}}hu.appendChild(i)}function q(i){if(!i.state.focused){return}var hq=i.display;clearInterval(hq.blinker);var hp=true;hq.cursorDiv.style.visibility="";if(i.options.cursorBlinkRate>0){hq.blinker=setInterval(function(){return hq.cursorDiv.style.visibility=(hp=!hp)?"":"hidden"},i.options.cursorBlinkRate)}else{if(i.options.cursorBlinkRate<0){hq.cursorDiv.style.visibility="hidden"}}}function t(i){if(!i.state.focused){i.display.input.focus();c3(i)}}function at(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;a8(i)}},100)}function c3(i,hp){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false}if(i.options.readOnly=="nocursor"){return}if(!i.state.focused){aO(i,"focus",i,hp);i.state.focused=true;gr(i.display.wrapper,"CodeMirror-focused");if(!i.curOp&&i.display.selForContextMenu!=i.doc.sel){i.display.input.reset();if(du){setTimeout(function(){return i.display.input.reset(true)},20)}}i.display.input.receivedFocus()}q(i)}function a8(i,hp){if(i.state.delayingBlurEvent){return}if(i.state.focused){aO(i,"blur",i,hp);i.state.focused=false;h(i.display.wrapper,"CodeMirror-focused")}clearInterval(i.display.blinker);setTimeout(function(){if(!i.state.focused){i.display.shift=false}},150)}function bm(hw){var hu=hw.display;var hq=hu.lineDiv.offsetTop;for(var hr=0;hr<hu.view.length;hr++){var hx=hu.view[hr],hy=(void 0);if(hx.hidden){continue}if(eh&&m<8){var ht=hx.node.offsetTop+hx.node.offsetHeight;hy=ht-hq;hq=ht}else{var hs=hx.node.getBoundingClientRect();hy=hs.bottom-hs.top}var hv=hx.line.height-hy;if(hy<2){hy=bb(hu)}if(hv>0.005||hv<-0.005){ha(hx.line,hy);cy(hx.line);if(hx.rest){for(var hp=0;hp<hx.rest.length;hp++){cy(hx.rest[hp])}}}}}function cy(hq){if(hq.widgets){for(var hr=0;hr<hq.widgets.length;++hr){var hp=hq.widgets[hr],hs=hp.node.parentNode;if(hs){hp.height=hs.offsetHeight}}}}function ct(hr,hv,hq){var hs=hq&&hq.top!=null?Math.max(0,hq.top):hr.scroller.scrollTop;hs=Math.floor(hs-fX(hr));var i=hq&&hq.bottom!=null?hq.bottom:hs+hr.wrapper.clientHeight;var ht=b1(hv,hs),hu=b1(hv,i);if(hq&&hq.ensure){var hp=hq.ensure.from.line,hw=hq.ensure.to.line;if(hp<ht){ht=hp;hu=b1(hv,b7(f3(hv,hp))+hr.wrapper.clientHeight)}else{if(Math.min(hw,hv.lastLine())>=hu){ht=b1(hv,b7(f3(hv,hw))-hr.wrapper.clientHeight);hu=hw}}}return{from:ht,to:Math.max(hu,ht+1)}}function fn(hx){var hv=hx.display,hw=hv.view;if(!hv.alignWidgets&&(!hv.gutters.firstChild||!hx.options.fixedGutter)){return}var ht=ex(hv)-hv.scroller.scrollLeft+hx.doc.scrollLeft;var hp=hv.gutters.offsetWidth,hq=ht+"px";for(var hs=0;hs<hw.length;hs++){if(!hw[hs].hidden){if(hx.options.fixedGutter){if(hw[hs].gutter){hw[hs].gutter.style.left=hq}if(hw[hs].gutterBackground){hw[hs].gutterBackground.style.left=hq}}var hu=hw[hs].alignable;if(hu){for(var hr=0;hr<hu.length;hr++){hu[hr].style.left=hq}}}}if(hx.options.fixedGutter){hv.gutters.style.left=(ht+hp)+"px"}}function eG(i){if(!i.options.lineNumbers){return false}var ht=i.doc,hp=e7(i.options,ht.first+ht.size-1),hs=i.display;if(hp.length!=hs.lineNumChars){var hu=hs.measure.appendChild(g4("div",[g4("div",hp)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var hq=hu.firstChild.offsetWidth,hr=hu.offsetWidth-hq;hs.lineGutter.style.width="";hs.lineNumInnerWidth=Math.max(hq,hs.lineGutter.offsetWidth-hr)+1;hs.lineNumWidth=hs.lineNumInnerWidth+hr;hs.lineNumChars=hs.lineNumInnerWidth?hp.length:-1;hs.lineGutter.style.width=hs.lineNumWidth+"px";dy(i);return true}return false}function eH(hp,hr){if(a4(hp,"scrollCursorIntoView")){return}var ht=hp.display,hq=ht.sizer.getBoundingClientRect(),i=null;if(hr.top+hq.top<0){i=true}else{if(hr.bottom+hq.top>(window.innerHeight||document.documentElement.clientHeight)){i=false}}if(i!=null&&!gh){var hs=g4("div","\u200b",null,("position: absolute;\n                         top: "+(hr.top-ht.viewOffset-fX(hp.display))+"px;\n                         height: "+(hr.bottom-hr.top+dm(hp)+ht.barHeight)+"px;\n                         left: "+(hr.left)+"px; width: "+(Math.max(2,hr.right-hr.left))+"px;"));hp.display.lineSpace.appendChild(hs);hs.scrollIntoView(i);hp.display.lineSpace.removeChild(hs)}}function G(hz,hw,hs,hr){if(hr==null){hr=0}var hx;if(!hz.options.lineWrapping&&hw==hs){hw=hw.ch?ac(hw.line,hw.sticky=="before"?hw.ch-1:hw.ch,"after"):hw;hs=hw.sticky=="before"?ac(hw.line,hw.ch+1,"before"):hw}for(var ht=0;ht<5;ht++){var hu=false;var hy=et(hz,hw);var i=!hs||hs==hw?hy:et(hz,hs);hx={left:Math.min(hy.left,i.left),top:Math.min(hy.top,i.top)-hr,right:Math.max(hy.left,i.left),bottom:Math.max(hy.bottom,i.bottom)+hr};var hq=L(hz,hx);var hv=hz.doc.scrollTop,hp=hz.doc.scrollLeft;if(hq.scrollTop!=null){B(hz,hq.scrollTop);if(Math.abs(hz.doc.scrollTop-hv)>1){hu=true}}if(hq.scrollLeft!=null){bY(hz,hq.scrollLeft);if(Math.abs(hz.doc.scrollLeft-hp)>1){hu=true}}if(!hu){break}}return hx}function H(i,hp){var hq=L(i,hp);if(hq.scrollTop!=null){B(i,hq.scrollTop)}if(hq.scrollLeft!=null){bY(i,hq.scrollLeft)}}function L(hx,hw){var hu=hx.display,hs=bb(hx.display);if(hw.top<0){hw.top=0}var hq=hx.curOp&&hx.curOp.scrollTop!=null?hx.curOp.scrollTop:hu.scroller.scrollTop;var hz=dp(hx),hB={};if(hw.bottom-hw.top>hz){hw.bottom=hw.top+hz}var hp=hx.doc.height+b2(hu);var i=hw.top<hs,ht=hw.bottom>hp-hs;if(hw.top<hq){hB.scrollTop=i?0:hw.top}else{if(hw.bottom>hq+hz){var hv=Math.min(hw.top,(ht?hp:hw.bottom)-hz);if(hv!=hq){hB.scrollTop=hv}}}var hA=hx.curOp&&hx.curOp.scrollLeft!=null?hx.curOp.scrollLeft:hu.scroller.scrollLeft;var hy=dT(hx)-(hx.options.fixedGutter?hu.gutters.offsetWidth:0);var hr=hw.right-hw.left>hy;if(hr){hw.right=hw.left+hy}if(hw.left<10){hB.scrollLeft=0}else{if(hw.left<hA){hB.scrollLeft=Math.max(0,hw.left-(hr?0:10))}else{if(hw.right>hy+hA-3){hB.scrollLeft=hw.right+(hr?0:10)-hy}}}return hB}function da(i,hp){if(hp==null){return}gt(i);i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+hp}function gw(i){gt(i);var hp=i.getCursor();i.curOp.scrollToPos={from:hp,to:hp,margin:i.options.cursorScrollMargin}}function fx(hp,i,hq){if(i!=null||hq!=null){gt(hp)}if(i!=null){hp.curOp.scrollLeft=i}if(hq!=null){hp.curOp.scrollTop=hq}}function cB(i,hp){gt(i);i.curOp.scrollToPos=hp}function gt(i){var hp=i.curOp.scrollToPos;if(hp){i.curOp.scrollToPos=null;var hr=ed(i,hp.from),hq=ed(i,hp.to);cb(i,hr,hq,hp.margin)}}function cb(i,hs,hr,hq){var hp=L(i,{left:Math.min(hs.left,hr.left),top:Math.min(hs.top,hr.top)-hq,right:Math.max(hs.right,hr.right),bottom:Math.max(hs.bottom,hr.bottom)+hq});fx(i,hp.scrollLeft,hp.scrollTop)}function B(i,hp){if(Math.abs(i.doc.scrollTop-hp)<2){return}if(!cQ){es(i,{top:hp})}T(i,hp,true);if(cQ){es(i)}eQ(i,100)}function T(i,hq,hp){hq=Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,hq);if(i.display.scroller.scrollTop==hq&&!hp){return}i.doc.scrollTop=hq;i.display.scrollbars.setScrollTop(hq);if(i.display.scroller.scrollTop!=hq){i.display.scroller.scrollTop=hq}}function bY(i,hr,hq,hp){hr=Math.min(hr,i.display.scroller.scrollWidth-i.display.scroller.clientWidth);if((hq?hr==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-hr)<2)&&!hp){return}i.doc.scrollLeft=hr;fn(i);if(i.display.scroller.scrollLeft!=hr){i.display.scroller.scrollLeft=hr}i.display.scrollbars.setScrollLeft(hr)}function d7(i){var hr=i.display,hq=hr.gutters.offsetWidth;var hp=Math.round(i.doc.height+b2(i.display));return{clientHeight:hr.scroller.clientHeight,viewHeight:hr.wrapper.clientHeight,scrollWidth:hr.scroller.scrollWidth,clientWidth:hr.scroller.clientWidth,viewWidth:hr.wrapper.clientWidth,barLeft:i.options.fixedGutter?hq:0,docHeight:hp,scrollHeight:hp+dm(i)+hr.barHeight,nativeBarWidth:hr.nativeBarWidth,gutterWidth:hq}}var dS=function(hq,hp,i){this.cm=i;var hr=this.vert=g4("div",[g4("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var hs=this.horiz=g4("div",[g4("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");hq(hr);hq(hs);cj(hr,"scroll",function(){if(hr.clientHeight){hp(hr.scrollTop,"vertical")}});cj(hs,"scroll",function(){if(hs.clientWidth){hp(hs.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(eh&&m<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};dS.prototype.update=function(hr){var hs=hr.scrollWidth>hr.clientWidth+1;var hq=hr.scrollHeight>hr.clientHeight+1;var ht=hr.nativeBarWidth;if(hq){this.vert.style.display="block";this.vert.style.bottom=hs?ht+"px":"0";var hp=hr.viewHeight-(hs?ht:0);this.vert.firstChild.style.height=Math.max(0,hr.scrollHeight-hr.clientHeight+hp)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(hs){this.horiz.style.display="block";this.horiz.style.right=hq?ht+"px":"0";this.horiz.style.left=hr.barLeft+"px";var i=hr.viewWidth-hr.barLeft-(hq?ht:0);this.horiz.firstChild.style.width=Math.max(0,hr.scrollWidth-hr.clientWidth+i)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&hr.clientHeight>0){if(ht==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:hq?ht:0,bottom:hs?ht:0}};dS.prototype.setScrollLeft=function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};dS.prototype.setScrollTop=function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};dS.prototype.zeroWidthHack=function(){var i=cu&&!dC?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new ho;this.disableVert=new ho};dS.prototype.enableZeroWidthBar=function(hq,i,hp){hq.style.pointerEvents="auto";function hr(){var ht=hq.getBoundingClientRect();var hs=hp=="vert"?document.elementFromPoint(ht.right-1,(ht.top+ht.bottom)/2):document.elementFromPoint((ht.right+ht.left)/2,ht.bottom-1);if(hs!=hq){hq.style.pointerEvents="none"}else{i.set(1000,hr)}}i.set(1000,hr)};dS.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)};var fS=function(){};fS.prototype.update=function(){return{bottom:0,right:0}};fS.prototype.setScrollLeft=function(){};fS.prototype.setScrollTop=function(){};fS.prototype.clear=function(){};function fM(hr,ht){if(!ht){ht=d7(hr)}var hq=hr.display.barWidth,hp=hr.display.barHeight;a7(hr,ht);for(var hs=0;hs<4&&hq!=hr.display.barWidth||hp!=hr.display.barHeight;hs++){if(hq!=hr.display.barWidth&&hr.options.lineWrapping){bm(hr)}a7(hr,d7(hr));hq=hr.display.barWidth;hp=hr.display.barHeight}}function a7(i,hp){var hr=i.display;var hq=hr.scrollbars.update(hp);hr.sizer.style.paddingRight=(hr.barWidth=hq.right)+"px";hr.sizer.style.paddingBottom=(hr.barHeight=hq.bottom)+"px";hr.heightForcer.style.borderBottom=hq.bottom+"px solid transparent";if(hq.right&&hq.bottom){hr.scrollbarFiller.style.display="block";hr.scrollbarFiller.style.height=hq.bottom+"px";hr.scrollbarFiller.style.width=hq.right+"px"}else{hr.scrollbarFiller.style.display=""}if(hq.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter){hr.gutterFiller.style.display="block";hr.gutterFiller.style.height=hq.bottom+"px";hr.gutterFiller.style.width=hp.gutterWidth+"px"}else{hr.gutterFiller.style.display=""}}var bA={"native":dS,"null":fS};function aN(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){h(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new bA[i.options.scrollbarStyle](function(hp){i.display.wrapper.insertBefore(hp,i.display.scrollbarFiller);cj(hp,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});hp.setAttribute("cm-not-content","true")},function(hq,hp){if(hp=="horizontal"){bY(i,hq)}else{B(i,hq)}},i);if(i.display.scrollbars.addClass){gr(i.display.wrapper,i.display.scrollbars.addClass)}}var eL=0;function dc(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++eL};ff(i.curOp)}function aw(i){var hp=i.curOp;ck(hp,function(hr){for(var hq=0;hq<hr.ops.length;hq++){hr.ops[hq].cm.curOp=null}df(hr)})}function df(hu){var hq=hu.ops;for(var hp=0;hp<hq.length;hp++){cs(hq[hp])}for(var hv=0;hv<hq.length;hv++){az(hq[hv])}for(var ht=0;ht<hq.length;ht++){co(hq[ht])}for(var hs=0;hs<hq.length;hs++){ay(hq[hs])}for(var hr=0;hr<hq.length;hr++){fO(hq[hr])}}function cs(hq){var i=hq.cm,hp=i.display;N(i);if(hq.updateMaxLine){f(i)}hq.mustUpdate=hq.viewChanged||hq.forceUpdate||hq.scrollTop!=null||hq.scrollToPos&&(hq.scrollToPos.from.line<hp.viewFrom||hq.scrollToPos.to.line>=hp.viewTo)||hp.maxLineChanged&&i.options.lineWrapping;hq.update=hq.mustUpdate&&new aU(i,hq.mustUpdate&&{top:hq.scrollTop,ensure:hq.scrollToPos},hq.forceUpdate)}function az(i){i.updatedDisplay=i.mustUpdate&&E(i.cm,i.update)}function co(hq){var i=hq.cm,hp=i.display;if(hq.updatedDisplay){bm(i)}hq.barMeasure=d7(i);if(hp.maxLineChanged&&!i.options.lineWrapping){hq.adjustWidthTo=eT(i,hp.maxLine,hp.maxLine.text.length).left+3;i.display.sizerWidth=hq.adjustWidthTo;hq.barMeasure.scrollWidth=Math.max(hp.scroller.clientWidth,hp.sizer.offsetLeft+hq.adjustWidthTo+dm(i)+i.display.barWidth);hq.maxScrollLeft=Math.max(0,hp.sizer.offsetLeft+hq.adjustWidthTo-dT(i))}if(hq.updatedDisplay||hq.selectionChanged){hq.preparedSelection=hp.input.prepareSelection()}}function ay(hq){var i=hq.cm;if(hq.adjustWidthTo!=null){i.display.sizer.style.minWidth=hq.adjustWidthTo+"px";if(hq.maxScrollLeft<i.doc.scrollLeft){bY(i,Math.min(i.display.scroller.scrollLeft,hq.maxScrollLeft),true)}i.display.maxLineChanged=false}var hp=hq.focus&&hq.focus==el();if(hq.preparedSelection){i.display.input.showSelection(hq.preparedSelection,hp)}if(hq.updatedDisplay||hq.startHeight!=i.doc.height){fM(i,hq.barMeasure)}if(hq.updatedDisplay){d6(i,hq.barMeasure)}if(hq.selectionChanged){q(i)}if(i.state.focused&&hq.updateInput){i.display.input.reset(hq.typing)}if(hp){t(hq.cm)}}function fO(hs){var hx=hs.cm,hu=hx.display,hw=hx.doc;if(hs.updatedDisplay){cJ(hx,hs.update)}if(hu.wheelStartX!=null&&(hs.scrollTop!=null||hs.scrollLeft!=null||hs.scrollToPos)){hu.wheelStartX=hu.wheelStartY=null}if(hs.scrollTop!=null){T(hx,hs.scrollTop,hs.forceScroll)}if(hs.scrollLeft!=null){bY(hx,hs.scrollLeft,true,true)}if(hs.scrollToPos){var hv=G(hx,gC(hw,hs.scrollToPos.from),gC(hw,hs.scrollToPos.to),hs.scrollToPos.margin);eH(hx,hv)}var ht=hs.maybeHiddenMarkers,hp=hs.maybeUnhiddenMarkers;if(ht){for(var hr=0;hr<ht.length;++hr){if(!ht[hr].lines.length){aO(ht[hr],"hide")}}}if(hp){for(var hq=0;hq<hp.length;++hq){if(hp[hq].lines.length){aO(hp[hq],"unhide")}}}if(hu.wrapper.offsetHeight){hw.scrollTop=hx.display.scroller.scrollTop}if(hs.changeObjs){aO(hx,"changes",hx,hs.changeObjs)}if(hs.update){hs.update.finish()}}function dg(i,hp){if(i.curOp){return hp()}dc(i);try{return hp()}finally{aw(i)}}function dv(i,hp){return function(){if(i.curOp){return hp.apply(i,arguments)}dc(i);try{return hp.apply(i,arguments)}finally{aw(i)}}}function dF(i){return function(){if(this.curOp){return i.apply(this,arguments)}dc(this);try{return i.apply(this,arguments)}finally{aw(this)}}}function c6(i){return function(){var hp=this.cm;if(!hp||hp.curOp){return i.apply(this,arguments)}dc(hp);try{return i.apply(this,arguments)}finally{aw(hp)}}}function ap(hw,hu,hv,hx){if(hu==null){hu=hw.doc.first}if(hv==null){hv=hw.doc.first+hw.doc.size}if(!hx){hx=0}var hr=hw.display;if(hx&&hv<hr.viewTo&&(hr.updateLineNumbers==null||hr.updateLineNumbers>hu)){hr.updateLineNumbers=hu}hw.curOp.viewChanged=true;if(hu>=hr.viewTo){if(bk&&a9(hw.doc,hu)<hr.viewTo){fd(hw)}}else{if(hv<=hr.viewFrom){if(bk&&eE(hw.doc,hv+hx)>hr.viewFrom){fd(hw)}else{hr.viewFrom+=hx;hr.viewTo+=hx}}else{if(hu<=hr.viewFrom&&hv>=hr.viewTo){fd(hw)}else{if(hu<=hr.viewFrom){var ht=dM(hw,hv,hv+hx,1);if(ht){hr.view=hr.view.slice(ht.index);hr.viewFrom=ht.lineN;hr.viewTo+=hx}else{fd(hw)}}else{if(hv>=hr.viewTo){var hp=dM(hw,hu,hu,-1);if(hp){hr.view=hr.view.slice(0,hp.index);hr.viewTo=hp.lineN}else{fd(hw)}}else{var hs=dM(hw,hu,hu,-1);var hq=dM(hw,hv,hv+hx,1);if(hs&&hq){hr.view=hr.view.slice(0,hs.index).concat(fI(hw,hs.lineN,hq.lineN)).concat(hr.view.slice(hq.index));hr.viewTo+=hx}else{fd(hw)}}}}}}var i=hr.externalMeasured;if(i){if(hv<i.lineN){i.lineN+=hx}else{if(hu<i.lineN+i.size){hr.externalMeasured=null}}}}function W(hp,hq,ht){hp.curOp.viewChanged=true;var hu=hp.display,hs=hp.display.externalMeasured;if(hs&&hq>=hs.lineN&&hq<hs.lineN+hs.size){hu.externalMeasured=null}if(hq<hu.viewFrom||hq>=hu.viewTo){return}var hr=hu.view[dZ(hp,hq)];if(hr.node==null){return}var i=hr.changes||(hr.changes=[]);if(dQ(i,ht)==-1){i.push(ht)}}function fd(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function dM(hx,hr,ht,hq){var hu=dZ(hx,hr),hw,hv=hx.display.view;if(!bk||ht==hx.doc.first+hx.doc.size){return{index:hu,lineN:ht}}var hp=hx.display.viewFrom;for(var hs=0;hs<hu;hs++){hp+=hv[hs].size}if(hp!=hr){if(hq>0){if(hu==hv.length-1){return null}hw=(hp+hv[hu].size)-hr;hu++}else{hw=hp-hr}hr+=hw;ht+=hw}while(a9(hx.doc,ht)!=ht){if(hu==(hq<0?0:hv.length-1)){return null}ht+=hq*hv[hu-(hq<0?1:0)].size;hu+=hq}return{index:hu,lineN:ht}}function dl(i,hs,hr){var hq=i.display,hp=hq.view;if(hp.length==0||hs>=hq.viewTo||hr<=hq.viewFrom){hq.view=fI(i,hs,hr);hq.viewFrom=hs}else{if(hq.viewFrom>hs){hq.view=fI(i,hs,hq.viewFrom).concat(hq.view)}else{if(hq.viewFrom<hs){hq.view=hq.view.slice(dZ(i,hs))}}hq.viewFrom=hs;if(hq.viewTo<hr){hq.view=hq.view.concat(fI(i,hq.viewTo,hr))}else{if(hq.viewTo>hr){hq.view=hq.view.slice(0,dZ(i,hr))}}}hq.viewTo=hr}function dJ(hp){var hq=hp.display.view,ht=0;for(var hs=0;hs<hq.length;hs++){var hr=hq[hs];if(!hr.hidden&&(!hr.node||hr.changes)){++ht}}return ht}function eQ(i,hp){if(i.doc.highlightFrontier<i.display.viewTo){i.state.highlight.set(hp,cX(dk,i))}}function dk(i){var hs=i.doc;if(hs.highlightFrontier>=i.display.viewTo){return}var hq=+new Date+i.options.workTime;var hr=fK(i,hs.highlightFrontier);var hp=[];hs.iter(hr.line,Math.min(hs.first+hs.size,i.display.viewTo+500),function(hu){if(hr.line>=i.display.viewFrom){var hx=hu.styles;var ht=hu.text.length>i.options.maxHighlightLength?cq(hs.mode,hr.state):null;var hz=go(i,hu,hr,true);if(ht){hr.state=ht}hu.styles=hz.styles;var hw=hu.styleClasses,hy=hz.classes;if(hy){hu.styleClasses=hy}else{if(hw){hu.styleClasses=null}}var hA=!hx||hx.length!=hu.styles.length||hw!=hy&&(!hw||!hy||hw.bgClass!=hy.bgClass||hw.textClass!=hy.textClass);for(var hv=0;!hA&&hv<hx.length;++hv){hA=hx[hv]!=hu.styles[hv]}if(hA){hp.push(hr.line)}hu.stateAfter=hr.save();hr.nextLine()}else{if(hu.text.length<=i.options.maxHighlightLength){d5(i,hu.text,hr)}hu.stateAfter=hr.line%5==0?hr.save():null;hr.nextLine()}if(+new Date>hq){eQ(i,i.options.workDelay);return true}});hs.highlightFrontier=hr.line;hs.modeFrontier=Math.max(hs.modeFrontier,hr.line);if(hp.length){dg(i,function(){for(var ht=0;ht<hp.length;ht++){W(i,hp[ht],"text")}})}}var aU=function(hp,i,hq){var hr=hp.display;this.viewport=i;this.visible=ct(hr,hp.doc,i);this.editorIsHidden=!hr.wrapper.offsetWidth;this.wrapperHeight=hr.wrapper.clientHeight;this.wrapperWidth=hr.wrapper.clientWidth;this.oldDisplayWidth=dT(hp);this.force=hq;this.dims=f1(hp);this.events=[]};aU.prototype.signal=function(hp,i){if(f8(hp,i)){this.events.push(arguments)}};aU.prototype.finish=function(){var hq=this;for(var hp=0;hp<this.events.length;hp++){aO.apply(null,hq.events[hp])}};function N(i){var hp=i.display;if(!hp.scrollbarsClipped&&hp.scroller.offsetWidth){hp.nativeBarWidth=hp.scroller.offsetWidth-hp.scroller.clientWidth;hp.heightForcer.style.height=dm(i)+"px";hp.sizer.style.marginBottom=-hp.nativeBarWidth+"px";hp.sizer.style.borderRightWidth=dm(i)+"px";hp.scrollbarsClipped=true}}function bC(hp){if(hp.hasFocus()){return null}var hr=el();if(!hr||!hf(hp.display.lineDiv,hr)){return null}var i={activeElt:hr};if(window.getSelection){var hq=window.getSelection();if(hq.anchorNode&&hq.extend&&hf(hp.display.lineDiv,hq.anchorNode)){i.anchorNode=hq.anchorNode;i.anchorOffset=hq.anchorOffset;i.focusNode=hq.focusNode;i.focusOffset=hq.focusOffset}}return i}function j(hp){if(!hp||!hp.activeElt||hp.activeElt==el()){return}hp.activeElt.focus();if(hp.anchorNode&&hf(document.body,hp.anchorNode)&&hf(document.body,hp.focusNode)){var hq=window.getSelection(),i=document.createRange();i.setEnd(hp.anchorNode,hp.anchorOffset);i.collapse(false);hq.removeAllRanges();hq.addRange(i);hq.extend(hp.focusNode,hp.focusOffset)}}function E(hx,hr){var hs=hx.display,hw=hx.doc;if(hr.editorIsHidden){fd(hx);return false}if(!hr.force&&hr.visible.from>=hs.viewFrom&&hr.visible.to<=hs.viewTo&&(hs.updateLineNumbers==null||hs.updateLineNumbers>=hs.viewTo)&&hs.renderedView==hs.view&&dJ(hx)==0){return false}if(eG(hx)){fd(hx);hr.dims=f1(hx)}var hq=hw.first+hw.size;var hu=Math.max(hr.visible.from-hx.options.viewportMargin,hw.first);var hv=Math.min(hq,hr.visible.to+hx.options.viewportMargin);if(hs.viewFrom<hu&&hu-hs.viewFrom<20){hu=Math.max(hw.first,hs.viewFrom)}if(hs.viewTo>hv&&hs.viewTo-hv<20){hv=Math.min(hq,hs.viewTo)}if(bk){hu=a9(hx.doc,hu);hv=eE(hx.doc,hv)}var hp=hu!=hs.viewFrom||hv!=hs.viewTo||hs.lastWrapHeight!=hr.wrapperHeight||hs.lastWrapWidth!=hr.wrapperWidth;dl(hx,hu,hv);hs.viewOffset=b7(f3(hx.doc,hs.viewFrom));hx.display.mover.style.top=hs.viewOffset+"px";var i=dJ(hx);if(!hp&&i==0&&!hr.force&&hs.renderedView==hs.view&&(hs.updateLineNumbers==null||hs.updateLineNumbers>=hs.viewTo)){return false}var ht=bC(hx);if(i>4){hs.lineDiv.style.display="none"}cM(hx,hs.updateLineNumbers,hr.dims);if(i>4){hs.lineDiv.style.display=""}hs.renderedView=hs.view;j(ht);eC(hs.cursorDiv);eC(hs.selectionDiv);hs.gutters.style.height=hs.sizer.style.minHeight=0;if(hp){hs.lastWrapHeight=hr.wrapperHeight;hs.lastWrapWidth=hr.wrapperWidth;eQ(hx,400)}hs.updateLineNumbers=null;return true}function cJ(hp,hs){var i=hs.viewport;for(var hr=true;;hr=false){if(!hr||!hp.options.lineWrapping||hs.oldDisplayWidth==dT(hp)){if(i&&i.top!=null){i={top:Math.min(hp.doc.height+b2(hp.display)-dp(hp),i.top)}}hs.visible=ct(hp.display,hp.doc,i);if(hs.visible.from>=hp.display.viewFrom&&hs.visible.to<=hp.display.viewTo){break}}if(!E(hp,hs)){break}bm(hp);var hq=d7(hp);bW(hp);fM(hp,hq);d6(hp,hq);hs.force=false}hs.signal(hp,"update",hp);if(hp.display.viewFrom!=hp.display.reportedViewFrom||hp.display.viewTo!=hp.display.reportedViewTo){hs.signal(hp,"viewportChange",hp,hp.display.viewFrom,hp.display.viewTo);hp.display.reportedViewFrom=hp.display.viewFrom;hp.display.reportedViewTo=hp.display.viewTo}}function es(hp,i){var hr=new aU(hp,i);if(E(hp,hr)){bm(hp);cJ(hp,hr);var hq=d7(hp);bW(hp);fM(hp,hq);d6(hp,hq);hr.finish()}}function cM(hA,hr,hz){var hw=hA.display,hC=hA.options.lineNumbers;var hp=hw.lineDiv,hB=hp.firstChild;function hv(hD){var i=hD.nextSibling;if(du&&cu&&hA.display.currentWheelTarget==hD){hD.style.display="none"}else{hD.parentNode.removeChild(hD)}return i}var hx=hw.view,hu=hw.viewFrom;for(var hs=0;hs<hx.length;hs++){var ht=hx[hs];if(ht.hidden){}else{if(!ht.node||ht.node.parentNode!=hp){var hq=aP(hA,ht,hu,hz);hp.insertBefore(hq,hB)}else{while(hB!=ht.node){hB=hv(hB)}var hy=hC&&hr!=null&&hr<=hu&&ht.lineNumber;if(ht.changes){if(dQ(ht.changes,"gutter")>-1){hy=false}aj(hA,ht,hu,hz)}if(hy){eC(ht.lineNumber);ht.lineNumber.appendChild(document.createTextNode(e7(hA.options,hu)))}hB=ht.node.nextSibling}}hu+=ht.size}while(hB){hB=hv(hB)}}function dy(i){var hp=i.display.gutters.offsetWidth;i.display.sizer.style.marginLeft=hp+"px"}function d6(i,hp){i.display.sizer.style.minHeight=hp.docHeight+"px";i.display.heightForcer.style.top=hp.docHeight+"px";i.display.gutters.style.height=(hp.docHeight+i.display.barHeight+dm(i))+"px"}function eO(hp){var hq=hp.display.gutters,hu=hp.options.gutters;eC(hq);var hr=0;for(;hr<hu.length;++hr){var hs=hu[hr];var ht=hq.appendChild(g4("div",null,"CodeMirror-gutter "+hs));if(hs=="CodeMirror-linenumbers"){hp.display.lineGutter=ht;ht.style.width=(hp.display.lineNumWidth||1)+"px"}}hq.style.display=hr?"":"none";dy(hp)}function cD(i){var hp=dQ(i.gutters,"CodeMirror-linenumbers");if(hp==-1&&i.lineNumbers){i.gutters=i.gutters.concat(["CodeMirror-linenumbers"])}else{if(hp>-1&&!i.lineNumbers){i.gutters=i.gutters.slice(0);i.gutters.splice(hp,1)}}}var ga=0;var cF=null;if(eh){cF=-0.53}else{if(cQ){cF=15}else{if(dK){cF=-0.7}else{if(aM){cF=-1/3}}}}function dj(hq){var hp=hq.wheelDeltaX,i=hq.wheelDeltaY;if(hp==null&&hq.detail&&hq.axis==hq.HORIZONTAL_AXIS){hp=hq.detail}if(i==null&&hq.detail&&hq.axis==hq.VERTICAL_AXIS){i=hq.detail}else{if(i==null){i=hq.wheelDelta}}return{x:hp,y:i}}function aJ(i){var hp=dj(i);hp.x*=cF;hp.y*=cF;return hp}function c(hz,ht){var hB=dj(ht),hD=hB.x,hC=hB.y;var hv=hz.display,hy=hv.scroller;var hs=hy.scrollWidth>hy.clientWidth;var hr=hy.scrollHeight>hy.clientHeight;if(!(hD&&hs||hC&&hr)){return}if(hC&&cu&&du){outer:for(var hA=ht.target,hx=hv.view;hA!=hy;hA=hA.parentNode){for(var hq=0;hq<hx.length;hq++){if(hx[hq].node==hA){hz.display.currentWheelTarget=hA;break outer}}}}if(hD&&!cQ&&!eD&&cF!=null){if(hC&&hr){B(hz,Math.max(0,hy.scrollTop+hC*cF))}bY(hz,Math.max(0,hy.scrollLeft+hD*cF));if(!hC||(hC&&hr)){c8(ht)}hv.wheelStartX=null;return}if(hC&&cF!=null){var hp=hC*cF;var hw=hz.doc.scrollTop,hu=hw+hv.wrapper.clientHeight;if(hp<0){hw=Math.max(0,hw+hp-50)}else{hu=Math.min(hz.doc.height,hu+hp+50)}es(hz,{top:hw,bottom:hu})}if(ga<20){if(hv.wheelStartX==null){hv.wheelStartX=hy.scrollLeft;hv.wheelStartY=hy.scrollTop;hv.wheelDX=hD;hv.wheelDY=hC;setTimeout(function(){if(hv.wheelStartX==null){return}var i=hy.scrollLeft-hv.wheelStartX;var hF=hy.scrollTop-hv.wheelStartY;var hE=(hF&&hv.wheelDY&&hF/hv.wheelDY)||(i&&hv.wheelDX&&i/hv.wheelDX);hv.wheelStartX=hv.wheelStartY=null;if(!hE){return}cF=(cF*ga+hE)/(ga+1);++ga},200)}else{hv.wheelDX+=hD;hv.wheelDY+=hC}}}var g3=function(i,hp){this.ranges=i;this.primIndex=hp};g3.prototype.primary=function(){return this.ranges[this.primIndex]};g3.prototype.equals=function(hp){var ht=this;if(hp==this){return true}if(hp.primIndex!=this.primIndex||hp.ranges.length!=this.ranges.length){return false}for(var hr=0;hr<this.ranges.length;hr++){var hq=ht.ranges[hr],hs=hp.ranges[hr];if(!ad(hq.anchor,hs.anchor)||!ad(hq.head,hs.head)){return false}}return true};g3.prototype.deepCopy=function(){var hr=this;var hp=[];for(var hq=0;hq<this.ranges.length;hq++){hp[hq]=new ew(cH(hr.ranges[hq].anchor),cH(hr.ranges[hq].head))}return new g3(hp,this.primIndex)};g3.prototype.somethingSelected=function(){var hq=this;for(var hp=0;hp<this.ranges.length;hp++){if(!hq.ranges[hp].empty()){return true}}return false};g3.prototype.contains=function(ht,hp){var hs=this;if(!hp){hp=ht}for(var hr=0;hr<this.ranges.length;hr++){var hq=hs.ranges[hr];if(cE(hp,hq.from())>=0&&cE(ht,hq.to())<=0){return hr}}return -1};var ew=function(i,hp){this.anchor=i;this.head=hp};ew.prototype.from=function(){return aB(this.anchor,this.head)};ew.prototype.to=function(){return bR(this.anchor,this.head)};ew.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function cY(hp,hw){var hr=hp[hw];hp.sort(function(hy,i){return cE(hy.from(),i.from())});hw=dQ(hp,hr);for(var ht=1;ht<hp.length;ht++){var hx=hp[ht],hq=hp[ht-1];if(cE(hq.to(),hx.from())>=0){var hu=aB(hq.from(),hx.from()),hv=bR(hq.to(),hx.to());var hs=hq.empty()?hx.from()==hx.head:hq.from()==hq.head;if(ht<=hw){--hw}hp.splice(--ht,2,new ew(hs?hv:hu,hs?hu:hv))}}return new g3(hp,hw)}function fD(i,hp){return new g3([new ew(i,hp||i)],0)}function dr(i){if(!i.text){return i.to}return ac(i.from.line+i.text.length-1,gx(i.text).length+(i.text.length==1?i.from.ch:0))}function cm(hr,hq){if(cE(hr,hq.from)<0){return hr}if(cE(hr,hq.to)<=0){return dr(hq)}var i=hr.line+hq.text.length-(hq.to.line-hq.from.line)-1,hp=hr.ch;if(hr.line==hq.to.line){hp+=dr(hq).ch-hq.to.ch}return ac(i,hp)}function f7(hs,ht){var hq=[];for(var hr=0;hr<hs.sel.ranges.length;hr++){var hp=hs.sel.ranges[hr];hq.push(new ew(cm(hp.anchor,ht),cm(hp.head,ht)))}return cY(hq,hs.sel.primIndex)}function bN(hq,hp,i){if(hq.line==hp.line){return ac(i.line,hq.ch-hp.ch+i.ch)}else{return ac(i.line+(hq.line-hp.line),hq.ch)}}function an(hz,hw,hq){var hr=[];var hp=ac(hz.first,0),hA=hp;for(var ht=0;ht<hw.length;ht++){var hv=hw[ht];var hy=bN(hv.from,hp,hA);var hx=bN(dr(hv),hp,hA);hp=hv.to;hA=hx;if(hq=="around"){var hu=hz.sel.ranges[ht],hs=cE(hu.head,hu.anchor)<0;hr[ht]=new ew(hs?hx:hy,hs?hy:hx)}else{hr[ht]=new ew(hy,hy)}}return new g3(hr,hz.sel.primIndex)}function bK(i){i.doc.mode=gq(i.options,i.doc.modeOption);eZ(i)}function eZ(i){i.doc.iter(function(hp){if(hp.stateAfter){hp.stateAfter=null}if(hp.styles){hp.styles=null}});i.doc.modeFrontier=i.doc.highlightFrontier=i.doc.first;eQ(i,100);i.state.modeGen++;if(i.curOp){ap(i)}}function eq(i,hp){return hp.from.ch==0&&hp.to.ch==0&&gx(hp.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function gn(hF,hy,hs,hw){function hr(hG){return hs?hs[hG]:null}function hx(hG,hI,hH){e1(hG,hI,hH,hw);am(hG,"change",hG,hy)}function hC(hJ,hH){var hG=[];for(var hI=hJ;hI<hH;++hI){hG.push(new g9(hA[hI],hr(hI),hw))}return hG}var hD=hy.from,hp=hy.to,hA=hy.text;var hz=f3(hF,hD.line),i=f3(hF,hp.line);var hq=gx(hA),hE=hr(hA.length-1),hB=hp.line-hD.line;if(hy.full){hF.insert(0,hC(0,hA.length));hF.remove(hA.length,hF.size-hA.length)}else{if(eq(hF,hy)){var hv=hC(0,hA.length-1);hx(i,i.text,hE);if(hB){hF.remove(hD.line,hB)}if(hv.length){hF.insert(hD.line,hv)}}else{if(hz==i){if(hA.length==1){hx(hz,hz.text.slice(0,hD.ch)+hq+hz.text.slice(hp.ch),hE)}else{var hu=hC(1,hA.length-1);hu.push(new g9(hq+hz.text.slice(hp.ch),hE,hw));hx(hz,hz.text.slice(0,hD.ch)+hA[0],hr(0));hF.insert(hD.line+1,hu)}}else{if(hA.length==1){hx(hz,hz.text.slice(0,hD.ch)+hA[0]+i.text.slice(hp.ch),hr(0));hF.remove(hD.line+1,hB)}else{hx(hz,hz.text.slice(0,hD.ch)+hA[0],hr(0));hx(i,hq+i.text.slice(hp.ch),hE);var ht=hC(1,hA.length-1);if(hB>1){hF.remove(hD.line+1,hB-1)}hF.insert(hD.line+1,ht)}}}}am(hF,"change",hF,hy)}function eI(hr,hq,hp){function i(hx,hv,ht){if(hx.linked){for(var hu=0;hu<hx.linked.length;++hu){var hs=hx.linked[hu];if(hs.doc==hv){continue}var hw=ht&&hs.sharedHist;if(hp&&!hw){continue}hq(hs.doc,hw);i(hs.doc,hx,hw)}}}i(hr,null,true)}function eN(i,hp){if(hp.cm){throw new Error("This document is already in use.")}i.doc=hp;hp.cm=i;af(i);bK(i);D(i);if(!i.options.lineWrapping){f(i)}i.options.mode=hp.modeOption;ap(i)}function D(i){(i.doc.direction=="rtl"?gr:h)(i.display.lineDiv,"CodeMirror-rtl")}function ez(i){dg(i,function(){D(i);ap(i)})}function gQ(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function d3(i,hq){var hp={from:cH(hq.from),to:dr(hq),text:g7(i,hq.from,hq.to)};cl(i,hp,hq.from.line,hq.to.line+1);eI(i,function(hr){return cl(hr,hp,hq.from.line,hq.to.line+1)},true);return hp}function gs(hp){while(hp.length){var i=gx(hp);if(i.ranges){hp.pop()}else{break}}}function fy(hp,i){if(i){gs(hp.done);return gx(hp.done)}else{if(hp.done.length&&!gx(hp.done).ranges){return gx(hp.done)}else{if(hp.done.length>1&&!hp.done[hp.done.length-2].ranges){hp.done.pop();return gx(hp.done)}}}}function gF(hu,hs,i,hr){var hq=hu.history;hq.undone.length=0;var hp=+new Date,hv;var hw;if((hq.lastOp==hr||hq.lastOrigin==hs.origin&&hs.origin&&((hs.origin.charAt(0)=="+"&&hq.lastModTime>hp-(hu.cm?hu.cm.options.historyEventDelay:500))||hs.origin.charAt(0)=="*"))&&(hv=fy(hq,hq.lastOp==hr))){hw=gx(hv.changes);if(cE(hs.from,hs.to)==0&&cE(hs.from,hw.to)==0){hw.to=dr(hs)}else{hv.changes.push(d3(hu,hs))}}else{var ht=gx(hq.done);if(!ht||!ht.ranges){di(hu.sel,hq.done)}hv={changes:[d3(hu,hs)],generation:hq.generation};hq.done.push(hv);while(hq.done.length>hq.undoDepth){hq.done.shift();if(!hq.done[0].ranges){hq.done.shift()}}}hq.done.push(i);hq.generation=++hq.maxGeneration;hq.lastModTime=hq.lastSelTime=hp;hq.lastOp=hq.lastSelOp=hr;hq.lastOrigin=hq.lastSelOrigin=hs.origin;if(!hw){aO(hu,"historyAdded")}}function bU(hs,i,hq,hr){var hp=i.charAt(0);return hp=="*"||hp=="+"&&hq.ranges.length==hr.ranges.length&&hq.somethingSelected()==hr.somethingSelected()&&new Date-hs.history.lastSelTime<=(hs.cm?hs.cm.options.historyEventDelay:500)}function hh(ht,hr,i,hq){var hs=ht.history,hp=hq&&hq.origin;if(i==hs.lastSelOp||(hp&&hs.lastSelOrigin==hp&&(hs.lastModTime==hs.lastSelTime&&hs.lastOrigin==hp||bU(ht,hp,gx(hs.done),hr)))){hs.done[hs.done.length-1]=hr}else{di(hr,hs.done)}hs.lastSelTime=+new Date;hs.lastSelOrigin=hp;hs.lastSelOp=i;if(hq&&hq.clearRedo!==false){gs(hs.undone)}}function di(hp,i){var hq=gx(i);if(!(hq&&hq.ranges&&hq.equals(hp))){i.push(hp)}}function cl(hp,ht,hs,hr){var i=ht["spans_"+hp.id],hq=0;hp.iter(Math.max(hp.first,hs),Math.min(hp.first+hp.size,hr),function(hu){if(hu.markedSpans){(i||(i=ht["spans_"+hp.id]={}))[hq]=hu.markedSpans}++hq})}function by(hr){if(!hr){return null}var hp;for(var hq=0;hq<hr.length;++hq){if(hr[hq].marker.explicitlyCleared){if(!hp){hp=hr.slice(0,hq)}}else{if(hp){hp.push(hr[hq])}}}return !hp?hr:hp.length?hp:null}function cr(hs,ht){var hr=ht["spans_"+hs.id];if(!hr){return null}var hp=[];for(var hq=0;hq<ht.text.length;++hq){hp.push(by(hr[hq]))}return hp}function eK(hx,hv){var hp=cr(hx,hv);var hy=eX(hx,hv);if(!hp){return hy}if(!hy){return hp}for(var hs=0;hs<hp.length;++hs){var ht=hp[hs],hu=hy[hs];if(ht&&hu){spans:for(var hr=0;hr<hu.length;++hr){var hw=hu[hr];for(var hq=0;hq<ht.length;++hq){if(ht[hq].marker==hw.marker){continue spans}}ht.push(hw)}}else{if(hu){hp[hs]=hu}}}return hp}function ca(hA,hs,hz){var hq=[];for(var hv=0;hv<hA.length;++hv){var hr=hA[hv];if(hr.ranges){hq.push(hz?g3.prototype.deepCopy.call(hr):hr);continue}var hx=hr.changes,hy=[];hq.push({changes:hy});for(var hu=0;hu<hx.length;++hu){var hw=hx[hu],ht=(void 0);hy.push({from:hw.from,to:hw.to,text:hw.text});if(hs){for(var hp in hw){if(ht=hp.match(/^spans_(\d+)$/)){if(dQ(hs,Number(ht[1]))>-1){gx(hy)[hp]=hw[hp];delete hw[hp]}}}}}}return hq}function gi(hp,hs,i,ht){if(ht){var hr=hp.anchor;if(i){var hq=cE(hs,hr)<0;if(hq!=(cE(i,hr)<0)){hr=hs;hs=i}else{if(hq!=(cE(hs,i)<0)){hs=i}}}return new ew(hr,hs)}else{return new ew(i||hs,hs)}}function gW(hr,hq,i,hp,hs){if(hs==null){hs=hr.cm&&(hr.cm.display.shift||hr.extend)}cg(hr,new g3([gi(hr.sel.primary(),hq,i,hs)],0),hp)}function aF(hu,ht,hr){var hq=[];var hv=hu.cm&&(hu.cm.display.shift||hu.extend);for(var hs=0;hs<hu.sel.ranges.length;hs++){hq[hs]=gi(hu.sel.ranges[hs],ht[hs],null,hv)}var hp=cY(hq,hu.sel.primIndex);cg(hu,hp,hr)}function e(ht,hs,hq,hr){var hp=ht.sel.ranges.slice(0);hp[hs]=hq;cg(ht,cY(hp,ht.sel.primIndex),hr)}function J(hr,hp,hq,i){cg(hr,fD(hp,hq),i)}function b(hr,hp,i){var hq={ranges:hp.ranges,update:function(hs){var hu=this;this.ranges=[];for(var ht=0;ht<hs.length;ht++){hu.ranges[ht]=new ew(gC(hr,hs[ht].anchor),gC(hr,hs[ht].head))}},origin:i&&i.origin};aO(hr,"beforeSelectionChange",hr,hq);if(hr.cm){aO(hr.cm,"beforeSelectionChange",hr.cm,hq)}if(hq.ranges!=hp.ranges){return cY(hq.ranges,hq.ranges.length-1)}else{return hp}}function fW(hs,hr,hp){var i=hs.history.done,hq=gx(i);if(hq&&hq.ranges){i[i.length-1]=hr;e3(hs,hr,hp)}else{cg(hs,hr,hp)}}function cg(hq,hp,i){e3(hq,hp,i);hh(hq,hq.sel,hq.cm?hq.cm.curOp.id:NaN,i)}function e3(hr,hq,hp){if(f8(hr,"beforeSelectionChange")||hr.cm&&f8(hr.cm,"beforeSelectionChange")){hq=b(hr,hq,hp)}var i=hp&&hp.bias||(cE(hq.primary().head,hr.sel.primary().head)<0?-1:1);dE(hr,p(hr,hq,i,true));if(!(hp&&hp.scroll===false)&&hr.cm){gw(hr.cm)}}function dE(hp,i){if(i.equals(hp.sel)){return}hp.sel=i;if(hp.cm){hp.cm.curOp.updateInput=hp.cm.curOp.selectionChanged=true;ab(hp.cm)}am(hp,"cursorActivity",hp)}function fe(i){dE(i,p(i,i.sel,null,false))}function p(hy,hp,hv,hw){var hs;for(var ht=0;ht<hp.ranges.length;ht++){var hu=hp.ranges[ht];var hq=hp.ranges.length==hy.sel.ranges.length&&hy.sel.ranges[ht];var hx=ch(hy,hu.anchor,hq&&hq.anchor,hv,hw);var hr=ch(hy,hu.head,hq&&hq.head,hv,hw);if(hs||hx!=hu.anchor||hr!=hu.head){if(!hs){hs=hp.ranges.slice(0,ht)}hs[ht]=new ew(hx,hr)}}return hs?cY(hs,hp.primIndex):hp}function ft(hz,hx,hs,hr,hv){var hA=f3(hz,hx.line);if(hA.markedSpans){for(var ht=0;ht<hA.markedSpans.length;++ht){var hp=hA.markedSpans[ht],hq=hp.marker;if((hp.from==null||(hq.inclusiveLeft?hp.from<=hx.ch:hp.from<hx.ch))&&(hp.to==null||(hq.inclusiveRight?hp.to>=hx.ch:hp.to>hx.ch))){if(hv){aO(hq,"beforeCursorEnter");if(hq.explicitlyCleared){if(!hA.markedSpans){break}else{--ht;continue}}}if(!hq.atomic){continue}if(hs){var hw=hq.find(hr<0?1:-1),hy=(void 0);if(hr<0?hq.inclusiveRight:hq.inclusiveLeft){hw=hl(hz,hw,-hr,hw&&hw.line==hx.line?hA:null)}if(hw&&hw.line==hx.line&&(hy=cE(hw,hs))&&(hr<0?hy<0:hy>0)){return ft(hz,hw,hx,hr,hv)}}var hu=hq.find(hr<0?-1:1);if(hr<0?hq.inclusiveLeft:hq.inclusiveRight){hu=hl(hz,hu,hr,hu.line==hx.line?hA:null)}return hu?ft(hz,hu,hx,hr,hv):null}}}return hx}function ch(ht,hu,hr,hp,i){var hq=hp||1;var hs=ft(ht,hu,hr,hq,i)||(!i&&ft(ht,hu,hr,hq,true))||ft(ht,hu,hr,-hq,i)||(!i&&ft(ht,hu,hr,-hq,true));if(!hs){ht.cantEdit=true;return ac(ht.first,0)}return hs}function hl(hq,hr,hp,i){if(hp<0&&hr.ch==0){if(hr.line>hq.first){return gC(hq,ac(hr.line-1))}else{return null}}else{if(hp>0&&hr.ch==(i||f3(hq,hr.line)).text.length){if(hr.line<hq.first+hq.size-1){return ac(hr.line+1,0)}else{return null}}else{return new ac(hr.line,hr.ch+hp)}}}function av(i){i.setSelection(ac(i.firstLine(),0),ac(i.lastLine()),ah)}function eo(hp,hr,hq){var i={canceled:false,from:hr.from,to:hr.to,text:hr.text,origin:hr.origin,cancel:function(){return i.canceled=true}};if(hq){i.update=function(hv,hu,ht,hs){if(hv){i.from=gC(hp,hv)}if(hu){i.to=gC(hp,hu)}if(ht){i.text=ht}if(hs!==undefined){i.origin=hs}}}aO(hp,"beforeChange",hp,i);if(hp.cm){aO(hp.cm,"beforeChange",hp.cm,i)}if(i.canceled){return null}return{from:i.from,to:i.to,text:i.text,origin:i.origin}}function bt(hs,ht,hr){if(hs.cm){if(!hs.cm.curOp){return dv(hs.cm,bt)(hs,ht,hr)}if(hs.cm.state.suppressEdits){return}}if(f8(hs,"beforeChange")||hs.cm&&f8(hs.cm,"beforeChange")){ht=eo(hs,ht,true);if(!ht){return}}var hq=hj&&!hr&&db(hs,ht.from,ht.to);if(hq){for(var hp=hq.length-1;hp>=0;--hp){P(hs,{from:hq[hp].from,to:hq[hp].to,text:hp?[""]:ht.text,origin:ht.origin})}}else{P(hs,ht)}}function P(hq,hr){if(hr.text.length==1&&hr.text[0]==""&&cE(hr.from,hr.to)==0){return}var hp=f7(hq,hr);gF(hq,hr,hp,hq.cm?hq.cm.curOp.id:NaN);eP(hq,hr,hp,eX(hq,hr));var i=[];eI(hq,function(ht,hs){if(!hs&&dQ(i,ht.history)==-1){ea(ht.history,hr);i.push(ht.history)}eP(ht,hr,null,eX(ht,hr))})}function cv(hC,hz,hD){var hA=hC.cm&&hC.cm.state.suppressEdits;if(hA&&!hD){return}var hy=hC.history,hq,hs=hC.sel;var hp=hz=="undo"?hy.done:hy.undone,hB=hz=="undo"?hy.undone:hy.done;var hv=0;for(;hv<hp.length;hv++){hq=hp[hv];if(hD?hq.ranges&&!hq.equals(hC.sel):!hq.ranges){break}}if(hv==hp.length){return}hy.lastOrigin=hy.lastSelOrigin=null;for(;;){hq=hp.pop();if(hq.ranges){di(hq,hB);if(hD&&!hq.equals(hC.sel)){cg(hC,hq,{clearRedo:false});return}hs=hq}else{if(hA){hp.push(hq);return}else{break}}}var hx=[];di(hs,hB);hB.push({changes:hx,generation:hy.generation});hy.generation=hq.generation||++hy.maxGeneration;var hr=f8(hC,"beforeChange")||hC.cm&&f8(hC.cm,"beforeChange");var hw=function(hE){var hH=hq.changes[hE];hH.origin=hz;if(hr&&!eo(hC,hH,false)){hp.length=0;return{}}hx.push(d3(hC,hH));var hG=hE?f7(hC,hH):gx(hp);eP(hC,hH,hG,eK(hC,hH));if(!hE&&hC.cm){hC.cm.scrollIntoView({from:hH.from,to:dr(hH)})}var hF=[];eI(hC,function(hI,i){if(!i&&dQ(hF,hI.history)==-1){ea(hI.history,hH);hF.push(hI.history)}eP(hI,hH,null,eK(hI,hH))})};for(var ht=hq.changes.length-1;ht>=0;--ht){var hu=hw(ht);if(hu){return hu.v}}}function gb(hp,hr){if(hr==0){return}hp.first+=hr;hp.sel=new g3(cf(hp.sel.ranges,function(hs){return new ew(ac(hs.anchor.line+hr,hs.anchor.ch),ac(hs.head.line+hr,hs.head.ch))}),hp.sel.primIndex);if(hp.cm){ap(hp.cm,hp.first,hp.first-hr,hr);for(var hq=hp.cm.display,i=hq.viewFrom;i<hq.viewTo;i++){W(hp.cm,i,"gutter")}}}function eP(hs,ht,hr,hp){if(hs.cm&&!hs.cm.curOp){return dv(hs.cm,eP)(hs,ht,hr,hp)}if(ht.to.line<hs.first){gb(hs,ht.text.length-1-(ht.to.line-ht.from.line));return}if(ht.from.line>hs.lastLine()){return}if(ht.from.line<hs.first){var i=ht.text.length-1-(hs.first-ht.from.line);gb(hs,i);ht={from:ac(hs.first,0),to:ac(ht.to.line+i,ht.to.ch),text:[gx(ht.text)],origin:ht.origin}}var hq=hs.lastLine();if(ht.to.line>hq){ht={from:ht.from,to:ac(hq,f3(hs,hq).text.length),text:[ht.text[0]],origin:ht.origin}}ht.removed=g7(hs,ht.from,ht.to);if(!hr){hr=f7(hs,ht)}if(hs.cm){aT(hs.cm,ht,hp)}else{gn(hs,ht,hp)}e3(hs,hr,ah)}function aT(hz,hv,ht){var hy=hz.doc,hu=hz.display,hw=hv.from,hx=hv.to;var i=false,hs=hw.line;if(!hz.options.lineWrapping){hs=b8(z(f3(hy,hw.line)));hy.iter(hs,hx.line+1,function(hB){if(hB==hu.maxLine){i=true;return true}})}if(hy.sel.contains(hv.from,hv.to)>-1){ab(hz)}gn(hy,hv,ht,br(hz));if(!hz.options.lineWrapping){hy.iter(hs,hw.line+hv.text.length,function(hC){var hB=e0(hC);if(hB>hu.maxLineLength){hu.maxLine=hC;hu.maxLineLength=hB;hu.maxLineChanged=true;i=false}});if(i){hz.curOp.updateMaxLine=true}}hi(hy,hw.line);eQ(hz,400);var hA=hv.text.length-(hx.line-hw.line)-1;if(hv.full){ap(hz)}else{if(hw.line==hx.line&&hv.text.length==1&&!eq(hz.doc,hv)){W(hz,hw.line,"text")}else{ap(hz,hw.line,hx.line+1,hA)}}var hq=f8(hz,"changes"),hr=f8(hz,"change");if(hr||hq){var hp={from:hw,to:hx,text:hv.text,removed:hv.removed,origin:hv.origin};if(hr){am(hz,"change",hz,hp)}if(hq){(hz.curOp.changeObjs||(hz.curOp.changeObjs=[])).push(hp)}}hz.display.selForContextMenu=null}function be(hr,hq,ht,hs,hp){if(!hs){hs=ht}if(cE(hs,ht)<0){var i;(i=[hs,ht],ht=i[0],hs=i[1],i)}if(typeof hq=="string"){hq=hr.splitLines(hq)}bt(hr,{from:ht,to:hs,text:hq,origin:hp})}function M(hr,hq,hp,i){if(hp<hr.line){hr.line+=i}else{if(hq<hr.line){hr.line=hq;hr.ch=0}}}function f5(ht,hv,hw,hx){for(var hs=0;hs<ht.length;++hs){var hp=ht[hs],hu=true;if(hp.ranges){if(!hp.copied){hp=ht[hs]=hp.deepCopy();hp.copied=true}for(var hr=0;hr<hp.ranges.length;hr++){M(hp.ranges[hr].anchor,hv,hw,hx);M(hp.ranges[hr].head,hv,hw,hx)}continue}for(var hq=0;hq<hp.changes.length;++hq){var hy=hp.changes[hq];if(hw<hy.from.line){hy.from=ac(hy.from.line+hx,hy.from.ch);hy.to=ac(hy.to.line+hx,hy.to.ch)}else{if(hv<=hy.to.line){hu=false;break}}}if(!hu){ht.splice(0,hs+1);hs=0}}}function ea(hp,hs){var hr=hs.from.line,hq=hs.to.line,i=hs.text.length-(hq-hr)-1;f5(hp.done,hr,hq,i);f5(hp.undone,hr,hq,i)}function fh(hr,hq,i,ht){var hs=hq,hp=hq;if(typeof hq=="number"){hp=f3(hr,dz(hr,hq))}else{hs=b8(hq)}if(hs==null){return null}if(ht(hp,hs)&&hr.cm){W(hr.cm,hs,i)}return hp}function fN(hq){var hs=this;this.lines=hq;this.parent=null;var hp=0;for(var hr=0;hr<hq.length;++hr){hq[hr].parent=hs;hp+=hq[hr].height}this.height=hp}fN.prototype={chunkSize:function X(){return this.lines.length},removeInner:function O(hp,hu){var ht=this;for(var hr=hp,hs=hp+hu;hr<hs;++hr){var hq=ht.lines[hr];ht.height-=hq.height;bV(hq);am(hq,"delete")}this.lines.splice(hp,hu)},collapse:function gj(i){i.push.apply(i,this.lines)},insertInner:function a2(hq,hr,hp){var ht=this;this.height+=hp;this.lines=this.lines.slice(0,hq).concat(hr).concat(this.lines.slice(hq));for(var hs=0;hs<hr.length;++hs){hr[hs].parent=ht}},iterN:function g5(i,hs,hr){var hq=this;for(var hp=i+hs;i<hp;++i){if(hr(hq.lines[i])){return true}}}};function gm(hs){var hu=this;this.children=hs;var hr=0,hp=0;for(var hq=0;hq<hs.length;++hq){var ht=hs[hq];hr+=ht.chunkSize();hp+=ht.height;ht.parent=hu}this.size=hr;this.height=hp;this.parent=null}gm.prototype={chunkSize:function X(){return this.size},removeInner:function O(hr,hq){var ht=this;this.size-=hq;for(var hs=0;hs<this.children.length;++hs){var hp=ht.children[hs],hv=hp.chunkSize();if(hr<hv){var hu=Math.min(hq,hv-hr),hw=hp.height;hp.removeInner(hr,hu);ht.height-=hw-hp.height;if(hv==hu){ht.children.splice(hs--,1);hp.parent=null}if((hq-=hu)==0){break}hr=0}else{hr-=hv}}if(this.size-hq<25&&(this.children.length>1||!(this.children[0] instanceof fN))){var hx=[];this.collapse(hx);this.children=[new fN(hx)];this.children[0].parent=this}},collapse:function gj(hp){var hr=this;for(var hq=0;hq<this.children.length;++hq){hr.children[hq].collapse(hp)}},insertInner:function a2(hq,hy,hx){var ht=this;this.size+=hy.length;this.height+=hx;for(var hs=0;hs<this.children.length;++hs){var hp=ht.children[hs],hv=hp.chunkSize();if(hq<=hv){hp.insertInner(hq,hy,hx);if(hp.lines&&hp.lines.length>50){var hr=hp.lines.length%25+25;for(var hw=hr;hw<hp.lines.length;){var hu=new fN(hp.lines.slice(hw,hw+=25));hp.height-=hu.height;ht.children.splice(++hs,0,hu);hu.parent=ht}hp.lines=hp.lines.slice(0,hr);ht.maybeSpill()}break}hq-=hv}},maybeSpill:function e8(){if(this.children.length<=10){return}var hr=this;do{var hp=hr.children.splice(hr.children.length-5,5);var hq=new gm(hp);if(!hr.parent){var hs=new gm(hr.children);hs.parent=hr;hr.children=[hs,hq];hr=hs}else{hr.size-=hq.size;hr.height-=hq.height;var i=dQ(hr.parent.children,hr);hr.parent.children.splice(i+1,0,hq)}hq.parent=hr.parent}while(hr.children.length>10);hr.parent.maybeSpill()},iterN:function g5(hp,hw,hv){var hu=this;for(var hq=0;hq<this.children.length;++hq){var ht=hu.children[hq],hs=ht.chunkSize();if(hp<hs){var hr=Math.min(hw,hs-hp);if(ht.iterN(hp,hr,hv)){return true}if((hw-=hr)==0){break}hp=0}else{hp-=hs}}}};var d8=function(hr,hq,i){var hs=this;if(i){for(var hp in i){if(i.hasOwnProperty(hp)){hs[hp]=i[hp]}}}this.doc=hr;this.node=hq};d8.prototype.clear=function(){var hv=this;var hq=this.doc.cm,hs=this.line.widgets,hr=this.line,hu=b8(hr);if(hu==null||!hs){return}for(var ht=0;ht<hs.length;++ht){if(hs[ht]==hv){hs.splice(ht--,1)}}if(!hs.length){hr.widgets=null}var hp=ds(this);ha(hr,Math.max(0,hr.height-hp));if(hq){dg(hq,function(){ey(hq,hr,-hp);W(hq,hu,"widget")});am(hq,"lineWidgetCleared",hq,this,hu)}};d8.prototype.changed=function(){var hs=this;var hp=this.height,i=this.doc.cm,hq=this.line;this.height=null;var hr=ds(this)-hp;if(!hr){return}ha(hq,hq.height+hr);if(i){dg(i,function(){i.curOp.forceUpdate=true;ey(i,hq,hr);am(i,"lineWidgetChanged",i,hs,b8(hq))})}};bT(d8);function ey(i,hp,hq){if(b7(hp)<((i.curOp&&i.curOp.scrollTop)||i.doc.scrollTop)){da(i,hq)}}function b0(ht,hs,hq,hp){var hr=new d8(ht,hq,hp);var i=ht.cm;if(i&&hr.noHScroll){i.display.alignWidgets=true}fh(ht,hs,"widget",function(hv){var hw=hv.widgets||(hv.widgets=[]);if(hr.insertAt==null){hw.push(hr)}else{hw.splice(Math.min(hw.length-1,Math.max(0,hr.insertAt)),0,hr)}hr.line=hv;if(i&&!gk(ht,hv)){var hu=b7(hv)<ht.scrollTop;ha(hv,hv.height+ds(hr));if(hu){da(i,hr.height)}i.curOp.forceUpdate=true}return true});if(i){am(i,"lineWidgetAdded",i,hr,typeof hs=="number"?hs:b8(hs))}return hr}var bh=0;var V=function(hp,i){this.lines=[];this.type=i;this.doc=hp;this.id=++bh};V.prototype.clear=function(){var hu=this;if(this.explicitlyCleared){return}var hy=this.doc.cm,hr=hy&&!hy.curOp;if(hr){dc(hy)}if(f8(this,"clear")){var hz=this.find();if(hz){am(this,"clear",hz.from,hz.to)}}var hs=null,hw=null;for(var ht=0;ht<this.lines.length;++ht){var hA=hu.lines[ht];var hx=fY(hA.markedSpans,hu);if(hy&&!hu.collapsed){W(hy,b8(hA),"text")}else{if(hy){if(hx.to!=null){hw=b8(hA)}if(hx.from!=null){hs=b8(hA)}}}hA.markedSpans=fr(hA.markedSpans,hx);if(hx.from==null&&hu.collapsed&&!gk(hu.doc,hA)&&hy){ha(hA,bb(hy.display))}}if(hy&&this.collapsed&&!hy.options.lineWrapping){for(var hq=0;hq<this.lines.length;++hq){var hp=z(hu.lines[hq]),hv=e0(hp);if(hv>hy.display.maxLineLength){hy.display.maxLine=hp;hy.display.maxLineLength=hv;hy.display.maxLineChanged=true}}}if(hs!=null&&hy&&this.collapsed){ap(hy,hs,hw+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(hy){fe(hy.doc)}}if(hy){am(hy,"markerCleared",hy,this,hs,hw)}if(hr){aw(hy)}if(this.parent){this.parent.clear()}};V.prototype.find=function(hs,hq){var hw=this;if(hs==null&&this.type=="bookmark"){hs=1}var hv,hu;for(var hr=0;hr<this.lines.length;++hr){var hp=hw.lines[hr];var ht=fY(hp.markedSpans,hw);if(ht.from!=null){hv=ac(hq?hp:b8(hp),ht.from);if(hs==-1){return hv}}if(ht.to!=null){hu=ac(hq?hp:b8(hp),ht.to);if(hs==1){return hu}}}return hv&&{from:hv,to:hu}};V.prototype.changed=function(){var hr=this;var hq=this.find(-1,true),hp=this,i=this.doc.cm;if(!hq||!i){return}dg(i,function(){var ht=hq.line,hu=b8(hq.line);var hs=f0(i,hu);if(hs){aE(hs);i.curOp.selectionChanged=i.curOp.forceUpdate=true}i.curOp.updateMaxLine=true;if(!gk(hp.doc,ht)&&hp.height!=null){var hw=hp.height;hp.height=null;var hv=ds(hp)-hw;if(hv){ha(ht,ht.height+hv)}}am(i,"markerChanged",i,hr)})};V.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var hp=this.doc.cm.curOp;if(!hp.maybeHiddenMarkers||dQ(hp.maybeHiddenMarkers,this)==-1){(hp.maybeUnhiddenMarkers||(hp.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(i)};V.prototype.detachLine=function(i){this.lines.splice(dQ(this.lines,i),1);if(!this.lines.length&&this.doc.cm){var hp=this.doc.cm.curOp;(hp.maybeHiddenMarkers||(hp.maybeHiddenMarkers=[])).push(this)}};bT(V);function fo(hx,hv,hw,hz,ht){if(hz&&hz.shared){return S(hx,hv,hw,hz,ht)}if(hx.cm&&!hx.cm.curOp){return dv(hx.cm,fo)(hx,hv,hw,hz,ht)}var hs=new V(hx,ht),hy=cE(hv,hw);if(hz){aZ(hz,hs,false)}if(hy>0||hy==0&&hs.clearWhenEmpty!==false){return hs}if(hs.replacedWith){hs.collapsed=true;hs.widgetNode=hb("span",[hs.replacedWith],"CodeMirror-widget");if(!hz.handleMouseEvents){hs.widgetNode.setAttribute("cm-ignore-events","true")}if(hz.insertLeft){hs.widgetNode.insertLeft=true}}if(hs.collapsed){if(A(hx,hv.line,hv,hw,hs)||hv.line!=hw.line&&A(hx,hw.line,hv,hw,hs)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}bQ()}if(hs.addToHistory){gF(hx,{from:hv,to:hw,origin:"markText"},hx.sel,NaN)}var hq=hv.line,hu=hx.cm,hp;hx.iter(hq,hw.line+1,function(i){if(hu&&hs.collapsed&&!hu.options.lineWrapping&&z(i)==hu.display.maxLine){hp=true}if(hs.collapsed&&hq!=hv.line){ha(i,0)}cC(i,new eV(hs,hq==hv.line?hv.ch:null,hq==hw.line?hw.ch:null));++hq});if(hs.collapsed){hx.iter(hv.line,hw.line+1,function(i){if(gk(hx,i)){ha(i,0)}})}if(hs.clearOnEnter){cj(hs,"beforeCursorEnter",function(){return hs.clear()})}if(hs.readOnly){gp();if(hx.history.done.length||hx.history.undone.length){hx.clearHistory()}}if(hs.collapsed){hs.id=++bh;hs.atomic=true}if(hu){if(hp){hu.curOp.updateMaxLine=true}if(hs.collapsed){ap(hu,hv.line,hw.line+1)}else{if(hs.className||hs.title||hs.startStyle||hs.endStyle||hs.css){for(var hr=hv.line;hr<=hw.line;hr++){W(hu,hr,"text")}}}if(hs.atomic){fe(hu.doc)}am(hu,"markerAdded",hu,hs)}return hs}var y=function(hr,hq){var hs=this;this.markers=hr;this.primary=hq;for(var hp=0;hp<hr.length;++hp){hr[hp].parent=hs}};y.prototype.clear=function(){var hq=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var hp=0;hp<this.markers.length;++hp){hq.markers[hp].clear()}am(this,"clear")};y.prototype.find=function(hp,i){return this.primary.find(hp,i)};bT(y);function S(hs,hv,hu,i,hq){i=aZ(i);i.shared=false;var ht=[fo(hs,hv,hu,i,hq)],hp=ht[0];var hr=i.widgetNode;eI(hs,function(hx){if(hr){i.widgetNode=hr.cloneNode(true)}ht.push(fo(hx,gC(hx,hv),gC(hx,hu),i,hq));for(var hw=0;hw<hx.linked.length;++hw){if(hx.linked[hw].isParent){return}}hp=gx(ht)});return new y(ht,hp)}function fA(i){return i.findMarks(ac(i.first,0),i.clipPos(ac(i.lastLine())),function(hp){return hp.parent})}function eb(hu,hv){for(var hs=0;hs<hv.length;hs++){var hq=hv[hs],hw=hq.find();var hp=hu.clipPos(hw.from),ht=hu.clipPos(hw.to);if(cE(hp,ht)){var hr=fo(hu,hp,ht,hq.primary,hq.primary.type);hq.markers.push(hr);hr.parent=hq}}}function e2(hr){var hp=function(hu){var hs=hr[hu],hw=[hs.primary.doc];eI(hs.primary.doc,function(i){return hw.push(i)});for(var ht=0;ht<hs.markers.length;ht++){var hv=hs.markers[ht];if(dQ(hw,hv.doc)==-1){hv.parent=null;hs.markers.splice(ht--,1)}}};for(var hq=0;hq<hr.length;hq++){hp(hq)}}var cT=0;var aD=function(hs,hr,i,hq,hp){if(!(this instanceof aD)){return new aD(hs,hr,i,hq,hp)}if(i==null){i=0}gm.call(this,[new fN([new g9("",null)])]);this.first=i;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=i;var ht=ac(i,0);this.sel=fD(ht);this.history=new gQ(null);this.id=++cT;this.modeOption=hr;this.lineSep=hq;this.direction=(hp=="rtl")?"rtl":"ltr";this.extend=false;if(typeof hs=="string"){hs=this.splitLines(hs)}gn(this,{from:ht,to:ht,text:hs});cg(this,fD(ht),ah)};aD.prototype=cL(gm.prototype,{constructor:aD,iter:function(hq,hp,i){if(i){this.iterN(hq-this.first,hp-hq,i)}else{this.iterN(this.first,this.first+this.size,hq)}},insert:function(hq,hr){var hp=0;for(var hs=0;hs<hr.length;++hs){hp+=hr[hs].height}this.insertInner(hq-this.first,hr,hp)},remove:function(i,hp){this.removeInner(i-this.first,hp)},getValue:function(hp){var i=bf(this,this.first,this.first+this.size);if(hp===false){return i}return i.join(hp||this.lineSeparator())},setValue:c6(function(hp){var hq=ac(this.first,0),i=this.first+this.size-1;bt(this,{from:hq,to:ac(i,f3(this,i).text.length),text:this.splitLines(hp),origin:"setValue",full:true},true);if(this.cm){fx(this.cm,0,0)}cg(this,fD(hq),ah)}),replaceRange:function(hp,hr,hq,i){hr=gC(this,hr);hq=hq?gC(this,hq):hr;be(this,hp,hr,hq,i)},getRange:function(hr,hq,hp){var i=g7(this,gC(this,hr),gC(this,hq));if(hp===false){return i}return i.join(hp||this.lineSeparator())},getLine:function(hp){var i=this.getLineHandle(hp);return i&&i.text},getLineHandle:function(i){if(cw(this,i)){return f3(this,i)}},getLineNumber:function(i){return b8(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=f3(this,i)}return z(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return gC(this,i)},getCursor:function(hq){var i=this.sel.primary(),hp;if(hq==null||hq=="head"){hp=i.head}else{if(hq=="anchor"){hp=i.anchor}else{if(hq=="end"||hq=="to"||hq===false){hp=i.to()}else{hp=i.from()}}}return hp},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:c6(function(i,hq,hp){J(this,gC(this,typeof i=="number"?ac(i,hq||0):i),null,hp)}),setSelection:c6(function(hp,hq,i){J(this,gC(this,hp),gC(this,hq||hp),i)}),extendSelection:c6(function(hq,i,hp){gW(this,gC(this,hq),i&&gC(this,i),hp)}),extendSelections:c6(function(hp,i){aF(this,eA(this,hp),i)}),extendSelectionsBy:c6(function(hq,i){var hp=cf(this.sel.ranges,hq);aF(this,eA(this,hp),i)}),setSelections:c6(function(hp,ht,hr){var hu=this;if(!hp.length){return}var hq=[];for(var hs=0;hs<hp.length;hs++){hq[hs]=new ew(gC(hu,hp[hs].anchor),gC(hu,hp[hs].head))}if(ht==null){ht=Math.min(hp.length-1,this.sel.primIndex)}cg(this,cY(hq,ht),hr)}),addSelection:c6(function(hq,hr,hp){var i=this.sel.ranges.slice(0);i.push(new ew(gC(this,hq),gC(this,hr||hq)));cg(this,cY(i,i.length-1),hp)}),getSelection:function(ht){var hu=this;var hq=this.sel.ranges,hp;for(var hr=0;hr<hq.length;hr++){var hs=g7(hu,hq[hr].from(),hq[hr].to());hp=hp?hp.concat(hs):hs}if(ht===false){return hp}else{return hp.join(ht||this.lineSeparator())}},getSelections:function(ht){var hu=this;var hs=[],hp=this.sel.ranges;for(var hq=0;hq<hp.length;hq++){var hr=g7(hu,hp[hq].from(),hp[hq].to());if(ht!==false){hr=hr.join(ht||hu.lineSeparator())}hs[hq]=hr}return hs},replaceSelection:function(hr,ht,hp){var hs=[];for(var hq=0;hq<this.sel.ranges.length;hq++){hs[hq]=hr}this.replaceSelections(hs,ht,hp||"+input")},replaceSelections:c6(function(hq,hw,hy){var hu=this;var hx=[],hs=this.sel;for(var ht=0;ht<hs.ranges.length;ht++){var hv=hs.ranges[ht];hx[ht]={from:hv.from(),to:hv.to(),text:hu.splitLines(hq[ht]),origin:hy}}var hp=hw&&hw!="end"&&an(this,hx,hw);for(var hr=hx.length-1;hr>=0;hr--){bt(hu,hx[hr])}if(hp){fW(this,hp)}else{if(this.cm){gw(this.cm)}}}),undo:c6(function(){cv(this,"undo")}),redo:c6(function(){cv(this,"redo")}),undoSelection:c6(function(){cv(this,"undo",true)}),redoSelection:c6(function(){cv(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var hs=this.history,hp=0,hr=0;for(var hq=0;hq<hs.done.length;hq++){if(!hs.done[hq].ranges){++hp}}for(var ht=0;ht<hs.undone.length;ht++){if(!hs.undone[ht].ranges){++hr}}return{undo:hp,redo:hr}},clearHistory:function(){this.history=new gQ(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:ca(this.history.done),undone:ca(this.history.undone)}},setHistory:function(hp){var i=this.history=new gQ(this.history.maxGeneration);i.done=ca(hp.done.slice(0),null,true);i.undone=ca(hp.undone.slice(0),null,true)},setGutterMarker:c6(function(i,hp,hq){return fh(this,i,"gutter",function(hr){var hs=hr.gutterMarkers||(hr.gutterMarkers={});hs[hp]=hq;if(!hq&&fH(hs)){hr.gutterMarkers=null}return true})}),clearGutter:c6(function(i){var hp=this;this.iter(function(hq){if(hq.gutterMarkers&&hq.gutterMarkers[i]){fh(hp,hq,"gutter",function(){hq.gutterMarkers[i]=null;if(fH(hq.gutterMarkers)){hq.gutterMarkers=null}return true})}})}),lineInfo:function(i){var hp;if(typeof i=="number"){if(!cw(this,i)){return null}hp=i;i=f3(this,i);if(!i){return null}}else{hp=b8(i);if(hp==null){return null}}return{line:hp,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:c6(function(hq,hp,i){return fh(this,hq,hp=="gutter"?"gutter":"class",function(hr){var hs=hp=="text"?"textClass":hp=="background"?"bgClass":hp=="gutter"?"gutterClass":"wrapClass";if(!hr[hs]){hr[hs]=i}else{if(Y(i).test(hr[hs])){return false}else{hr[hs]+=" "+i}}return true})}),removeLineClass:c6(function(hq,hp,i){return fh(this,hq,hp=="gutter"?"gutter":"class",function(hs){var hv=hp=="text"?"textClass":hp=="background"?"bgClass":hp=="gutter"?"gutterClass":"wrapClass";var hu=hs[hv];if(!hu){return false}else{if(i==null){hs[hv]=null}else{var ht=hu.match(Y(i));if(!ht){return false}var hr=ht.index+ht[0].length;hs[hv]=hu.slice(0,ht.index)+(!ht.index||hr==hu.length?"":" ")+hu.slice(hr)||null}}return true})}),addLineWidget:c6(function(hq,hp,i){return b0(this,hq,hp,i)}),removeLineWidget:function(i){i.clear()},markText:function(hq,hp,i){return fo(this,gC(this,hq),gC(this,hp),i,i&&i.type||"range")},setBookmark:function(hq,i){var hp={replacedWith:i&&(i.nodeType==null?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:false,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};hq=gC(this,hq);return fo(this,hq,hq,hp,"bookmark")},findMarksAt:function(ht){ht=gC(this,ht);var hs=[],hq=f3(this,ht.line).markedSpans;if(hq){for(var hp=0;hp<hq.length;++hp){var hr=hq[hp];if((hr.from==null||hr.from<=ht.ch)&&(hr.to==null||hr.to>=ht.ch)){hs.push(hr.marker.parent||hr.marker)}}}return hs},findMarks:function(hs,hr,i){hs=gC(this,hs);hr=gC(this,hr);var hp=[],hq=hs.line;this.iter(hs.line,hr.line+1,function(ht){var hv=ht.markedSpans;if(hv){for(var hu=0;hu<hv.length;hu++){var hw=hv[hu];if(!(hw.to!=null&&hq==hs.line&&hs.ch>=hw.to||hw.from==null&&hq!=hs.line||hw.from!=null&&hq==hr.line&&hw.from>=hr.ch)&&(!i||i(hw.marker))){hp.push(hw.marker.parent||hw.marker)}}}++hq});return hp},getAllMarks:function(){var i=[];this.iter(function(hq){var hp=hq.markedSpans;if(hp){for(var hr=0;hr<hp.length;++hr){if(hp[hr].from!=null){i.push(hp[hr].marker)}}}});return i},posFromIndex:function(hq){var i,hr=this.first,hp=this.lineSeparator().length;this.iter(function(hs){var ht=hs.text.length+hp;if(ht>hq){i=hq;return true}hq-=ht;++hr});return gC(this,ac(hr,i))},indexFromPos:function(hq){hq=gC(this,hq);var i=hq.ch;if(hq.line<this.first||hq.ch<0){return 0}var hp=this.lineSeparator().length;this.iter(this.first,hq.line,function(hr){i+=hr.text.length+hp});return i},copy:function(i){var hp=new aD(bf(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);hp.scrollTop=this.scrollTop;hp.scrollLeft=this.scrollLeft;hp.sel=this.sel;hp.extend=false;if(i){hp.history.undoDepth=this.history.undoDepth;hp.setHistory(this.getHistory())}return hp},linkedDoc:function(i){if(!i){i={}}var hr=this.first,hq=this.first+this.size;if(i.from!=null&&i.from>hr){hr=i.from}if(i.to!=null&&i.to<hq){hq=i.to}var hp=new aD(bf(this,hr,hq),i.mode||this.modeOption,hr,this.lineSep,this.direction);if(i.sharedHist){hp.history=this.history}(this.linked||(this.linked=[])).push({doc:hp,sharedHist:i.sharedHist});hp.linked=[{doc:this,isParent:true,sharedHist:i.sharedHist}];eb(hp,fA(this));return hp},unlinkDoc:function(hq){var ht=this;if(hq instanceof K){hq=hq.doc}if(this.linked){for(var hr=0;hr<this.linked.length;++hr){var hs=ht.linked[hr];if(hs.doc!=hq){continue}ht.linked.splice(hr,1);hq.unlinkDoc(ht);e2(fA(ht));break}}if(hq.history==this.history){var hp=[hq.id];eI(hq,function(i){return hp.push(i.id)},true);hq.history=new gQ(null);hq.history.done=ca(this.history.done,hp);hq.history.undone=ca(this.history.undone,hp)}},iterLinkedDocs:function(i){eI(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return gN(i)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:c6(function(i){if(i!="rtl"){i="ltr"}if(i==this.direction){return}this.direction=i;this.iter(function(hp){return hp.order=null});if(this.cm){ez(this.cm)}})});aD.prototype.eachLine=aD.prototype.iter;var ao=0;function bx(hx){var hz=this;dI(hz);if(a4(hz,hx)||bo(hz.display,hx)){return}c8(hx);if(eh){ao=+new Date}var hy=cP(hz,hx,true),hq=hx.dataTransfer.files;if(!hy||hz.isReadOnly()){return}if(hq&&hq.length&&window.FileReader&&window.File){var ht=hq.length,hA=Array(ht),hr=0;var hv=function(hD,hC){if(hz.options.allowDropFileTypes&&dQ(hz.options.allowDropFileTypes,hD.type)==-1){return}var hB=new FileReader;hB.onload=dv(hz,function(){var i=hB.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(i)){i=""}hA[hC]=i;if(++hr==ht){hy=gC(hz.doc,hy);var hE={from:hy,to:hy,text:hz.doc.splitLines(hA.join(hz.doc.lineSeparator())),origin:"paste"};bt(hz.doc,hE);fW(hz.doc,fD(hy,dr(hE)))}});hB.readAsText(hD)};for(var hw=0;hw<ht;++hw){hv(hq[hw],hw)}}else{if(hz.state.draggingText&&hz.doc.sel.contains(hy)>-1){hz.state.draggingText(hx);setTimeout(function(){return hz.display.input.focus()},20);return}try{var hp=hx.dataTransfer.getData("Text");if(hp){var hu;if(hz.state.draggingText&&!hz.state.draggingText.copy){hu=hz.listSelections()}e3(hz.doc,fD(hy,hy));if(hu){for(var hs=0;hs<hu.length;++hs){be(hz.doc,"",hu[hs].anchor,hu[hs].head,"drag")}}hz.replaceSelection(hp,"around","paste");hz.display.input.focus()}}catch(hx){}}}function U(i,hq){if(eh&&(!i.state.draggingText||+new Date-ao<100)){e5(hq);return}if(a4(i,hq)||bo(i.display,hq)){return}hq.dataTransfer.setData("Text",i.getSelection());hq.dataTransfer.effectAllowed="copyMove";if(hq.dataTransfer.setDragImage&&!aM){var hp=g4("img",null,null,"position: fixed; left: 0; top: 0;");hp.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(eD){hp.width=hp.height=1;i.display.wrapper.appendChild(hp);hp._top=hp.offsetTop}hq.dataTransfer.setDragImage(hp,0,0);if(eD){hp.parentNode.removeChild(hp)}}}function hm(i,hp){var hr=cP(i,hp);if(!hr){return}var hq=document.createDocumentFragment();C(i,hr,hq);if(!i.display.dragCursor){i.display.dragCursor=g4("div",null,"CodeMirror-cursors CodeMirror-dragcursors");i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)}ce(i.display.dragCursor,hq)}function dI(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function aK(hs){if(!document.getElementsByClassName){return}var hr=document.getElementsByClassName("CodeMirror");for(var hq=0;hq<hr.length;hq++){var hp=hr[hq].CodeMirror;if(hp){hs(hp)}}}var c5=false;function bw(){if(c5){return}gv();c5=true}function gv(){var i;cj(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;aK(a6)},100)}});cj(window,"blur",function(){return aK(a8)})}function a6(i){var hp=i.display;if(hp.lastWrapHeight==hp.wrapper.clientHeight&&hp.lastWrapWidth==hp.wrapper.clientWidth){return}hp.cachedCharWidth=hp.cachedTextHeight=hp.cachedPaddingH=null;hp.scrollbarsClipped=false;i.setSize()}var f4={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var gl=0;gl<10;gl++){f4[gl+48]=f4[gl+96]=String(gl)}for(var gP=65;gP<=90;gP++){f4[gP]=String.fromCharCode(gP)}for(var gO=1;gO<=12;gO++){f4[gO+111]=f4[gO+63235]="F"+gO}var fZ={};fZ.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fZ.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fZ.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};fZ.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fZ["default"]=cu?fZ.macDefault:fZ.pcDefault;function d1(hq){var hw=hq.split(/-(?!$)/);hq=hw[hw.length-1];var hv,hu,hp,ht;for(var hs=0;hs<hw.length-1;hs++){var hr=hw[hs];if(/^(cmd|meta|m)$/i.test(hr)){ht=true}else{if(/^a(lt)?$/i.test(hr)){hv=true}else{if(/^(c|ctrl|control)$/i.test(hr)){hu=true}else{if(/^s(hift)?$/i.test(hr)){hp=true}else{throw new Error("Unrecognized modifier name: "+hr)}}}}}if(hv){hq="Alt-"+hq}if(hu){hq="Ctrl-"+hq}if(ht){hq="Cmd-"+hq}if(hp){hq="Shift-"+hq}return hq}function c9(hw){var hq={};for(var hv in hw){if(hw.hasOwnProperty(hv)){var hx=hw[hv];if(/^(name|fallthrough|(de|at)tach)$/.test(hv)){continue}if(hx=="..."){delete hw[hv];continue}var hy=cf(hv.split(" "),d1);for(var hu=0;hu<hy.length;hu++){var hs=(void 0),hr=(void 0);if(hu==hy.length-1){hr=hy.join(" ");hs=hx}else{hr=hy.slice(0,hu+1).join(" ");hs="..."}var ht=hq[hr];if(!ht){hq[hr]=hs}else{if(ht!=hs){throw new Error("Inconsistent bindings for "+hr)}}}delete hw[hv]}}for(var hp in hq){hw[hp]=hq[hp]}return hw}function k(hs,hv,hu,hr){hv=gV(hv);var ht=hv.call?hv.call(hs,hr):hv[hs];if(ht===false){return"nothing"}if(ht==="..."){return"multi"}if(ht!=null&&hu(ht)){return"handled"}if(hv.fallthrough){if(Object.prototype.toString.call(hv.fallthrough)!="[object Array]"){return k(hs,hv.fallthrough,hu,hr)}for(var hq=0;hq<hv.fallthrough.length;hq++){var hp=k(hs,hv.fallthrough[hq],hu,hr);if(hp){return hp}}}}function fi(hp){var i=typeof hp=="string"?hp:f4[hp.keyCode];return i=="Ctrl"||i=="Alt"||i=="Shift"||i=="Mod"}function gY(i,hp,hr){var hq=i;if(hp.altKey&&hq!="Alt"){i="Alt-"+i}if((cc?hp.metaKey:hp.ctrlKey)&&hq!="Ctrl"){i="Ctrl-"+i}if((cc?hp.ctrlKey:hp.metaKey)&&hq!="Cmd"){i="Cmd-"+i}if(!hr&&hp.shiftKey&&hq!="Shift"){i="Shift-"+i}return i}function ge(hp,hq){if(eD&&hp.keyCode==34&&hp["char"]){return false}var i=f4[hp.keyCode];if(i==null||hp.altGraphKey){return false}if(hp.keyCode==3&&hp.code){i=hp.code}return gY(i,hp,hq)}function gV(i){return typeof i=="string"?fZ[i]:i}function fL(hp,hv){var hq=hp.doc.sel.ranges,ht=[];for(var hs=0;hs<hq.length;hs++){var hr=hv(hq[hs]);while(ht.length&&cE(hr.from,gx(ht).to)<=0){var hu=ht.pop();if(cE(hu.from,hr.from)<0){hr.from=hu.from;break}}ht.push(hr)}dg(hp,function(){for(var hw=ht.length-1;hw>=0;hw--){be(hp.doc,"",ht[hw].from,ht[hw].to,"+delete")}gw(hp)})}function bH(i,hq,hp){var hr=eW(i.text,hq+hp,hp);return hr<0||hr>i.text.length?null:hr}function aq(i,hr,hp){var hq=bH(i,hr.ch,hp);return hq==null?null:new ac(hr.line,hq,hp<0?"after":"before")}function fg(hp,hx,hu,ht,hr){if(hp){var hs=a(hu,hx.doc.direction);if(hs){var hq=hr<0?gx(hs):hs[0];var hz=(hr<0)==(hq.level==1);var hw=hz?"after":"before";var i;if(hq.level>0||hx.doc.direction=="rtl"){var hv=bi(hx,hu);i=hr<0?hu.text.length-1:0;var hy=F(hx,hv,i).top;i=cO(function(hA){return F(hx,hv,hA).top==hy},(hr<0)==(hq.level==1)?hq.from:hq.to-1,i);if(hw=="before"){i=bH(hu,i,1)}}else{i=hr<0?hq.to:hq.from}return new ac(ht,i,hw)}}return new ac(ht,hr<0?hu.text.length:0,hr<0?"before":"after")}function v(hz,hE,hs,hv){var hB=a(hE,hz.doc.direction);if(!hB){return aq(hE,hs,hv)}if(hs.ch>=hE.text.length){hs.ch=hE.text.length;hs.sticky="before"}else{if(hs.ch<=0){hs.ch=0;hs.sticky="after"}}var hr=aS(hB,hs.ch,hs.sticky),ht=hB[hr];if(hz.doc.direction=="ltr"&&ht.level%2==0&&(hv>0?ht.to>hs.ch:ht.from<hs.ch)){return aq(hE,hs,hv)}var hC=function(hG,hF){return bH(hE,hG instanceof ac?hG.ch:hG,hF)};var hw;var hA=function(hF){if(!hz.options.lineWrapping){return{begin:0,end:hE.text.length}}hw=hw||bi(hz,hE);return bB(hz,hE,hw,hF)};var hu=hA(hs.sticky=="before"?hC(hs,-1):hs.ch);if(hz.doc.direction=="rtl"||ht.level==1){var hD=(ht.level==1)==(hv<0);var hp=hC(hs,hD?1:-1);if(hp!=null&&(!hD?hp>=ht.from&&hp>=hu.begin:hp<=ht.to&&hp<=hu.end)){var hy=hD?"before":"after";return new ac(hs.line,hp,hy)}}var hq=function(hF,hI,hL){var hH=function(hN,hM){return hM?new ac(hs.line,hC(hN,1),"before"):new ac(hs.line,hN,"after")};for(;hF>=0&&hF<hB.length;hF+=hI){var hG=hB[hF];var hJ=(hI>0)==(hG.level!=1);var hK=hJ?hL.begin:hC(hL.end,-1);if(hG.from<=hK&&hK<hG.to){return hH(hK,hJ)}hK=hJ?hG.from:hC(hG.to,-1);if(hL.begin<=hK&&hK<hL.end){return hH(hK,hJ)}}};var hx=hq(hr+hv,hv,hu);if(hx){return hx}var i=hv>0?hu.end:hC(hu.begin,-1);if(i!=null&&!(hv>0&&i==hE.text.length)){hx=hq(hv>0?0:hB.length-1,hv,hA(i));if(hx){return hx}}return null}var fl={selectAll:av,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),ah)},killLine:function(i){return fL(i,function(hq){if(hq.empty()){var hp=f3(i.doc,hq.head.line).text.length;if(hq.head.ch==hp&&hq.head.line<i.lastLine()){return{from:hq.head,to:ac(hq.head.line+1,0)}}else{return{from:hq.head,to:ac(hq.head.line,hp)}}}else{return{from:hq.from(),to:hq.to()}}})},deleteLine:function(i){return fL(i,function(hp){return({from:ac(hp.from().line,0),to:gC(i.doc,ac(hp.to().line+1,0))})})},delLineLeft:function(i){return fL(i,function(hp){return({from:ac(hp.from().line,0),to:hp.from()})})},delWrappedLineLeft:function(i){return fL(i,function(hp){var hr=i.charCoords(hp.head,"div").top+5;var hq=i.coordsChar({left:0,top:hr},"div");return{from:hq,to:hp.from()}})},delWrappedLineRight:function(i){return fL(i,function(hp){var hr=i.charCoords(hp.head,"div").top+5;var hq=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:hr},"div");return{from:hp.from(),to:hq}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(ac(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(ac(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(hp){return bM(i,hp.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(hp){return ee(i,hp.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(hp){return en(i,hp.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(hp){var hq=i.cursorCoords(hp.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:hq},"div")},dq)},goLineLeft:function(i){return i.extendSelectionsBy(function(hp){var hq=i.cursorCoords(hp.head,"div").top+5;return i.coordsChar({left:0,top:hq},"div")},dq)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(hp){var hq=i.cursorCoords(hp.head,"div").top+5;var hr=i.coordsChar({left:0,top:hq},"div");if(hr.ch<i.getLine(hr.line).search(/\S/)){return ee(i,hp.head)}return hr},dq)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(hp){var hr=[],hq=hp.listSelections(),hu=hp.options.tabSize;for(var ht=0;ht<hq.length;ht++){var hv=hq[ht].from();var hs=cd(hp.getLine(hv.line),hv.ch,hu);hr.push(cR(hu-hs%hu))}hp.replaceSelections(hr)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return dg(i,function(){var hr=i.listSelections(),hq=[];for(var hs=0;hs<hr.length;hs++){if(!hr[hs].empty()){continue}var hu=hr[hs].head,hp=f3(i.doc,hu.line).text;if(hp){if(hu.ch==hp.length){hu=new ac(hu.line,hu.ch-1)}if(hu.ch>0){hu=new ac(hu.line,hu.ch+1);i.replaceRange(hp.charAt(hu.ch-1)+hp.charAt(hu.ch-2),ac(hu.line,hu.ch-2),hu,"+transpose")}else{if(hu.line>i.doc.first){var ht=f3(i.doc,hu.line-1).text;if(ht){hu=new ac(hu.line,1);i.replaceRange(hp.charAt(0)+i.doc.lineSeparator()+ht.charAt(ht.length-1),ac(hu.line-1,ht.length-1),hu,"+transpose")}}}}hq.push(new ew(hu,hu))}i.setSelections(hq)})},newlineAndIndent:function(i){return dg(i,function(){var hp=i.listSelections();for(var hq=hp.length-1;hq>=0;hq--){i.replaceRange(i.doc.lineSeparator(),hp[hq].anchor,hp[hq].head,"+input")}hp=i.listSelections();for(var hr=0;hr<hp.length;hr++){i.indentLine(hp[hr].from().line,null,true)}gw(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function bM(i,hq){var hp=f3(i.doc,hq);var hr=z(hp);if(hr!=hp){hq=b8(hr)}return fg(true,i,hr,hq,1)}function en(i,hq){var hp=f3(i.doc,hq);var hr=cK(hp);if(hr!=hp){hq=b8(hr)}return fg(true,i,hp,hq,-1)}function ee(hp,hu){var ht=bM(hp,hu.line);var hq=f3(hp.doc,ht.line);var i=a(hq,hp.doc.direction);if(!i||i[0].level==0){var hs=Math.max(0,hq.text.search(/\S/));var hr=hu.line==ht.line&&hu.ch<=hs&&hu.ch;return ac(ht.line,hr?0:hs,ht.sticky)}return ht}function gM(hp,hs,i){if(typeof hs=="string"){hs=fl[hs];if(!hs){return false}}hp.display.input.ensurePolled();var hr=hp.display.shift,hq=false;try{if(hp.isReadOnly()){hp.state.suppressEdits=true}if(i){hp.display.shift=false}hq=hs(hp)!=cz}finally{hp.display.shift=hr;hp.state.suppressEdits=false}return hq}function eJ(hq,hr,ht){for(var hs=0;hs<hq.state.keyMaps.length;hs++){var hp=k(hr,hq.state.keyMaps[hs],ht,hq);if(hp){return hp}}return(hq.options.extraKeys&&k(hr,hq.options.extraKeys,ht,hq))||k(hr,hq.options.keyMap,ht,hq)}var ej=new ho;function bq(i,hq,hs,hr){var hp=i.state.keySeq;if(hp){if(fi(hq)){return"handled"}if(/\'$/.test(hq)){i.state.keySeq=null}else{ej.set(50,function(){if(i.state.keySeq==hp){i.state.keySeq=null;i.display.input.reset()}})}if(cI(i,hp+" "+hq,hs,hr)){return true}}return cI(i,hq,hs,hr)}function cI(hp,hq,hs,hr){var i=eJ(hp,hq,hr);if(i=="multi"){hp.state.keySeq=hq}if(i=="handled"){am(hp,"keyHandled",hp,hq,hs)}if(i=="handled"||i=="multi"){c8(hs);q(hp)}return !!i}function f6(i,hq){var hp=ge(hq,true);if(!hp){return false}if(hq.shiftKey&&!i.state.keySeq){return bq(i,"Shift-"+hp,hq,function(hr){return gM(i,hr,true)})||bq(i,hp,hq,function(hr){if(typeof hr=="string"?/^go[A-Z]/.test(hr):hr.motion){return gM(i,hr)}})}else{return bq(i,hp,hq,function(hr){return gM(i,hr)})}}function eU(i,hq,hp){return bq(i,"'"+hp+"'",hq,function(hr){return gM(i,hr,true)})}var dW=null;function r(hr){var i=this;i.curOp.focus=el();if(a4(i,hr)){return}if(eh&&m<11&&hr.keyCode==27){hr.returnValue=false}var hp=hr.keyCode;i.display.shift=hp==16||hr.shiftKey;var hq=f6(i,hr);if(eD){dW=hq?hp:null;if(!hq&&hp==88&&!dH&&(cu?hr.metaKey:hr.ctrlKey)){i.replaceSelection("",null,"cut")}}if(hp==18&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)){aC(i)}}function aC(hp){var hq=hp.display.lineDiv;gr(hq,"CodeMirror-crosshair");function i(hr){if(hr.keyCode==18||!hr.altKey){h(hq,"CodeMirror-crosshair");eR(document,"keyup",i);eR(document,"mouseover",i)}}cj(document,"keyup",i);cj(document,"mouseover",i)}function bu(i){if(i.keyCode==16){this.doc.sel.shift=false}a4(this,i)}function cZ(hs){var i=this;if(bo(i.display,hs)||a4(i,hs)||hs.ctrlKey&&!hs.altKey||cu&&hs.metaKey){return}var hr=hs.keyCode,hp=hs.charCode;if(eD&&hr==dW){dW=null;c8(hs);return}if((eD&&(!hs.which||hs.which<10))&&f6(i,hs)){return}var hq=String.fromCharCode(hp==null?hr:hp);if(hq=="\x08"){return}if(eU(i,hs,hq)){return}i.display.input.onKeyPress(hs)}var dA=400;var dU=function(hp,hq,i){this.time=hp;this.pos=hq;this.button=i};dU.prototype.compare=function(hp,hq,i){return this.time+dA>hp&&cE(hq,this.pos)==0&&i==this.button};var dV;var dL;function I(hq,hp){var i=+new Date;if(dL&&dL.compare(i,hq,hp)){dV=dL=null;return"triple"}else{if(dV&&dV.compare(i,hq,hp)){dL=new dU(i,hq,hp);dV=null;return"double"}else{dV=new dU(i,hq,hp);dL=null;return"single"}}}function fa(hs){var i=this,hr=i.display;if(a4(i,hs)||hr.activeTouch&&hr.input.supportsTouch()){return}hr.input.ensurePolled();hr.shift=hs.shiftKey;if(bo(hr,hs)){if(!du){hr.scroller.draggable=false;setTimeout(function(){return hr.scroller.draggable=true},100)}return}if(n(i,hs)){return}var ht=cP(i,hs),hp=gI(hs),hq=ht?I(ht,hp):"single";window.focus();if(hp==1&&i.state.selectingText){i.state.selectingText(hs)}if(ht&&de(i,hp,ht,hq,hs)){return}if(hp==1){if(ht){aG(i,ht,hq,hs)}else{if(Q(hs)==hr.scroller){c8(hs)}}}else{if(hp==2){if(ht){gW(i.doc,ht)}setTimeout(function(){return hr.input.focus()},20)}else{if(hp==3){if(he){aH(i,hs)}else{at(i)}}}}}function de(i,hq,ht,hs,hr){var hp="Click";if(hs=="double"){hp="Double"+hp}else{if(hs=="triple"){hp="Triple"+hp}}hp=(hq==1?"Left":hq==2?"Middle":"Right")+hp;return bq(i,gY(hp,hr),hr,function(hv){if(typeof hv=="string"){hv=fl[hv]}if(!hv){return false}var hu=false;try{if(i.isReadOnly()){i.state.suppressEdits=true}hu=hv(i,ht)!=cz}finally{i.state.suppressEdits=false}return hu})}function b3(i,ht,hr){var hp=i.getOption("configureMouse");var hs=hp?hp(i,ht,hr):{};if(hs.unit==null){var hq=gB?hr.shiftKey&&hr.metaKey:hr.altKey;hs.unit=hq?"rectangle":ht=="single"?"char":ht=="double"?"word":"line"}if(hs.extend==null||i.doc.extend){hs.extend=i.doc.extend||hr.shiftKey}if(hs.addNew==null){hs.addNew=cu?hr.metaKey:hr.ctrlKey}if(hs.moveOnDrag==null){hs.moveOnDrag=!(cu?hr.altKey:hr.ctrlKey)}return hs}function aG(i,hu,ht,hr){if(eh){setTimeout(cX(t,i),0)}else{i.curOp.focus=el()}var hq=b3(i,ht,hr);var hs=i.doc.sel,hp;if(i.options.dragDrop&&fw&&!i.isReadOnly()&&ht=="single"&&(hp=hs.contains(hu))>-1&&(cE((hp=hs.ranges[hp]).from(),hu)<0||hu.xRel>0)&&(cE(hp.to(),hu)>0||hu.xRel<0)){bg(i,hr,hu,hq)}else{o(i,hr,hu,hq)}}function bg(hv,i,hs,hp){var hr=hv.display,ht=false;var hq=dv(hv,function(hx){if(du){hr.scroller.draggable=false}hv.state.draggingText=false;eR(hr.wrapper.ownerDocument,"mouseup",hq);eR(hr.wrapper.ownerDocument,"mousemove",hw);eR(hr.scroller,"dragstart",hu);eR(hr.scroller,"drop",hq);if(!ht){c8(hx);if(!hp.addNew){gW(hv.doc,hs,null,null,hp.extend)}if(du||eh&&m==9){setTimeout(function(){hr.wrapper.ownerDocument.body.focus();hr.input.focus()},20)}else{hr.input.focus()}}});var hw=function(hx){ht=ht||Math.abs(i.clientX-hx.clientX)+Math.abs(i.clientY-hx.clientY)>=10};var hu=function(){return ht=true};if(du){hr.scroller.draggable=true}hv.state.draggingText=hq;hq.copy=!hp.moveOnDrag;if(hr.scroller.dragDrop){hr.scroller.dragDrop()}cj(hr.wrapper.ownerDocument,"mouseup",hq);cj(hr.wrapper.ownerDocument,"mousemove",hw);cj(hr.scroller,"dragstart",hu);cj(hr.scroller,"drop",hq);at(hv);setTimeout(function(){return hr.input.focus()},20)}function er(hp,hr,hq){if(hq=="char"){return new ew(hr,hr)}if(hq=="word"){return hp.findWordAt(hr)}if(hq=="line"){return new ew(ac(hr.line,0),gC(hp.doc,ac(hr.line+1,0)))}var i=hq(hp,hr);return new ew(i.from,i.to)}function o(hr,hD,hq,hv){var hC=hr.display,hG=hr.doc;c8(hD);var hp,hF,hs=hG.sel,i=hs.ranges;if(hv.addNew&&!hv.extend){hF=hG.sel.contains(hq);if(hF>-1){hp=i[hF]}else{hp=new ew(hq,hq)}}else{hp=hG.sel.primary();hF=hG.sel.primIndex}if(hv.unit=="rectangle"){if(!hv.addNew){hp=new ew(hq,hq)}hq=cP(hr,hD,true,true);hF=-1}else{var hw=er(hr,hq,hv.unit);if(hv.extend){hp=gi(hp,hw.anchor,hw.head,hv.extend)}else{hp=hw}}if(!hv.addNew){hF=0;cg(hG,new g3([hp],0),R);hs=hG.sel}else{if(hF==-1){hF=i.length;cg(hG,cY(i.concat([hp]),hF),{scroll:false,origin:"*mouse"})}else{if(i.length>1&&i[hF].empty()&&hv.unit=="char"&&!hv.extend){cg(hG,cY(i.slice(0,hF).concat(i.slice(hF+1)),0),{scroll:false,origin:"*mouse"});hs=hG.sel}else{e(hG,hF,hp,R)}}}var hB=hq;function hA(hS){if(cE(hB,hS)==0){return}hB=hS;if(hv.unit=="rectangle"){var hJ=[],hP=hr.options.tabSize;var hI=cd(f3(hG,hq.line).text,hq.ch,hP);var hV=cd(f3(hG,hS.line).text,hS.ch,hP);var hK=Math.min(hI,hV),hT=Math.max(hI,hV);for(var hW=Math.min(hq.line,hS.line),hM=Math.min(hr.lastLine(),Math.max(hq.line,hS.line));hW<=hM;hW++){var hU=f3(hG,hW).text,hL=e4(hU,hK,hP);if(hK==hT){hJ.push(new ew(ac(hW,hL),ac(hW,hL)))}else{if(hU.length>hL){hJ.push(new ew(ac(hW,hL),ac(hW,e4(hU,hT,hP))))}}}if(!hJ.length){hJ.push(new ew(hq,hq))}cg(hG,cY(hs.ranges.slice(0,hF).concat(hJ),hF),{origin:"*mouse",scroll:false});hr.scrollIntoView(hS)}else{var hQ=hp;var hO=er(hr,hS,hv.unit);var hN=hQ.anchor,hR;if(cE(hO.anchor,hN)>0){hR=hO.head;hN=aB(hQ.from(),hO.anchor)}else{hR=hO.anchor;hN=bR(hQ.to(),hO.head)}var hH=hs.ranges.slice(0);hH[hF]=au(hr,new ew(gC(hG,hN),hR));cg(hG,cY(hH,hF),R)}}var hy=hC.wrapper.getBoundingClientRect();var ht=0;function hE(hJ){var hH=++ht;var hL=cP(hr,hJ,true,hv.unit=="rectangle");if(!hL){return}if(cE(hL,hB)!=0){hr.curOp.focus=el();hA(hL);var hK=ct(hC,hG);if(hL.line>=hK.to||hL.line<hK.from){setTimeout(dv(hr,function(){if(ht==hH){hE(hJ)}}),150)}}else{var hI=hJ.clientY<hy.top?-20:hJ.clientY>hy.bottom?20:0;if(hI){setTimeout(dv(hr,function(){if(ht!=hH){return}hC.scroller.scrollTop+=hI;hE(hJ)}),50)}}}function hx(hH){hr.state.selectingText=false;ht=Infinity;c8(hH);hC.input.focus();eR(hC.wrapper.ownerDocument,"mousemove",hz);eR(hC.wrapper.ownerDocument,"mouseup",hu);hG.history.lastSelOrigin=null}var hz=dv(hr,function(hH){if(!gI(hH)){hx(hH)}else{hE(hH)}});var hu=dv(hr,hx);hr.state.selectingText=hu;cj(hC.wrapper.ownerDocument,"mousemove",hz);cj(hC.wrapper.ownerDocument,"mouseup",hu)}function au(hD,hw){var hv=hw.anchor;var hA=hw.head;var hz=f3(hD.doc,hv.line);if(cE(hv,hA)==0&&hv.sticky==hA.sticky){return hw}var hs=a(hz);if(!hs){return hw}var hy=aS(hs,hv.ch,hv.sticky),hq=hs[hy];if(hq.from!=hv.ch&&hq.to!=hv.ch){return hw}var hp=hy+((hq.from==hv.ch)==(hq.level!=1)?0:1);if(hp==0||hp==hs.length){return hw}var hx;if(hA.line!=hv.line){hx=(hA.line-hv.line)*(hD.doc.direction=="ltr"?1:-1)>0}else{var hu=aS(hs,hA.ch,hA.sticky);var hr=hu-hy||(hA.ch-hv.ch)*(hq.level==1?-1:1);if(hu==hp-1||hu==hp){hx=hr<0}else{hx=hr>0}}var ht=hs[hp+(hx?-1:0)];var hC=hx==(ht.level==1);var i=hC?ht.from:ht.to,hB=hC?"after":"before";return hv.ch==i&&hv.sticky==hB?hw:new ew(new ac(hv.line,i,hB),hA)}function hn(hz,hv,hx,hy){var hq,hp;if(hv.touches){hq=hv.touches[0].clientX;hp=hv.touches[0].clientY}else{try{hq=hv.clientX;hp=hv.clientY}catch(hv){return false}}if(hq>=Math.floor(hz.display.gutters.getBoundingClientRect().right)){return false}if(hy){c8(hv)}var hw=hz.display;var hu=hw.lineDiv.getBoundingClientRect();if(hp>hu.bottom||!f8(hz,hx)){return b6(hv)}hp-=hu.top-hw.viewOffset;for(var hs=0;hs<hz.options.gutters.length;++hs){var ht=hw.gutters.childNodes[hs];if(ht&&ht.getBoundingClientRect().right>=hq){var hA=b1(hz.doc,hp);var hr=hz.options.gutters[hs];aO(hz,hx,hz,hA,hr,hv);return b6(hv)}}}function n(i,hp){return hn(i,hp,"gutterClick",true)}function aH(i,hp){if(bo(i.display,hp)||dO(i,hp)){return}if(a4(i,hp,"contextmenu")){return}i.display.input.onContextMenu(hp)}function dO(i,hp){if(!f8(i,"gutterContextMenu")){return false}return hn(i,hp,"gutterContextMenu",false)}function dh(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");ar(i)}var cA={toString:function(){return"CodeMirror.Init"}};var fQ={};var bs={};function fq(i){var hq=i.optionHandlers;function hp(hr,hu,ht,hs){i.defaults[hr]=hu;if(ht){hq[hr]=hs?function(hv,hx,hw){if(hw!=cA){ht(hv,hx,hw)}}:ht}}i.defineOption=hp;i.Init=cA;hp("value","",function(hr,hs){return hr.setValue(hs)},true);hp("mode",null,function(hr,hs){hr.doc.modeOption=hs;bK(hr)},true);hp("indentUnit",2,bK,true);hp("indentWithTabs",false);hp("smartIndent",true);hp("tabSize",4,function(hr){eZ(hr);ar(hr);ap(hr)},true);hp("lineSeparator",null,function(hr,hu){hr.doc.lineSep=hu;if(!hu){return}var ht=[],hv=hr.doc.first;hr.doc.iter(function(hw){for(var hy=0;;){var hx=hw.text.indexOf(hu,hy);if(hx==-1){break}hy=hx+hu.length;ht.push(ac(hv,hx))}hv++});for(var hs=ht.length-1;hs>=0;hs--){be(hr.doc,hu,ht[hs],ac(ht[hs].line,ht[hs].ch+hu.length))}});hp("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(hr,ht,hs){hr.state.specialChars=new RegExp(ht.source+(ht.test("\t")?"":"|\t"),"g");if(hs!=cA){hr.refresh()}});hp("specialCharPlaceholder",f2,function(hr){return hr.refresh()},true);hp("electricChars",true);hp("inputStyle",eS?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);hp("spellcheck",false,function(hr,hs){return hr.getInputField().spellcheck=hs},true);hp("rtlMoveVisually",!a1);hp("wholeLineUpdateBefore",true);hp("theme","default",function(hr){dh(hr);d4(hr)},true);hp("keyMap","default",function(hr,hv,hs){var ht=gV(hv);var hu=hs!=cA&&gV(hs);if(hu&&hu.detach){hu.detach(hr,ht)}if(ht.attach){ht.attach(hr,hu||null)}});hp("extraKeys",null);hp("configureMouse",null);hp("lineWrapping",false,fp,true);hp("gutters",[],function(hr){cD(hr.options);d4(hr)},true);hp("fixedGutter",true,function(hr,hs){hr.display.gutters.style.left=hs?ex(hr.display)+"px":"0";hr.refresh()},true);hp("coverGutterNextToScrollbar",false,function(hr){return fM(hr)},true);hp("scrollbarStyle","native",function(hr){aN(hr);fM(hr);hr.display.scrollbars.setScrollTop(hr.doc.scrollTop);hr.display.scrollbars.setScrollLeft(hr.doc.scrollLeft)},true);hp("lineNumbers",false,function(hr){cD(hr.options);d4(hr)},true);hp("firstLineNumber",1,d4,true);hp("lineNumberFormatter",function(hr){return hr},d4,true);hp("showCursorWhenSelecting",false,bW,true);hp("resetSelectionOnContextMenu",true);hp("lineWiseCopyCut",true);hp("pasteLinesPerSelection",true);hp("readOnly",false,function(hr,hs){if(hs=="nocursor"){a8(hr);hr.display.input.blur()}hr.display.input.readOnlyChanged(hs)});hp("disableInput",false,function(hr,hs){if(!hs){hr.display.input.reset()}},true);hp("dragDrop",true,g1);hp("allowDropFileTypes",null);hp("cursorBlinkRate",530);hp("cursorScrollMargin",0);hp("cursorHeight",1,bW,true);hp("singleCursorHeightPerLine",true,bW,true);hp("workTime",100);hp("workDelay",100);hp("flattenSpans",true,eZ,true);hp("addModeClass",false,eZ,true);hp("pollInterval",100);hp("undoDepth",200,function(hr,hs){return hr.doc.history.undoDepth=hs});hp("historyEventDelay",1250);hp("viewportMargin",10,function(hr){return hr.refresh()},true);hp("maxHighlightLength",10000,eZ,true);hp("moveInputWithCursor",true,function(hr,hs){if(!hs){hr.display.input.resetPosition()}});hp("tabindex",null,function(hr,hs){return hr.display.input.getField().tabIndex=hs||""});hp("autofocus",null);hp("direction","ltr",function(hr,hs){return hr.doc.setDirection(hs)},true)}function d4(i){eO(i);ap(i);fn(i)}function g1(hp,hs,hq){var ht=hq&&hq!=cA;if(!hs!=!ht){var hr=hp.display.dragFunctions;var i=hs?cj:eR;i(hp.display.scroller,"dragstart",hr.start);i(hp.display.scroller,"dragenter",hr.enter);i(hp.display.scroller,"dragover",hr.over);i(hp.display.scroller,"dragleave",hr.leave);i(hp.display.scroller,"drop",hr.drop)}}function fp(i){if(i.options.lineWrapping){gr(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{h(i.display.wrapper,"CodeMirror-wrap");f(i)}af(i);ap(i);ar(i);setTimeout(function(){return fM(i)},100)}function K(hp,hr){var hw=this;if(!(this instanceof K)){return new K(hp,hr)}this.options=hr=hr?aZ(hr):{};aZ(fQ,hr,false);cD(hr);var hv=hr.value;if(typeof hv=="string"){hv=new aD(hv,hr.mode,null,hr.lineSeparator,hr.direction)}this.doc=hv;var hq=new K.inputStyles[hr.inputStyle](this);var hu=this.display=new fs(hp,hv,hq);hu.wrapper.CodeMirror=this;eO(this);dh(this);if(hr.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}aN(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new ho(),keySeq:null,specialChars:null};if(hr.autofocus&&!eS){hu.input.focus()}if(eh&&m<11){setTimeout(function(){return hw.display.input.reset(true)},20)}gL(this);bw();dc(this);this.curOp.forceUpdate=true;eN(this,hv);if((hr.autofocus&&!eS)||this.hasFocus()){setTimeout(cX(c3,this),20)}else{a8(this)}for(var ht in bs){if(bs.hasOwnProperty(ht)){bs[ht](hw,hr[ht],cA)}}eG(this);if(hr.finishInit){hr.finishInit(this)}for(var hs=0;hs<bl.length;++hs){bl[hs](hw)}aw(this);if(du&&hr.lineWrapping&&getComputedStyle(hu.lineDiv).textRendering=="optimizelegibility"){hu.lineDiv.style.textRendering="auto"}}K.defaults=fQ;K.optionHandlers=bs;function gL(hp){var ht=hp.display;cj(ht.scroller,"mousedown",dv(hp,fa));if(eh&&m<11){cj(ht.scroller,"dblclick",dv(hp,function(hx){if(a4(hp,hx)){return}var hy=cP(hp,hx);if(!hy||n(hp,hx)||bo(hp.display,hx)){return}c8(hx);var hw=hp.findWordAt(hy);gW(hp.doc,hw.anchor,hw.head)}))}else{cj(ht.scroller,"dblclick",function(hw){return a4(hp,hw)||c8(hw)})}if(!he){cj(ht.scroller,"contextmenu",function(hw){return aH(hp,hw)})}var hv,i={end:0};function hu(){if(ht.activeTouch){hv=setTimeout(function(){return ht.activeTouch=null},1000);i=ht.activeTouch;i.end=+new Date}}function hr(hw){if(hw.touches.length!=1){return false}var hx=hw.touches[0];return hx.radiusX<=1&&hx.radiusY<=1}function hq(hz,hw){if(hw.left==null){return true}var hy=hw.left-hz.left,hx=hw.top-hz.top;return hy*hy+hx*hx>20*20}cj(ht.scroller,"touchstart",function(hx){if(!a4(hp,hx)&&!hr(hx)&&!n(hp,hx)){ht.input.ensurePolled();clearTimeout(hv);var hw=+new Date;ht.activeTouch={start:hw,moved:false,prev:hw-i.end<=300?i:null};if(hx.touches.length==1){ht.activeTouch.left=hx.touches[0].pageX;ht.activeTouch.top=hx.touches[0].pageY}}});cj(ht.scroller,"touchmove",function(){if(ht.activeTouch){ht.activeTouch.moved=true}});cj(ht.scroller,"touchend",function(hx){var hz=ht.activeTouch;if(hz&&!bo(ht,hx)&&hz.left!=null&&!hz.moved&&new Date-hz.start<300){var hy=hp.coordsChar(ht.activeTouch,"page"),hw;if(!hz.prev||hq(hz,hz.prev)){hw=new ew(hy,hy)}else{if(!hz.prev.prev||hq(hz,hz.prev.prev)){hw=hp.findWordAt(hy)}else{hw=new ew(ac(hy.line,0),gC(hp.doc,ac(hy.line+1,0)))}}hp.setSelection(hw.anchor,hw.head);hp.focus();c8(hx)}hu()});cj(ht.scroller,"touchcancel",hu);cj(ht.scroller,"scroll",function(){if(ht.scroller.clientHeight){B(hp,ht.scroller.scrollTop);bY(hp,ht.scroller.scrollLeft,true);aO(hp,"scroll",hp)}});cj(ht.scroller,"mousewheel",function(hw){return c(hp,hw)});cj(ht.scroller,"DOMMouseScroll",function(hw){return c(hp,hw)});cj(ht.wrapper,"scroll",function(){return ht.wrapper.scrollTop=ht.wrapper.scrollLeft=0});ht.dragFunctions={enter:function(hw){if(!a4(hp,hw)){e5(hw)}},over:function(hw){if(!a4(hp,hw)){hm(hp,hw);e5(hw)}},start:function(hw){return U(hp,hw)},drop:dv(hp,bx),leave:function(hw){if(!a4(hp,hw)){dI(hp)}}};var hs=ht.input.getField();cj(hs,"keyup",function(hw){return bu.call(hp,hw)});cj(hs,"keydown",dv(hp,r));cj(hs,"keypress",dv(hp,cZ));cj(hs,"focus",function(hw){return c3(hp,hw)});cj(hs,"blur",function(hw){return a8(hp,hw)})}var bl=[];K.defineInitHook=function(i){return bl.push(i)};function ak(hE,ht,hD,hr){var hC=hE.doc,hq;if(hD==null){hD="add"}if(hD=="smart"){if(!hC.mode.indent){hD="prev"}else{hq=fK(hE,ht).state}}var hx=hE.options.tabSize;var hF=f3(hC,ht),hw=cd(hF.text,null,hx);if(hF.stateAfter){hF.stateAfter=null}var hp=hF.text.match(/^\s*/)[0],hA;if(!hr&&!/\S/.test(hF.text)){hA=0;hD="not"}else{if(hD=="smart"){hA=hC.mode.indent(hq,hF.text.slice(hp.length),hF.text);if(hA==cz||hA>150){if(!hr){return}hD="prev"}}}if(hD=="prev"){if(ht>hC.first){hA=cd(f3(hC,ht-1).text,null,hx)}else{hA=0}}else{if(hD=="add"){hA=hw+hE.options.indentUnit}else{if(hD=="subtract"){hA=hw-hE.options.indentUnit}else{if(typeof hD=="number"){hA=hw+hD}}}}hA=Math.max(0,hA);var hB="",hz=0;if(hE.options.indentWithTabs){for(var hu=Math.floor(hA/hx);hu;--hu){hz+=hx;hB+="\t"}}if(hz<hA){hB+=cR(hA-hz)}if(hB!=hp){be(hC,hB,ac(ht,0),ac(ht,hp.length),"+input");hF.stateAfter=null;return true}else{for(var hs=0;hs<hC.sel.ranges.length;hs++){var hv=hC.sel.ranges[hs];if(hv.head.line==ht&&hv.head.ch<hp.length){var hy=ac(ht,hp.length);e(hC,hs,new ew(hy,hy));break}}}}var bz=null;function dB(i){bz=i}function gX(hE,hu,hs,hr,hD){var hC=hE.doc;hE.display.shift=false;if(!hr){hr=hC.sel}var ht=hE.state.pasteIncoming||hD=="paste";var hx=gN(hu),hp=null;if(ht&&hr.ranges.length>1){if(bz&&bz.text.join("\n")==hu){if(hr.ranges.length%bz.text.length==0){hp=[];for(var hv=0;hv<bz.text.length;hv++){hp.push(hC.splitLines(bz.text[hv]))}}}else{if(hx.length==hr.ranges.length&&hE.options.pasteLinesPerSelection){hp=cf(hx,function(i){return[i]})}}}var hy;for(var hq=hr.ranges.length-1;hq>=0;hq--){var hw=hr.ranges[hq];var hB=hw.from(),hA=hw.to();if(hw.empty()){if(hs&&hs>0){hB=ac(hB.line,hB.ch-hs)}else{if(hE.state.overwrite&&!ht){hA=ac(hA.line,Math.min(f3(hC,hA.line).text.length,hA.ch+gx(hx).length))}else{if(bz&&bz.lineWise&&bz.text.join("\n")==hu){hB=hA=ac(hB.line,0)}}}}hy=hE.curOp.updateInput;var hz={from:hB,to:hA,text:hp?hp[hq%hp.length]:hx,origin:hD||(ht?"paste":hE.state.cutIncoming?"cut":"+input")};bt(hE.doc,hz);am(hE,"inputRead",hE,hz)}if(hu&&!ht){gT(hE,hu)}gw(hE);hE.curOp.updateInput=hy;hE.curOp.typing=true;hE.state.pasteIncoming=hE.state.cutIncoming=false}function bn(hq,i){var hp=hq.clipboardData&&hq.clipboardData.getData("Text");if(hp){hq.preventDefault();if(!i.isReadOnly()&&!i.options.disableInput){dg(i,function(){return gX(i,hp,0,null,"paste")})}return true}}function gT(hp,ht){if(!hp.options.electricChars||!hp.options.smartIndent){return}var hu=hp.doc.sel;for(var hs=hu.ranges.length-1;hs>=0;hs--){var hq=hu.ranges[hs];if(hq.head.ch>100||(hs&&hu.ranges[hs-1].head.line==hq.head.line)){continue}var hv=hp.getModeAt(hq.head);var hw=false;if(hv.electricChars){for(var hr=0;hr<hv.electricChars.length;hr++){if(ht.indexOf(hv.electricChars.charAt(hr))>-1){hw=ak(hp,hq.head.line,"smart");break}}}else{if(hv.electricInput){if(hv.electricInput.test(f3(hp.doc,hq.head.line).text.slice(0,hq.head.ch))){hw=ak(hp,hq.head.line,"smart")}}}if(hw){am(hp,"electricInput",hp,hq.head.line)}}}function dP(hp){var hu=[],hr=[];for(var hs=0;hs<hp.doc.sel.ranges.length;hs++){var hq=hp.doc.sel.ranges[hs].head.line;var ht={anchor:ac(hq,0),head:ac(hq+1,0)};hr.push(ht);hu.push(hp.getRange(ht.anchor,ht.head))}return{text:hu,ranges:hr}}function gJ(hp,i){hp.setAttribute("autocorrect","off");hp.setAttribute("autocapitalize","off");hp.setAttribute("spellcheck",!!i)}function ba(){var i=g4("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var hp=g4("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(du){i.style.width="1000px"}else{i.setAttribute("wrap","off")}if(fP){i.style.border="1px solid black"}gJ(i);return hp}function em(i){var hp=i.optionHandlers;var hq=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(ht,hu){var hs=this.options,hr=hs[ht];if(hs[ht]==hu&&ht!="mode"){return}hs[ht]=hu;if(hp.hasOwnProperty(ht)){dv(this,hp[ht])(this,hu,hr)}aO(this,"optionChange",this,ht)},getOption:function(hr){return this.options[hr]},getDoc:function(){return this.doc},addKeyMap:function(hs,hr){this.state.keyMaps[hr?"push":"unshift"](gV(hs))},removeKeyMap:function(hs){var ht=this.state.keyMaps;for(var hr=0;hr<ht.length;++hr){if(ht[hr]==hs||ht[hr].name==hs){ht.splice(hr,1);return true}}},addOverlay:dF(function(hr,hs){var ht=hr.token?hr:i.getMode(this.options,hr);if(ht.startState){throw new Error("Overlays may not be stateful.")}cx(this.state.overlays,{mode:ht,modeSpec:hr,opaque:hs&&hs.opaque,priority:(hs&&hs.priority)||0},function(hu){return hu.priority});this.state.modeGen++;ap(this)}),removeOverlay:dF(function(hr){var hv=this;var ht=this.state.overlays;for(var hs=0;hs<ht.length;++hs){var hu=ht[hs].modeSpec;if(hu==hr||typeof hr=="string"&&hu.name==hr){ht.splice(hs,1);hv.state.modeGen++;ap(hv);return}}}),indentLine:dF(function(ht,hr,hs){if(typeof hr!="string"&&typeof hr!="number"){if(hr==null){hr=this.options.smartIndent?"smart":"prev"}else{hr=hr?"add":"subtract"}}if(cw(this.doc,ht)){ak(this,ht,hr,hs)}}),indentSelection:dF(function(hB){var hx=this;var hr=this.doc.sel.ranges,hu=-1;for(var hw=0;hw<hr.length;hw++){var hy=hr[hw];if(!hy.empty()){var hz=hy.from(),hA=hy.to();var hs=Math.max(hu,hz.line);hu=Math.min(hx.lastLine(),hA.line-(hA.ch?0:1))+1;for(var hv=hs;hv<hu;++hv){ak(hx,hv,hB)}var ht=hx.doc.sel.ranges;if(hz.ch==0&&hr.length==ht.length&&ht[hw].from().ch>0){e(hx.doc,hw,new ew(hz,ht[hw].to()),ah)}}else{if(hy.head.line>hu){ak(hx,hy.head.line,hB,true);hu=hy.head.line;if(hw==hx.doc.sel.primIndex){gw(hx)}}}}}),getTokenAt:function(hs,hr){return cS(this,hs,hr)},getLineTokens:function(hs,hr){return cS(this,ac(hs),hr,true)},getTokenTypeAt:function(hy){hy=gC(this.doc,hy);var hu=dD(this,f3(this.doc,hy.line));var hw=0,hx=(hu.length-1)/2,ht=hy.ch;var hs;if(ht==0){hs=hu[2]}else{for(;;){var hr=(hw+hx)>>1;if((hr?hu[hr*2-1]:0)>=ht){hx=hr}else{if(hu[hr*2+1]<ht){hw=hr+1}else{hs=hu[hr*2+2];break}}}}var hv=hs?hs.indexOf("overlay "):-1;return hv<0?hs:hv==0?null:hs.slice(0,hv-1)},getModeAt:function(hs){var hr=this.doc.mode;if(!hr.innerMode){return hr}return i.innerMode(hr,this.getTokenAt(hs).state).mode},getHelper:function(hs,hr){return this.getHelpers(hs,hr)[0]},getHelpers:function(hy,hx){var hv=this;var hA=[];if(!hq.hasOwnProperty(hx)){return hA}var ht=hq[hx],hw=this.getModeAt(hy);if(typeof hw[hx]=="string"){if(ht[hw[hx]]){hA.push(ht[hw[hx]])}}else{if(hw[hx]){for(var hu=0;hu<hw[hx].length;hu++){var hs=ht[hw[hx][hu]];if(hs){hA.push(hs)}}}else{if(hw.helperType&&ht[hw.helperType]){hA.push(ht[hw.helperType])}else{if(ht[hw.name]){hA.push(ht[hw.name])}}}}for(var hr=0;hr<ht._global.length;hr++){var hz=ht._global[hr];if(hz.pred(hw,hv)&&dQ(hA,hz.val)==-1){hA.push(hz.val)}}return hA},getStateAfter:function(hs,hr){var ht=this.doc;hs=dz(ht,hs==null?ht.first+ht.size-1:hs);return fK(this,hs+1,hr).state},cursorCoords:function(hu,hs){var ht,hr=this.doc.sel.primary();if(hu==null){ht=hr.head}else{if(typeof hu=="object"){ht=gC(this.doc,hu)}else{ht=hu?hr.from():hr.to()}}return et(this,ht,hs||"page")},charCoords:function(hs,hr){return dd(this,gC(this.doc,hs),hr||"page")},coordsChar:function(hr,hs){hr=hk(this,hr,hs||"page");return gK(this,hr.left,hr.top)},lineAtHeight:function(hr,hs){hr=hk(this,{top:hr,left:0},hs||"page").top;return b1(this.doc,hr+this.display.viewOffset)},heightAtLine:function(hs,hw,hv){var hr=false,ht;if(typeof hs=="number"){var hu=this.doc.first+this.doc.size-1;if(hs<this.doc.first){hs=this.doc.first}else{if(hs>hu){hs=hu;hr=true}}ht=f3(this.doc,hs)}else{ht=hs}return fC(this,ht,{top:0,left:0},hw||"page",hv||hr).top+(hr?this.doc.height-b7(ht):0)},defaultTextHeight:function(){return bb(this.display)},defaultCharWidth:function(){return d9(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(hw,ht,hy,hu,hA){var hv=this.display;hw=et(this,gC(this.doc,hw));var hx=hw.bottom,hs=hw.left;ht.style.position="absolute";ht.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(ht);hv.sizer.appendChild(ht);if(hu=="over"){hx=hw.top}else{if(hu=="above"||hu=="near"){var hr=Math.max(hv.wrapper.clientHeight,this.doc.height),hz=Math.max(hv.sizer.clientWidth,hv.lineSpace.clientWidth);if((hu=="above"||hw.bottom+ht.offsetHeight>hr)&&hw.top>ht.offsetHeight){hx=hw.top-ht.offsetHeight}else{if(hw.bottom+ht.offsetHeight<=hr){hx=hw.bottom}}if(hs+ht.offsetWidth>hz){hs=hz-ht.offsetWidth}}}ht.style.top=hx+"px";ht.style.left=ht.style.right="";if(hA=="right"){hs=hv.sizer.clientWidth-ht.offsetWidth;ht.style.right="0px"}else{if(hA=="left"){hs=0}else{if(hA=="middle"){hs=(hv.sizer.clientWidth-ht.offsetWidth)/2}}ht.style.left=hs+"px"}if(hy){H(this,{left:hs,top:hx,right:hs+ht.offsetWidth,bottom:hx+ht.offsetHeight})}},triggerOnKeyDown:dF(r),triggerOnKeyPress:dF(cZ),triggerOnKeyUp:bu,triggerOnMouseDown:dF(fa),execCommand:function(hr){if(fl.hasOwnProperty(hr)){return fl[hr].call(null,this)}},triggerElectric:dF(function(hr){gT(this,hr)}),findPosH:function(hy,hu,hv,hs){var hx=this;var hr=1;if(hu<0){hr=-1;hu=-hu}var hw=gC(this.doc,hy);for(var ht=0;ht<hu;++ht){hw=bP(hx.doc,hw,hr,hv,hs);if(hw.hitSide){break}}return hw},moveH:dF(function(hr,hs){var ht=this;this.extendSelectionsBy(function(hu){if(ht.display.shift||ht.doc.extend||hu.empty()){return bP(ht.doc,hu.head,hr,hs,ht.options.rtlMoveVisually)}else{return hr<0?hu.from():hu.to()}},dq)}),deleteH:dF(function(hr,hs){var ht=this.doc.sel,hu=this.doc;if(ht.somethingSelected()){hu.replaceSelection("",null,"+delete")}else{fL(this,function(hw){var hv=bP(hu,hw.head,hr,hs,false);return hr<0?{from:hv,to:hw.head}:{from:hw.head,to:hv}})}}),findPosV:function(hx,hu,hy,hA){var ht=this;var hr=1,hw=hA;if(hu<0){hr=-1;hu=-hu}var hz=gC(this.doc,hx);for(var hs=0;hs<hu;++hs){var hv=et(ht,hz,"div");if(hw==null){hw=hv.left}else{hv.left=hw}hz=bJ(ht,hv,hr,hy);if(hz.hitSide){break}}return hz},moveV:dF(function(hr,ht){var hx=this;var hv=this.doc,hu=[];var hw=!this.display.shift&&!hv.extend&&hv.sel.somethingSelected();hv.extendSelectionsBy(function(hy){if(hw){return hr<0?hy.from():hy.to()}var hA=et(hx,hy.head,"div");if(hy.goalColumn!=null){hA.left=hy.goalColumn}hu.push(hA.left);var hz=bJ(hx,hA,hr,ht);if(ht=="page"&&hy==hv.sel.primary()){da(hx,dd(hx,hz,"div").top-hA.top)}return hz},dq);if(hu.length){for(var hs=0;hs<hv.sel.ranges.length;hs++){hv.sel.ranges[hs].goalColumn=hu[hs]}}}),findWordAt:function(hy){var hw=this.doc,hu=f3(hw,hy.line).text;var hx=hy.ch,ht=hy.ch;if(hu){var hv=this.getHelper(hy,"wordChars");if((hy.sticky=="before"||ht==hu.length)&&hx){--hx}else{++ht}var hs=hu.charAt(hx);var hr=c2(hs,hv)?function(hz){return c2(hz,hv)}:/\s/.test(hs)?function(hz){return/\s/.test(hz)}:function(hz){return(!/\s/.test(hz)&&!c2(hz))};while(hx>0&&hr(hu.charAt(hx-1))){--hx}while(ht<hu.length&&hr(hu.charAt(ht))){++ht}}return new ew(ac(hy.line,hx),ac(hy.line,ht))},toggleOverwrite:function(hr){if(hr!=null&&hr==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){gr(this.display.cursorDiv,"CodeMirror-overwrite")}else{h(this.display.cursorDiv,"CodeMirror-overwrite")}aO(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==el()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dF(function(hr,hs){fx(this,hr,hs)}),getScrollInfo:function(){var hr=this.display.scroller;return{left:hr.scrollLeft,top:hr.scrollTop,height:hr.scrollHeight-dm(this)-this.display.barHeight,width:hr.scrollWidth-dm(this)-this.display.barWidth,clientHeight:dp(this),clientWidth:dT(this)}},scrollIntoView:dF(function(hr,hs){if(hr==null){hr={from:this.doc.sel.primary().head,to:null};if(hs==null){hs=this.options.cursorScrollMargin}}else{if(typeof hr=="number"){hr={from:ac(hr,0),to:null}}else{if(hr.from==null){hr={from:hr,to:null}}}}if(!hr.to){hr.to=hr.from}hr.margin=hs||0;if(hr.from.line!=null){cB(this,hr)}else{cb(this,hr.from,hr.to,hr.margin)}}),setSize:dF(function(ht,hr){var hv=this;var hs=function(hw){return typeof hw=="number"||/^\d+$/.test(String(hw))?hw+"px":hw};if(ht!=null){this.display.wrapper.style.width=hs(ht)}if(hr!=null){this.display.wrapper.style.height=hs(hr)}if(this.options.lineWrapping){a0(this)}var hu=this.display.viewFrom;this.doc.iter(hu,this.display.viewTo,function(hw){if(hw.widgets){for(var hx=0;hx<hw.widgets.length;hx++){if(hw.widgets[hx].noHScroll){W(hv,hu,"widget");break}}}++hu});this.curOp.forceUpdate=true;aO(this,"refresh",this)}),operation:function(hr){return dg(this,hr)},startOperation:function(){return dc(this)},endOperation:function(){return aw(this)},refresh:dF(function(){var hr=this.display.cachedTextHeight;ap(this);this.curOp.forceUpdate=true;ar(this);fx(this,this.doc.scrollLeft,this.doc.scrollTop);dy(this);if(hr==null||Math.abs(hr-bb(this.display))>0.5){af(this)}aO(this,"refresh",this)}),swapDoc:dF(function(hs){var hr=this.doc;hr.cm=null;eN(this,hs);ar(this);this.display.input.reset();fx(this,hs.scrollLeft,hs.scrollTop);this.curOp.forceScroll=true;am(this,"swapDoc",this,hr);return hr}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bT(i);i.registerHelper=function(hs,hr,ht){if(!hq.hasOwnProperty(hs)){hq[hs]=i[hs]={_global:[]}}hq[hs][hr]=ht};i.registerGlobalHelper=function(ht,hs,hr,hu){i.registerHelper(ht,hs,hu);hq[ht]._global.push({pred:hr,val:hu})}}function bP(hA,hz,hr,hB,hp){var hs=hz;var hw=hr;var hv=f3(hA,hz.line);function i(){var hF=hz.line+hr;if(hF<hA.first||hF>=hA.first+hA.size){return false}hz=new ac(hF,hz.ch,hz.sticky);return hv=f3(hA,hF)}function ht(hG){var hF;if(hp){hF=v(hA.cm,hv,hz,hr)}else{hF=aq(hv,hz,hr)}if(hF==null){if(!hG&&i()){hz=fg(hp,hA.cm,hv,hz.line,hr)}else{return false}}else{hz=hF}return true}if(hB=="char"){ht()}else{if(hB=="column"){ht(true)}else{if(hB=="word"||hB=="group"){var hy=null,hD=hB=="group";var hq=hA.cm&&hA.cm.getHelper(hz,"wordChars");for(var hu=true;;hu=false){if(hr<0&&!ht(!hu)){break}var hC=hv.text.charAt(hz.ch)||"\n";var hx=c2(hC,hq)?"w":hD&&hC=="\n"?"n":!hD||/\s/.test(hC)?null:"p";if(hD&&!hu&&!hx){hx="s"}if(hy&&hy!=hx){if(hr<0){hr=1;ht();hz.sticky="after"}break}if(hx){hy=hx}if(hr>0&&!ht(!hu)){break}}}}}var hE=ch(hA,hz,hs,hw,true);if(ad(hs,hE)){hE.hitSide=true}return hE}function bJ(hx,hs,hp,hw){var hv=hx.doc,hu=hs.left,ht;if(hw=="page"){var hr=Math.min(hx.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var i=Math.max(hr-0.5*bb(hx.display),3);ht=(hp>0?hs.bottom:hs.top)+hp*i}else{if(hw=="line"){ht=hp>0?hs.bottom+3:hs.top-3}}var hq;for(;;){hq=gK(hx,hu,ht);if(!hq.outside){break}if(hp<0?ht<=0:ht>=hv.height){hq.hitSide=true;break}ht+=hp*5}return hq}var d2=function(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new ho();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};d2.prototype.init=function(hr){var ht=this;var hq=this,i=hq.cm;var hs=hq.div=hr.lineDiv;gJ(hs,i.options.spellcheck);cj(hs,"paste",function(hu){if(a4(i,hu)||bn(hu,i)){return}if(m<=11){setTimeout(dv(i,function(){return ht.updateFromDOM()}),20)}});cj(hs,"compositionstart",function(hu){ht.composing={data:hu.data,done:false}});cj(hs,"compositionupdate",function(hu){if(!ht.composing){ht.composing={data:hu.data,done:false}}});cj(hs,"compositionend",function(hu){if(ht.composing){if(hu.data!=ht.composing.data){ht.readFromDOMSoon()}ht.composing.done=true}});cj(hs,"touchstart",function(){return hq.forceCompositionEnd()});cj(hs,"input",function(){if(!ht.composing){ht.readFromDOMSoon()}});function hp(hy){if(a4(i,hy)){return}if(i.somethingSelected()){dB({lineWise:false,text:i.getSelections()});if(hy.type=="cut"){i.replaceSelection("",null,"cut")}}else{if(!i.options.lineWiseCopyCut){return}else{var hv=dP(i);dB({lineWise:true,text:hv.text});if(hy.type=="cut"){i.operation(function(){i.setSelections(hv.ranges,0,ah);i.replaceSelection("",null,"cut")})}}}if(hy.clipboardData){hy.clipboardData.clearData();var hx=bz.text.join("\n");hy.clipboardData.setData("Text",hx);if(hy.clipboardData.getData("Text")==hx){hy.preventDefault();return}}var hw=ba(),hz=hw.firstChild;i.display.lineSpace.insertBefore(hw,i.display.lineSpace.firstChild);hz.value=bz.text.join("\n");var hu=document.activeElement;ei(hz);setTimeout(function(){i.display.lineSpace.removeChild(hw);hu.focus();if(hu==hs){hq.showPrimarySelection()}},50)}cj(hs,"copy",hp);cj(hs,"cut",hp)};d2.prototype.prepareSelection=function(){var i=gA(this.cm,false);i.focus=this.cm.state.focused;return i};d2.prototype.showSelection=function(hp,i){if(!hp||!this.cm.display.view.length){return}if(hp.focus||i){this.showPrimarySelection()}this.showMultipleSelections(hp)};d2.prototype.showPrimarySelection=function(){var hs=window.getSelection(),hC=this.cm,hv=hC.doc.sel.primary();var hA=hv.from(),hB=hv.to();if(hC.display.viewTo==hC.display.viewFrom||hA.line>=hC.display.viewTo||hB.line<hC.display.viewFrom){hs.removeAllRanges();return}var ht=aI(hC,hs.anchorNode,hs.anchorOffset);var hx=aI(hC,hs.focusNode,hs.focusOffset);if(ht&&!ht.bad&&hx&&!hx.bad&&cE(aB(ht,hx),hA)==0&&cE(bR(ht,hx),hB)==0){return}var hz=hC.display.view;var hr=(hA.line>=hC.display.viewFrom&&c1(hC,hA))||{node:hz[0].measure.map[2],offset:0};var hw=hB.line<hC.display.viewTo&&c1(hC,hB);if(!hw){var hq=hz[hz.length-1].measure;var hp=hq.maps?hq.maps[hq.maps.length-1]:hq.map;hw={node:hp[hp.length-1],offset:hp[hp.length-2]-hp[hp.length-3]}}if(!hr||!hw){hs.removeAllRanges();return}var hu=hs.rangeCount&&hs.getRangeAt(0),i;try{i=cN(hr.node,hr.offset,hw.offset,hw.node)}catch(hy){}if(i){if(!cQ&&hC.state.focused){hs.collapse(hr.node,hr.offset);if(!i.collapsed){hs.removeAllRanges();hs.addRange(i)}}else{hs.removeAllRanges();hs.addRange(i)}if(hu&&hs.anchorNode==null){hs.addRange(hu)}else{if(cQ){this.startGracePeriod()}}}this.rememberSelection()};d2.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)};d2.prototype.showMultipleSelections=function(i){ce(this.cm.display.cursorDiv,i.cursors);ce(this.cm.display.selectionDiv,i.selection)};d2.prototype.rememberSelection=function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset};d2.prototype.selectionInEditor=function(){var hp=window.getSelection();if(!hp.rangeCount){return false}var i=hp.getRangeAt(0).commonAncestorContainer;return hf(this.div,i)};d2.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};d2.prototype.blur=function(){this.div.blur()};d2.prototype.getField=function(){return this.div};d2.prototype.supportsTouch=function(){return true};d2.prototype.receivedFocus=function(){var i=this;if(this.selectionInEditor()){this.pollSelection()}else{dg(this.cm,function(){return i.cm.curOp.selectionChanged=true})}function hp(){if(i.cm.state.focused){i.pollSelection();i.polling.set(i.cm.options.pollInterval,hp)}}this.polling.set(this.cm.options.pollInterval,hp)};d2.prototype.selectionChanged=function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset};d2.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var hr=window.getSelection(),i=this.cm;if(aY&&dK&&this.cm.options.gutters.length&&g6(hr.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var hp=aI(i,hr.anchorNode,hr.anchorOffset);var hq=aI(i,hr.focusNode,hr.focusOffset);if(hp&&hq){dg(i,function(){cg(i.doc,fD(hp,hq),ah);if(hp.bad||hq.bad){i.curOp.selectionChanged=true}})}};d2.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var hy=this.cm,hI=hy.display,hG=hy.doc.sel.primary();var hH=hG.from(),hs=hG.to();if(hH.ch==0&&hH.line>hy.firstLine()){hH=ac(hH.line-1,f3(hy.doc,hH.line-1).length)}if(hs.ch==f3(hy.doc,hs.line).text.length&&hs.line<hy.lastLine()){hs=ac(hs.line+1,0)}if(hH.line<hI.viewFrom||hs.line>hI.viewTo-1){return false}var hv,ht,hx;if(hH.line==hI.viewFrom||(hv=dZ(hy,hH.line))==0){ht=b8(hI.view[0].line);hx=hI.view[0].node}else{ht=b8(hI.view[hv].line);hx=hI.view[hv-1].node.nextSibling}var hF=dZ(hy,hs.line);var hA,hD;if(hF==hI.view.length-1){hA=hI.viewTo-1;hD=hI.lineDiv.lastChild}else{hA=b8(hI.view[hF+1].line)-1;hD=hI.view[hF+1].node.previousSibling}if(!hx){return false}var hJ=hy.doc.splitLines(g0(hy,hx,hD,ht,hA));var hC=g7(hy.doc,ac(ht,0),ac(hA,f3(hy.doc,hA).text.length));while(hJ.length>1&&hC.length>1){if(gx(hJ)==gx(hC)){hJ.pop();hC.pop();hA--}else{if(hJ[0]==hC[0]){hJ.shift();hC.shift();ht++}else{break}}}var hE=0,hq=0;var hz=hJ[0],hp=hC[0],i=Math.min(hz.length,hp.length);while(hE<i&&hz.charCodeAt(hE)==hp.charCodeAt(hE)){++hE}var hw=gx(hJ),hK=gx(hC);var hr=Math.min(hw.length-(hJ.length==1?hE:0),hK.length-(hC.length==1?hE:0));while(hq<hr&&hw.charCodeAt(hw.length-hq-1)==hK.charCodeAt(hK.length-hq-1)){++hq}if(hJ.length==1&&hC.length==1&&ht==hH.line){while(hE&&hE>hH.ch&&hw.charCodeAt(hw.length-hq-1)==hK.charCodeAt(hK.length-hq-1)){hE--;hq++}}hJ[hJ.length-1]=hw.slice(0,hw.length-hq).replace(/^\u200b+/,"");hJ[0]=hJ[0].slice(hE).replace(/\u200b+$/,"");var hu=ac(ht,hE);var hB=ac(hA,hC.length?gx(hC).length-hq:0);if(hJ.length>1||hJ[0]||cE(hu,hB)){be(hy.doc,hJ,hu,hB,"+input");return true}};d2.prototype.ensurePolled=function(){this.forceCompositionEnd()};d2.prototype.reset=function(){this.forceCompositionEnd()};d2.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};d2.prototype.readFromDOMSoon=function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){if(i.composing.done){i.composing=null}else{return}}i.updateFromDOM()},80)};d2.prototype.updateFromDOM=function(){var i=this;if(this.cm.isReadOnly()||!this.pollContent()){dg(this.cm,function(){return ap(i.cm)})}};d2.prototype.setUneditable=function(i){i.contentEditable="false"};d2.prototype.onKeyPress=function(i){if(i.charCode==0||this.composing){return}i.preventDefault();if(!this.cm.isReadOnly()){dv(this.cm,gX)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}};d2.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")};d2.prototype.onContextMenu=function(){};d2.prototype.resetPosition=function(){};d2.prototype.needsContentAttribute=true;function c1(hu,hs){var ht=f0(hu,hs.line);if(!ht||ht.hidden){return null}var hw=f3(hu.doc,hs.line);var hp=cV(ht,hw,hs.line);var hq=a(hw,hu.doc.direction),hr="left";if(hq){var i=aS(hq,hs.ch);hr=i%2?"right":"left"}var hv=aV(hp.map,hs.ch,hr);hv.offset=hv.collapse=="right"?hv.end:hv.start;return hv}function g6(hp){for(var i=hp;i;i=i.parentNode){if(/CodeMirror-gutter-wrapper/.test(i.className)){return true}}return false}function e6(hp,i){if(i){hp.bad=true}return hp}function g0(hw,hu,hv,hr,hp){var hy="",hq=false,i=hw.doc.lineSeparator();function hs(hA){return function(hB){return hB.id==hA}}function hz(){if(hq){hy+=i;hq=false}}function hx(hA){if(hA){hz();hy+=hA}}function ht(hF){if(hF.nodeType==1){var hC=hF.getAttribute("cm-text");if(hC!=null){hx(hC||hF.textContent.replace(/\u200b/g,""));return}var hE=hF.getAttribute("cm-marker"),hB;if(hE){var hG=hw.findMarks(ac(hr,0),ac(hp+1,0),hs(+hE));if(hG.length&&(hB=hG[0].find(0))){hx(g7(hw.doc,hB.from,hB.to).join(i))}return}if(hF.getAttribute("contenteditable")=="false"){return}var hA=/^(pre|div|p)$/i.test(hF.nodeName);if(hA){hz()}for(var hD=0;hD<hF.childNodes.length;hD++){ht(hF.childNodes[hD])}if(hA){hq=true}}else{if(hF.nodeType==3){hx(hF.nodeValue)}}}for(;;){ht(hu);if(hu==hv){break}hu=hu.nextSibling}return hy}function aI(hp,hs,hu){var ht;if(hs==hp.display.lineDiv){ht=hp.display.lineDiv.childNodes[hu];if(!ht){return e6(hp.clipPos(ac(hp.display.viewTo-1)),true)}hs=null;hu=0}else{for(ht=hs;;ht=ht.parentNode){if(!ht||ht==hp.display.lineDiv){return null}if(ht.parentNode&&ht.parentNode==hp.display.lineDiv){break}}}for(var hr=0;hr<hp.display.view.length;hr++){var hq=hp.display.view[hr];if(hq.node==ht){return ai(hq,hs,hu)}}}function ai(hx,ht,hv){var hq=hx.text.firstChild,hs=false;if(!ht||!hf(hq,ht)){return e6(ac(b8(hx.line),0),true)}if(ht==hq){hs=true;ht=hq.childNodes[hv];hv=0;if(!ht){var hD=hx.rest?gx(hx.rest):hx.line;return e6(ac(b8(hD),hD.text.length),hs)}}var hu=ht.nodeType==3?ht:null,hB=ht;if(!hu&&ht.childNodes.length==1&&ht.firstChild.nodeType==3){hu=ht.firstChild;if(hv){hv=hu.nodeValue.length}}while(hB.parentNode!=hq){hB=hB.parentNode}var hp=hx.measure,hz=hp.maps;function hw(hG,hL,hI){for(var hK=-1;hK<(hz?hz.length:0);hK++){var hF=hK<0?hp.map:hz[hK];for(var hJ=0;hJ<hF.length;hJ+=3){var hH=hF[hJ+2];if(hH==hG||hH==hL){var hM=b8(hK<0?hx.line:hx.rest[hK]);var hE=hF[hJ]+hI;if(hI<0||hH!=hG){hE=hF[hJ+(hI?1:0)]}return ac(hM,hE)}}}}var hC=hw(hu,hB,hv);if(hC){return e6(hC,hs)}for(var i=hB.nextSibling,hy=hu?hu.nodeValue.length-hv:0;i;i=i.nextSibling){hC=hw(i,i.firstChild,0);if(hC){return e6(ac(hC.line,hC.ch-hy),hs)}else{hy+=i.textContent.length}}for(var hA=hB.previousSibling,hr=hv;hA;hA=hA.previousSibling){hC=hw(hA,hA.firstChild,-1);if(hC){return e6(ac(hC.line,hC.ch+hr),hs)}else{hr+=hA.textContent.length}}}var ae=function(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new ho();this.hasSelection=false;this.composing=null};ae.prototype.init=function(hq){var ht=this;var hp=this,i=this.cm;this.createField(hq);var hr=this.textarea;hq.wrapper.insertBefore(this.wrapper,hq.wrapper.firstChild);if(fP){hr.style.width="0px"}cj(hr,"input",function(){if(eh&&m>=9&&ht.hasSelection){ht.hasSelection=null}hp.poll()});cj(hr,"paste",function(hu){if(a4(i,hu)||bn(hu,i)){return}i.state.pasteIncoming=true;hp.fastPoll()});function hs(hv){if(a4(i,hv)){return}if(i.somethingSelected()){dB({lineWise:false,text:i.getSelections()})}else{if(!i.options.lineWiseCopyCut){return}else{var hu=dP(i);dB({lineWise:true,text:hu.text});if(hv.type=="cut"){i.setSelections(hu.ranges,null,ah)}else{hp.prevInput="";hr.value=hu.text.join("\n");ei(hr)}}}if(hv.type=="cut"){i.state.cutIncoming=true}}cj(hr,"cut",hs);cj(hr,"copy",hs);cj(hq.scroller,"paste",function(hu){if(bo(hq,hu)||a4(i,hu)){return}i.state.pasteIncoming=true;hp.focus()});cj(hq.lineSpace,"selectstart",function(hu){if(!bo(hq,hu)){c8(hu)}});cj(hr,"compositionstart",function(){var hu=i.getCursor("from");if(hp.composing){hp.composing.range.clear()}hp.composing={start:hu,range:i.markText(hu,i.getCursor("to"),{className:"CodeMirror-composing"})}});cj(hr,"compositionend",function(){if(hp.composing){hp.poll();hp.composing.range.clear();hp.composing=null}})};ae.prototype.createField=function(i){this.wrapper=ba();this.textarea=this.wrapper.firstChild};ae.prototype.prepareSelection=function(){var hp=this.cm,ht=hp.display,hs=hp.doc;var i=gA(hp);if(hp.options.moveInputWithCursor){var hu=et(hp,hs.sel.primary().head,"div");var hq=ht.wrapper.getBoundingClientRect(),hr=ht.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(ht.wrapper.clientHeight-10,hu.top+hr.top-hq.top));i.teLeft=Math.max(0,Math.min(ht.wrapper.clientWidth-10,hu.left+hr.left-hq.left))}return i};ae.prototype.showSelection=function(hq){var i=this.cm,hp=i.display;ce(hp.cursorDiv,hq.cursors);ce(hp.selectionDiv,hq.selection);if(hq.teTop!=null){this.wrapper.style.top=hq.teTop+"px";this.wrapper.style.left=hq.teLeft+"px"}};ae.prototype.reset=function(hp){if(this.contextMenuPending||this.composing){return}var i=this.cm;if(i.somethingSelected()){this.prevInput="";var hq=i.getSelection();this.textarea.value=hq;if(i.state.focused){ei(this.textarea)}if(eh&&m>=9){this.hasSelection=hq}}else{if(!hp){this.prevInput=this.textarea.value="";if(eh&&m>=9){this.hasSelection=null}}}};ae.prototype.getField=function(){return this.textarea};ae.prototype.supportsTouch=function(){return false};ae.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!eS||el()!=this.textarea)){try{this.textarea.focus()}catch(i){}}};ae.prototype.blur=function(){this.textarea.blur()};ae.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};ae.prototype.receivedFocus=function(){this.slowPoll()};ae.prototype.slowPoll=function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})};ae.prototype.fastPoll=function(){var hp=false,i=this;i.pollingFast=true;function hq(){var hr=i.poll();if(!hr&&!hp){hp=true;i.polling.set(60,hq)}else{i.pollingFast=false;i.slowPoll()}}i.polling.set(20,hq)};ae.prototype.poll=function(){var hv=this;var i=this.cm,hq=this.textarea,hr=this.prevInput;if(this.contextMenuPending||!i.state.focused||(bL(hq)&&!hr&&!this.composing)||i.isReadOnly()||i.options.disableInput||i.state.keySeq){return false}var ht=hq.value;if(ht==hr&&!i.somethingSelected()){return false}if(eh&&m>=9&&this.hasSelection===ht||cu&&/[\uf700-\uf7ff]/.test(ht)){i.display.input.reset();return false}if(i.doc.sel==i.display.selForContextMenu){var hs=ht.charCodeAt(0);if(hs==8203&&!hr){hr="\u200b"}if(hs==8666){this.reset();return this.cm.execCommand("undo")}}var hu=0,hp=Math.min(hr.length,ht.length);while(hu<hp&&hr.charCodeAt(hu)==ht.charCodeAt(hu)){++hu}dg(i,function(){gX(i,ht.slice(hu),hr.length-hu,null,hv.composing?"*compose":null);if(ht.length>1000||ht.indexOf("\n")>-1){hq.value=hv.prevInput=""}else{hv.prevInput=ht}if(hv.composing){hv.composing.range.clear();hv.composing.range=i.markText(hv.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"})}});return true};ae.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};ae.prototype.onKeyPress=function(){if(eh&&m>=9){this.hasSelection=null}this.fastPoll()};ae.prototype.onContextMenu=function(ht){var hy=this,hz=hy.cm,hv=hz.display,hp=hy.textarea;var hx=cP(hz,ht),i=hv.scroller.scrollTop;if(!hx||eD){return}var hs=hz.options.resetSelectionOnContextMenu;if(hs&&hz.doc.sel.contains(hx)==-1){dv(hz,cg)(hz.doc,fD(hx),ah)}var hu=hp.style.cssText,hC=hy.wrapper.style.cssText;hy.wrapper.style.cssText="position: absolute";var hB=hy.wrapper.getBoundingClientRect();hp.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(ht.clientY-hB.top-5)+"px; left: "+(ht.clientX-hB.left-5)+"px;\n      z-index: 1000; background: "+(eh?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var hA;if(du){hA=window.scrollY}hv.input.focus();if(du){window.scrollTo(null,hA)}hv.input.reset();if(!hz.somethingSelected()){hp.value=hy.prevInput=" "}hy.contextMenuPending=true;hv.selForContextMenu=hz.doc.sel;clearTimeout(hv.detectingSelectAll);function hr(){if(hp.selectionStart!=null){var hD=hz.somethingSelected();var hE="\u200b"+(hD?hp.value:"");hp.value="\u21da";hp.value=hE;hy.prevInput=hD?"":"\u200b";hp.selectionStart=1;hp.selectionEnd=hE.length;hv.selForContextMenu=hz.doc.sel}}function hw(){hy.contextMenuPending=false;hy.wrapper.style.cssText=hC;hp.style.cssText=hu;if(eh&&m<9){hv.scrollbars.setScrollTop(hv.scroller.scrollTop=i)}if(hp.selectionStart!=null){if(!eh||(eh&&m<9)){hr()}var hD=0,hE=function(){if(hv.selForContextMenu==hz.doc.sel&&hp.selectionStart==0&&hp.selectionEnd>0&&hy.prevInput=="\u200b"){dv(hz,av)(hz)}else{if(hD++<10){hv.detectingSelectAll=setTimeout(hE,500)}else{hv.selForContextMenu=null;hv.input.reset()}}};hv.detectingSelectAll=setTimeout(hE,200)}}if(eh&&m>=9){hr()}if(he){e5(ht);var hq=function(){eR(window,"mouseup",hq);setTimeout(hw,20)};cj(window,"mouseup",hq)}else{setTimeout(hw,50)}};ae.prototype.readOnlyChanged=function(i){if(!i){this.reset()}this.textarea.disabled=i=="nocursor"};ae.prototype.setUneditable=function(){};ae.prototype.needsContentAttribute=false;function gy(hv,hw){hw=hw?aZ(hw):{};hw.value=hv.value;if(!hw.tabindex&&hv.tabIndex){hw.tabindex=hv.tabIndex}if(!hw.placeholder&&hv.placeholder){hw.placeholder=hv.placeholder}if(hw.autofocus==null){var i=el();hw.autofocus=i==hv||hv.getAttribute("autofocus")!=null&&i==document.body}function hs(){hv.value=hu.getValue()}var ht;if(hv.form){cj(hv.form,"submit",hs);if(!hw.leaveSubmitMethodAlone){var hp=hv.form;ht=hp.submit;try{var hr=hp.submit=function(){hs();hp.submit=ht;hp.submit();hp.submit=hr}}catch(hq){}}}hw.finishInit=function(hx){hx.save=hs;hx.getTextArea=function(){return hv};hx.toTextArea=function(){hx.toTextArea=isNaN;hs();hv.parentNode.removeChild(hx.getWrapperElement());hv.style.display="";if(hv.form){eR(hv.form,"submit",hs);if(typeof hv.form.submit=="function"){hv.form.submit=ht}}}};hv.style.display="none";var hu=K(function(hx){return hv.parentNode.insertBefore(hx,hv.nextSibling)},hw);return hu}function gD(i){i.off=eR;i.on=cj;i.wheelEventPixels=aJ;i.Doc=aD;i.splitLines=gN;i.countColumn=cd;i.findColumn=e4;i.isWordChar=gu;i.Pass=cz;i.signal=aO;i.Line=g9;i.changeEnd=dr;i.scrollbarModel=bA;i.Pos=ac;i.cmpPos=cE;i.modes=d0;i.mimeModes=a5;i.resolveMode=hg;i.getMode=gq;i.modeExtensions=dX;i.extendMode=fm;i.copyState=cq;i.startState=cn;i.innerMode=hc;i.commands=fl;i.keyMap=fZ;i.keyName=ge;i.isModifierKey=fi;i.lookupKey=k;i.normalizeKeyMap=c9;i.StringStream=fG;i.SharedTextMarker=y;i.TextMarker=V;i.LineWidget=d8;i.e_preventDefault=c8;i.e_stopPropagation=dY;i.e_stop=e5;i.addClass=gr;i.contains=hf;i.rmClass=h;i.keyNames=f4}fq(K);em(K);var d="iter insert remove copy getEditor constructor".split(" ");for(var b5 in aD.prototype){if(aD.prototype.hasOwnProperty(b5)&&dQ(d,b5)<0){K.prototype[b5]=(function(i){return function(){return i.apply(this.doc,arguments)}})(aD.prototype[b5])}}bT(aD);K.inputStyles={textarea:ae,contenteditable:d2};K.defineMode=function(i){if(!K.defaults.mode&&i!="null"){K.defaults.mode=i}e9.apply(this,arguments)};K.defineMIME=bE;K.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});K.defineMIME("text/plain","null");K.defineExtension=function(i,hp){K.prototype[i]=hp};K.defineDocExtension=function(i,hp){aD.prototype[i]=hp};K.fromTextArea=gy;gD(K);K.version="5.37.0";return K})));(function(a){"function"==typeof a.define&&a.define("core",["codemirror.js"],function(b){a.CodeMirror=b})})(this);